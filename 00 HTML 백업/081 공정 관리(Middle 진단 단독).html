<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš€ ëŸ°íƒ€ì„ ì„±ëŠ¥ í”„ë¡œíŒŒì¼ëŸ¬ - ë¶ë§ˆí¬ë¦¿ ìƒì„±ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
        }

        /* ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ */
        .nav-menu {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.5);
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .nav-btn:hover,
        .nav-btn.active {
            background: white;
            color: #667eea;
            border-color: white;
        }

        /* ë¼ì´ë¸Œ ë°ëª¨ íŒ¨ë„ */
        .live-demo-panel {
            background: #1e293b;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            color: white;
        }

        .demo-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-indicator.ready {
            background: #10b981;
        }

        .status-indicator.error {
            background: #ef4444;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .section-title {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-description {
            font-size: 14px;
            color: #555;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .bookmarklet-box {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            position: relative;
        }

        .bookmarklet-box pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.5;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .bookmarklet-link {
            display: inline-block;
            padding: 15px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s;
            margin-right: 10px;
            cursor: move;
        }

        .bookmarklet-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn {
            padding: 12px 25px;
            background: #10b981;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .btn.secondary {
            background: #6b7280;
        }

        .btn.secondary:hover {
            background: #4b5563;
        }

        .info-box {
            background: #dbeafe;
            border: 1px solid #3b82f6;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .info-box h3 {
            color: #1e40af;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .info-box ul {
            color: #1e3a8a;
            font-size: 14px;
            line-height: 1.8;
            margin-left: 20px;
        }

        .info-box li {
            margin-bottom: 5px;
        }

        .warning-box {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .warning-box h3 {
            color: #92400e;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .warning-box p {
            color: #78350f;
            font-size: 14px;
            line-height: 1.6;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #e5e7eb;
            transition: all 0.3s;
        }

        .feature-card:hover {
            border-color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .feature-card h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 18px;
        }

        .feature-card p {
            color: #555;
            font-size: 14px;
            line-height: 1.6;
        }

        .code-inline {
            background: #e5e7eb;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }

        .step-list {
            counter-reset: step-counter;
            list-style: none;
            padding-left: 0;
        }

        .step-list li {
            counter-increment: step-counter;
            margin-bottom: 15px;
            padding-left: 40px;
            position: relative;
        }

        .step-list li::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            width: 30px;
            height: 30px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .copy-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            display: none;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .metrics-preview {
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 20px;
            margin-top: 15px;
        }

        .metrics-preview h4 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .metric-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #e5e7eb;
        }

        .metric-item:last-child {
            border-bottom: none;
        }

        .metric-label {
            font-weight: bold;
            color: #374151;
        }

        .metric-value {
            color: #667eea;
            font-family: 'Courier New', monospace;
            cursor: help;
            position: relative;
        }

        /* íˆ´íŒ ìŠ¤íƒ€ì¼ */
        .metric-value[data-tooltip]:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            right: 0;
            top: 100%;
            margin-top: 8px;
            background: #1e293b;
            color: white;
            padding: 12px 15px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: normal;
            line-height: 1.5;
            width: 280px;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            white-space: pre-wrap;
        }

        .metric-value[data-tooltip]:hover::before {
            content: '';
            position: absolute;
            right: 20px;
            top: 100%;
            border: 6px solid transparent;
            border-bottom-color: #1e293b;
            z-index: 1001;
        }

        .metric-value.error {
            color: #ef4444;
            font-weight: bold;
        }

        .metric-value.warning {
            color: #f59e0b;
            font-weight: bold;
        }

        .metric-value.success {
            color: #10b981;
        }

        /* ì½”ë“œ ë·°ì–´ ëª¨ë‹¬ */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            width: 90%;
            max-width: 800px;
            border-radius: 12px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            max-height: 80vh;
        }

        .modal-header {
            background: #1e293b;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-weight: bold;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .modal-close {
            background: none;
            border: none;
            color: #94a3b8;
            cursor: pointer;
            font-size: 24px;
            line-height: 1;
        }

        .modal-close:hover {
            color: white;
        }

        .code-viewer {
            background: #0f172a;
            color: #e2e8f0;
            padding: 20px;
            overflow: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 13px;
            line-height: 1.6;
        }

        .code-line {
            display: flex;
            border-left: 3px solid transparent;
        }

        .code-line.error-line {
            background: rgba(239, 68, 68, 0.2);
            border-left-color: #ef4444;
        }

        .line-number {
            width: 50px;
            text-align: right;
            padding-right: 15px;
            color: #64748b;
            user-select: none;
        }

        .line-content {
            flex: 1;
            white-space: pre-wrap;
            word-break: break-all;
        }

        .view-code-btn {
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 2px 8px;
            font-size: 11px;
            cursor: pointer;
            margin-left: 8px;
            vertical-align: middle;
        }

        .view-code-btn:hover {
            background: #2563eb;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ ëŸ°íƒ€ì„ ì„±ëŠ¥ í”„ë¡œíŒŒì¼ëŸ¬</h1>
            <p>ì‹¤í–‰ ì¤‘ì¸ "01 ê³µì • ë° ì •ì‚°.html"ì˜ ì„±ëŠ¥ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¸¡ì •í•˜ëŠ” ë¶ë§ˆí¬ë¦¿ ë„êµ¬</p>

            <!-- ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ -->
            <nav class="nav-menu">
                <button class="nav-btn active" onclick="showSection('bookmarklet')">ğŸ”– ë¶ë§ˆí¬ ìƒì„±</button>
                <button class="nav-btn" onclick="showSection('demo')">ğŸ§ª ë¼ì´ë¸Œ ë°ëª¨</button>
                <button class="nav-btn" onclick="showSection('usage')">ğŸ“– ì‚¬ìš© ë°©ë²•</button>
                <button class="nav-btn" onclick="showSection('metrics')">ğŸ“Š ì¸¡ì • í•­ëª©</button>
                <button class="nav-btn" onclick="showSection('advanced')">ğŸ¯ ê³ ê¸‰ ê¸°ëŠ¥</button>
            </nav>
        </div>

        <div class="content">
            <!-- ë¹ ë¥¸ ì‹œì‘ ë°°ë„ˆ -->
            <div
                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; text-align: center;">
                <div style="font-size: 20px; font-weight: bold; margin-bottom: 10px;">ğŸ”¬ ì¢…í•© ì§„ë‹¨ ë„êµ¬ v2.3</div>
                <div style="font-size: 14px; margin-bottom: 15px;">15ê°œ ì¹´í…Œê³ ë¦¬ â€¢ 66ê°œ ì§„ë‹¨ í•­ëª© â€¢ ğŸ”® ì ì¬ì  ì˜¤ë¥˜ + â±ï¸ v1.8 íƒ€ì´ë¨¸ ì—°ë™ ì§„ë‹¨
                </div>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button
                        onclick="document.getElementById('section-bookmarklet').scrollIntoView({behavior: 'smooth'})"
                        class="btn" style="background: white; color: #667eea; font-weight: bold; padding: 10px 20px;">
                        ğŸ”– ë¶ë§ˆí¬ë¦¿ ë§Œë“¤ê¸°
                    </button>
                    <button onclick="document.getElementById('section-demo').scrollIntoView({behavior: 'smooth'})"
                        class="btn"
                        style="background: rgba(255,255,255,0.2); color: white; font-weight: bold; padding: 10px 20px; border: 1px solid rgba(255,255,255,0.5);">
                        ğŸ§ª ë¼ì´ë¸Œ ì§„ë‹¨
                    </button>
                </div>
            </div>

            <!-- ë¶ë§ˆí¬ë¦¿ ìƒì„± ì„¹ì…˜ (í•­ìƒ í‘œì‹œ) -->
            <div class="section" id="section-bookmarklet" style="border: 2px solid #667eea; background: #f0fdfa;">
                <div class="section-title" style="color: #0d9488;">
                    ğŸš€ ì„±ëŠ¥ í”„ë¡œíŒŒì¼ëŸ¬ ë¶ë§ˆí¬ë¦¿ ìƒì„±
                </div>
                <div class="section-description">
                    ì•„ë˜ì˜ <strong>"ğŸš€ ì„±ëŠ¥ í”„ë¡œíŒŒì¼ëŸ¬"</strong> ë²„íŠ¼ì„ ë§ˆìš°ìŠ¤ë¡œ í´ë¦­í•˜ì—¬ ë¸Œë¼ìš°ì € ìƒë‹¨ì˜ ë¶ë§ˆí¬ ë°”ë¡œ <strong>ë“œë˜ê·¸ ì•¤ ë“œë¡­</strong>í•˜ì„¸ìš”.
                    <br><span style="font-size: 12px; color: #64748b;">(ë˜ëŠ” 'ì½”ë“œ ë³µì‚¬' ë²„íŠ¼ì„ ëˆŒëŸ¬ ìˆ˜ë™ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤)</span>
                </div>
                <div style="text-align: center; padding: 20px;">
                    <!-- ë“œë˜ê·¸ ê°€ëŠ¥í•œ ë§í¬ ë²„íŠ¼ -->
                    <a id="bookmarkletLink" href="#" onclick="return false;"
                        style="display: inline-block; text-decoration: none; background: #667eea; color: white; padding: 12px 25px; border-radius: 6px; font-weight: bold; margin-bottom: 15px; cursor: move; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        ğŸš€ ì„±ëŠ¥ í”„ë¡œíŒŒì¼ëŸ¬
                    </a>

                    <div style="margin-bottom: 20px; font-size: 13px; color: #475569;">
                        ğŸ‘† ìœ„ ë²„íŠ¼ì„ ë¶ë§ˆí¬ ë°”ë¡œ ëŒì–´ë‹¤ ë†“ìœ¼ì„¸ìš”!
                    </div>

                    <button onclick="copyBookmarklet()" class="btn"
                        style="background: white; color: #667eea; border: 1px solid #667eea; font-size: 14px; padding: 8px 20px;">
                        ğŸ“‹ ì½”ë“œë¡œ ë³µì‚¬í•˜ê¸°
                    </button>

                    <div id="copyNotification"
                        style="display: none; margin-top: 10px; color: #0d9488; font-weight: bold;">
                        âœ… ì½”ë“œê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!
                    </div>
                </div>
                <div id="copyNotification" style="display: none; margin-top: 10px; color: #0d9488; font-weight: bold;">
                    âœ… ì½”ë“œê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!
                </div>
            </div>
        </div>

        <!-- ì†Œê°œ (ì ‘ê¸°/í´ê¸°) -->
        <details id="section-intro" style="margin-bottom: 15px;">
            <summary
                style="cursor: pointer; padding: 12px 15px; background: #f8f9fa; border-radius: 8px; font-weight: bold; color: #374151;">
                ğŸ“˜ ì´ ë„êµ¬ì˜ íŠ¹ì§• (í´ë¦­í•˜ì—¬ í¼ì¹˜ê¸°)
            </summary>
            <div class="info-box" style="margin-top: 10px;">
                <ul>
                    <li><strong>ë¹„ì¹¨íˆ¬ì (Non-invasive):</strong> ë©”ì¸ HTML íŒŒì¼ì„ ìˆ˜ì •í•˜ì§€ ì•ŠìŒ</li>
                    <li><strong>ëŸ°íƒ€ì„ ì¸¡ì •:</strong> ì‹¤ì œ ë°ì´í„° ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ ì¤‘ ì„±ëŠ¥ ì¸¡ì •</li>
                    <li><strong>ë¶ë§ˆí¬ ë°”ì—ì„œ ì‹¤í–‰:</strong> í´ë¦­ í•œ ë²ˆìœ¼ë¡œ í”„ë¡œíŒŒì¼ë§ ì‹œì‘</li>
                    <li><strong>ìë™/ìˆ˜ë™ ì‹œë‚˜ë¦¬ì˜¤:</strong> ëª¨ë“  ì‚¬ìš©ì í–‰ë™ ì¶”ì  ë° ì¸¡ì •</li>
                    <li><strong>í´ë¼ìš°ë“œ ì—°ë™ ì§€ì›:</strong> ì›¹ ë°°í¬ í™˜ê²½ì—ì„œë„ ë™ì‘</li>
                </ul>
            </div>
        </details>

        <!-- ì‚¬ìš© ë°©ë²• (ì ‘ê¸°/í´ê¸°) -->
        <details id="section-usage" style="margin-bottom: 15px;">
            <summary
                style="cursor: pointer; padding: 12px 15px; background: #f8f9fa; border-radius: 8px; font-weight: bold; color: #374151;">
                ğŸ“– ì‚¬ìš© ë°©ë²• (í´ë¦­í•˜ì—¬ í¼ì¹˜ê¸°)
            </summary>
            <div class="section" style="margin-top: 10px; padding: 15px; background: white; border-radius: 8px;">
                <ol class="step-list">
                    <li>ì•„ë˜ì˜ <strong>"ğŸš€ ì„±ëŠ¥ í”„ë¡œíŒŒì¼ëŸ¬"</strong> ë§í¬ë¥¼ ë¶ë§ˆí¬ ë°”ë¡œ ë“œë˜ê·¸</li>
                    <li>"01 ê³µì • ë° ì •ì‚°.html" í˜ì´ì§€ë¥¼ ë¸Œë¼ìš°ì €ì—ì„œ ì—´ê¸°</li>
                    <li>ë°ì´í„°ë¥¼ ì—…ë¡œë“œí•˜ê±°ë‚˜ ì‘ì—… ìˆ˜í–‰</li>
                    <li>ë¶ë§ˆí¬ ë°”ì˜ "ğŸš€ ì„±ëŠ¥ í”„ë¡œíŒŒì¼ëŸ¬"ë¥¼ í´ë¦­</li>
                    <li>ì‹¤ì‹œê°„ ì„±ëŠ¥ ë¦¬í¬íŠ¸ í™•ì¸ (ìš°ì¸¡ í•˜ë‹¨ íŒ¨ë„)</li>
                </ol>
                <div
                    style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 2px dashed #667eea; text-align: center;">
                    <button onclick="copyBookmarklet()" class="btn" style="background: #667eea;">
                        ğŸ”– ë¶ë§ˆí¬ë¦¿ ì½”ë“œ ë³µì‚¬
                    </button>
                </div>
            </div>
        </details>

        <!-- ì¸¡ì • í•­ëª© (ì ‘ê¸°/í´ê¸°) -->
        <details id="section-metrics" style="margin-bottom: 15px;">
            <summary
                style="cursor: pointer; padding: 12px 15px; background: #f8f9fa; border-radius: 8px; font-weight: bold; color: #374151;">
                ğŸ“Š ì¸¡ì • í•­ëª© 10ê°œ (í´ë¦­í•˜ì—¬ í¼ì¹˜ê¸°)
            </summary>
            <div
                style="margin-top: 10px; padding: 15px; background: white; border-radius: 8px; display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 10px;">
                <div style="padding: 10px; background: #f0fdf4; border-radius: 6px; font-size: 13px;">â±ï¸ í˜ì´ì§€ ì„±ëŠ¥
                    (DCL, FCP, LCP)</div>
                <div style="padding: 10px; background: #f0fdf4; border-radius: 6px; font-size: 13px;">ğŸ“ ë°ì´í„° ì—…ë¡œë“œ íƒ€ì´ë°
                </div>
                <div style="padding: 10px; background: #f0fdf4; border-radius: 6px; font-size: 13px;">ğŸ’¾ Excel ë‹¤ìš´ë¡œë“œ
                    ì‹œê°„</div>
                <div style="padding: 10px; background: #f0fdf4; border-radius: 6px; font-size: 13px;">ğŸ” í•„í„°/ê²€ìƒ‰ ì‘ë‹µ ì‹œê°„
                </div>
                <div style="padding: 10px; background: #f0fdf4; border-radius: 6px; font-size: 13px;">ğŸ“ˆ ê°„íŠ¸ ì°¨íŠ¸ ë Œë”ë§
                </div>
                <div style="padding: 10px; background: #f0fdf4; border-radius: 6px; font-size: 13px;">ğŸ§  ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
                </div>
                <div style="padding: 10px; background: #f0fdf4; border-radius: 6px; font-size: 13px;">ğŸ› ì•…ì„± íŒ¨í„´ íƒì§€
                </div>
                <div style="padding: 10px; background: #f0fdf4; border-radius: 6px; font-size: 13px;">â˜ï¸ ë„¤íŠ¸ì›Œí¬ ìš”ì²­
                </div>
                <div style="padding: 10px; background: #f0fdf4; border-radius: 6px; font-size: 13px;">ğŸš¨ ì½˜ì†” ì˜¤ë¥˜ ìº¡ì²˜
                </div>
                <div style="padding: 10px; background: #f0fdf4; border-radius: 6px; font-size: 13px;">ğŸ” ì •ì  ì½”ë“œ íŒ¨í„´
                </div>
            </div>
        </details>

        <!-- ê³ ê¸‰ ê¸°ëŠ¥ ë° ì£¼ì˜ì‚¬í•­ (ì ‘ê¸°/í´ê¸°) -->
        <details id="section-advanced" style="margin-bottom: 20px;">
            <summary
                style="cursor: pointer; padding: 12px 15px; background: #fef3c7; border-radius: 8px; font-weight: bold; color: #b45309;">
                ğŸ¯ ê³ ê¸‰ ê¸°ëŠ¥ ë° ì£¼ì˜ì‚¬í•­ (í´ë¦­í•˜ì—¬ í¼ì¹˜ê¸°)
            </summary>
            <div
                style="margin-top: 10px; padding: 15px; background: white; border-radius: 8px; border: 1px solid #e5e7eb;">
                <h4 style="margin-bottom: 10px; color: #374151;">ğŸ¯ ê³ ê¸‰ ê¸°ëŠ¥</h4>
                <ul style="margin: 0 0 15px 20px; color: #555; font-size: 13px; line-height: 1.6;">
                    <li>ìë™ ì‹œë‚˜ë¦¬ì˜¤ ë…¹í™” â€¢ Performance API í†µí•©</li>
                    <li>Mutation Observer â€¢ í•¨ìˆ˜ í˜¸ì¶œ ê°€ë¡œì±„ê¸°</li>
                    <li>ì½˜ì†” ì˜¤ë¥˜ ìë™ ìº¡ì²˜ â€¢ ì •ì  ì½”ë“œ íŒ¨í„´ ê²€ì¦</li>
                    <li>CSV ë‚´ë³´ë‚´ê¸° â€¢ ë¹„ì¹¨íˆ¬ì  ë””ë²„ê¹…</li>
                </ul>
                <div style="padding: 12px; background: #fef3c7; border-radius: 6px; border-left: 4px solid #f59e0b;">
                    <strong style="color: #b45309;">âš ï¸ ì£¼ì˜ì‚¬í•­</strong>
                    <p style="margin: 8px 0 0 0; font-size: 12px; color: #92400e; line-height: 1.5;">
                        â€¢ ë¶ë§ˆí¬ë¦¿ì€ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ ì œê±°ë¨ â€¢ ì˜¤ë²„í—¤ë“œ ~5% â€¢ ë¯¼ê°í•œ ë°ì´í„° ìˆ˜ì§‘ ì•ˆ í•¨ â€¢ Chrome/Edge/Firefox ì§€ì›
                    </p>
                </div>
            </div>
        </details>

        <!-- ë¼ì´ë¸Œ ë°ëª¨ ì„¹ì…˜ -->
        <div class="section" id="section-demo">
            <div class="section-title">
                ğŸ§ª ë¼ì´ë¸Œ ì§„ë‹¨ ë°ëª¨
            </div>
            <div class="section-description">
                ì´ í˜ì´ì§€ì—ì„œ ì§ì ‘ ì§„ë‹¨ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”. ëª¨ë“  ì§„ë‹¨ í•­ëª©ì„ í¬ê´„ì ìœ¼ë¡œ ê²€ì‚¬í•˜ì—¬ ê²°ê³¼ë¥¼ ì¦‰ì‹œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </div>

            <div class="live-demo-panel">
                <div class="demo-status">
                    <div class="status-indicator ready" id="demoStatusIndicator"></div>
                    <span id="demoStatusText">ì§„ë‹¨ ì¤€ë¹„ ì™„ë£Œ</span>
                </div>

                <!-- ì§„ë‹¨ ë²„íŠ¼ ê·¸ë£¹ -->
                <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px;">
                    <button onclick="runFullDiagnostic()" class="btn"
                        style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); font-weight: bold;">ğŸ”¬
                        ì „ì²´ ì§„ë‹¨ ì‹¤í–‰</button>
                    <button onclick="runPerformanceCheck()" class="btn" style="background: #10b981;">â±ï¸ ì„±ëŠ¥
                        ì²´í¬</button>
                    <button onclick="runPatternCheck()" class="btn" style="background: #f59e0b;">ğŸ› íŒ¨í„´ ê²€ì¦</button>
                    <button onclick="runConsoleCheck()" class="btn" style="background: #ef4444;">ğŸš¨ ì½˜ì†” ì˜¤ë¥˜</button>
                    <button onclick="runHtmlCheck()" class="btn" style="background: #8b5cf6;">ğŸ“„ HTML ê²€ì‚¬</button>
                    <button onclick="runEncodingCheck()" class="btn" style="background: #06b6d4;">ğŸ”¤ ì¸ì½”ë”© ê²€ì‚¬</button>
                    <button onclick="runLatentErrorCheck()" class="btn"
                        style="background: linear-gradient(135deg, #fbbf24, #f59e0b); border: 2px solid #d97706; font-weight: bold;">ğŸ”®
                        ì ì¬ì  ì˜¤ë¥˜</button>
                    <button onclick="runIdleRecoveryCheck()" class="btn"
                        style="background: linear-gradient(135deg, #3b82f6, #1d4ed8); border: 2px solid #1e40af; font-weight: bold;">ğŸ”„
                        ìœ íœ´ ë³µê·€ [v1.7]</button>
                    <button onclick="runMemoryLeakCheck()" class="btn"
                        style="background: linear-gradient(135deg, #dc2626, #b91c1c); border: 2px solid #991b1b; font-weight: bold;">ğŸ§ 
                        ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ [v1.8]</button>
                    <button onclick="runTimerManagerV18Check()" class="btn"
                        style="background: linear-gradient(135deg, #10b981, #059669); border: 2px solid #047857; font-weight: bold;">â±ï¸
                        íƒ€ì´ë¨¸ ì—°ë™ [v1.8]</button>
                    <button onclick="runQuickPerfCheck()" class="btn"
                        style="background: linear-gradient(135deg, #f59e0b, #d97706); border: 2px solid #b45309; font-weight: bold;">âš¡
                        ë¹ ë¥¸ ì„±ëŠ¥ [v4.24]</button>
                    <button onclick="clearDemoResults()" class="btn secondary">ğŸ—‘ï¸ ì´ˆê¸°í™”</button>
                </div>

                <!-- íŒŒì¼ ì—…ë¡œë“œ (ì™¸ë¶€ HTML ì§„ë‹¨ìš©) -->
                <div style="background: #334155; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="font-weight: bold; color: #94a3b8; margin-bottom: 10px;">ğŸ“ ì™¸ë¶€ HTML íŒŒì¼ ì§„ë‹¨ (ì„ íƒì‚¬í•­)
                    </div>
                    <input type="file" id="htmlFileInput" accept=".html,.htm" style="color: #94a3b8;"
                        onchange="handleFileUpload(event)">
                    <div id="uploadStatus" style="color: #64748b; font-size: 12px; margin-top: 5px;">íŒŒì¼ì„ ì—…ë¡œë“œí•˜ë©´ í•´ë‹¹
                        íŒŒì¼ì— ëŒ€í•´ ì§„ë‹¨ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</div>
                </div>

                <!-- ê³ ê¸‰ ê¸°ëŠ¥ (Advanced Features) -->
                <div
                    style="background: #f0fdfa; padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #ccfbf1;">
                    <div style="font-weight: bold; color: #0f766e; margin-bottom: 10px;">ğŸ¯ ê³ ê¸‰ ê¸°ëŠ¥</div>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button onclick="exportDemoCSV()" class="btn" style="background: #0d9488; color: white;">ğŸ’¾ CSVë¡œ
                            ë‚´ë³´ë‚´ê¸°</button>
                        <button onclick="copyDemoConsole()" class="btn" style="background: #8b5cf6; color: white;">ğŸ“ ì½˜ì†”
                            ë³µì‚¬</button>
                    </div>
                </div>

                <!-- ì§„ë‹¨ ê²°ê³¼ ì½˜ì†” -->
                <div id="demoResults"
                    style="background: #0f172a; border-radius: 8px; padding: 15px; min-height: 300px; max-height: 500px; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 12px; line-height: 1.5;">
                    <div style="color: #64748b;">// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</div>
                    <div style="color: #64748b;">// ğŸ”¬ ì§„ë‹¨ ë° í”„ë¡œíŒŒì¼ëŸ¬ v2.0 - ì½˜ì†” ì¶œë ¥</div>
                    <div style="color: #64748b;">// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</div>
                    <div style="color: #64748b;">// 'ì „ì²´ ì§„ë‹¨ ì‹¤í–‰' ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ëª¨ë“  ì§„ë‹¨ì„ ì‹œì‘í•˜ì„¸ìš”.</div>
                </div>

                <!-- ë©”íŠ¸ë¦­ ì¹´ë“œ (í™•ì¥) -->
                <div
                    style="margin-top: 15px; display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px;">
                    <div style="background: #334155; padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 22px; font-weight: bold; color: #10b981;" id="diagMetricDom">-</div>
                        <div style="font-size: 11px; color: #94a3b8;">DOM ë…¸ë“œ</div>
                    </div>
                    <div style="background: #334155; padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 22px; font-weight: bold; color: #667eea;" id="diagMetricMemory">-
                        </div>
                        <div style="font-size: 11px; color: #94a3b8;">ë©”ëª¨ë¦¬ (MB)</div>
                    </div>
                    <div style="background: #334155; padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 22px; font-weight: bold; color: #f59e0b;" id="diagMetricTime">-</div>
                        <div style="font-size: 11px; color: #94a3b8;">ì§„ë‹¨ ì‹œê°„</div>
                    </div>
                    <div style="background: #334155; padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 22px; font-weight: bold; color: #ef4444;" id="diagMetricErrors">0
                        </div>
                        <div style="font-size: 11px; color: #94a3b8;">ì˜¤ë¥˜ ìˆ˜</div>
                    </div>
                    <div style="background: #334155; padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 22px; font-weight: bold; color: #8b5cf6;" id="diagMetricWarnings">0
                        </div>
                        <div style="font-size: 11px; color: #94a3b8;">ê²½ê³  ìˆ˜</div>
                    </div>
                    <div style="background: #334155; padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 22px; font-weight: bold;" id="diagMetricStatus">âœ…</div>
                        <div style="font-size: 11px; color: #94a3b8;">ìƒíƒœ</div>
                    </div>
                </div>
            </div>

            <!-- ì§„ë‹¨ ì²´í¬ë¦¬ìŠ¤íŠ¸ (í™•ì¥) -->
            <div class="metrics-preview" style="margin-top: 20px;">
                <h4>ğŸ“‹ ì§„ë‹¨ ì²´í¬ë¦¬ìŠ¤íŠ¸ (ì´ 66ê°œ í•­ëª©) <span style="font-size:11px; color:#64748b;">í´ë¦­í•˜ì—¬ í¼ì¹˜ê¸°</span></h4>

                <!-- ì¹´í…Œê³ ë¦¬ 1: ê¸°ë³¸ ì„±ëŠ¥ -->
                <details style="margin-top: 10px;">
                    <summary
                        style="padding: 10px; background: #f0fdf4; border-radius: 6px; cursor: pointer; list-style: none;">
                        <strong style="color: #166534;">ğŸ“Š ê¸°ë³¸ ì„±ëŠ¥ (5ê°œ) â–¶</strong>
                    </summary>
                    <div id="checklistPerformance" style="margin-top: 5px; padding-left: 10px;">
                        <div class="metric-item"><span class="metric-label">â±ï¸ DOM ë…¸ë“œ ìˆ˜ < 5000</span><span
                                        class="metric-value" id="checkDom">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ§  ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ < 100MB</span><span
                                        class="metric-value" id="checkMemory">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“ˆ DOMContentLoaded < 3000ms</span><span
                                        class="metric-value" id="checkDCL">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ¨ First Contentful Paint < 2000ms</span>
                                    <span class="metric-value" id="checkFCP">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">â° ì´ë²¤íŠ¸ ë£¨í”„ ì§€ì—° < 100ms</span><span
                                        class="metric-value" id="checkEventLoop">ëŒ€ê¸° ì¤‘</span></div>
                    </div>
                </details>

                <!-- ì¹´í…Œê³ ë¦¬ 2: ì•…ì„± íŒ¨í„´ -->
                <details style="margin-top: 5px;">
                    <summary
                        style="padding: 10px; background: #fef2f2; border-radius: 6px; cursor: pointer; list-style: none;">
                        <strong style="color: #991b1b;">ğŸ› 5ëŒ€ ì•…ì„± íŒ¨í„´ (5ê°œ) â–¶</strong>
                    </summary>
                    <div id="checklistPatterns" style="margin-top: 5px; padding-left: 10px;">
                        <div class="metric-item"><span class="metric-label">ğŸ¹ ë‘ë”ì§€ íŒ¨í„´ (ì¤‘ë³µ ë¡œì§)</span><span
                                class="metric-value" id="checkMole">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ‘» ìœ ë ¹ íŒ¨í„´ (ë„ë‹¬ ë¶ˆê°€ ì½”ë“œ)</span><span
                                class="metric-value" id="checkGhost">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸª¤ í•¨ì • íŒ¨í„´ (í”Œë˜ê·¸ ëˆ„ë½)</span><span
                                class="metric-value" id="checkTrap">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ ìŠ¤íŒŒê²Œí‹° íŒ¨í„´ (3ë‹¨+ ì¤‘ì²©)</span><span
                                class="metric-value" id="checkSpaghetti">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ’£ ì§€ë¢°ë°­ íŒ¨í„´ (const ì¬í• ë‹¹)</span><span
                                class="metric-value" id="checkMinefield">ëŒ€ê¸° ì¤‘</span></div>
                    </div>
                </details>

                <!-- ì¹´í…Œê³ ë¦¬ 3: API í˜¸ì¶œ ìµœì í™” -->
                <details style="margin-top: 5px;">
                    <summary
                        style="padding: 10px; background: #fefce8; border-radius: 6px; cursor: pointer; list-style: none;">
                        <strong style="color: #854d0e;">ğŸ” API í˜¸ì¶œ ìµœì í™” (3ê°œ) â–¶</strong>
                    </summary>
                    <div id="checklistAPI" style="margin-top: 5px; padding-left: 10px;">
                        <div class="metric-item"><span class="metric-label">ğŸ” querySelectorAll('*') í˜¸ì¶œ ì—†ìŒ</span><span
                                class="metric-value" id="checkQsa">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“¦ DataManager.getProjects() ìµœì í™”</span><span
                                class="metric-value" id="checkDm">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ¨ getComputedStyle() ìµœì†Œí™”</span><span
                                class="metric-value" id="checkStyle">ëŒ€ê¸° ì¤‘</span></div>
                    </div>
                </details>

                <!-- ì¹´í…Œê³ ë¦¬ 4: ì½˜ì†”/ì˜¤ë¥˜ -->
                <details style="margin-top: 5px;">
                    <summary
                        style="padding: 10px; background: #fff1f2; border-radius: 6px; cursor: pointer; list-style: none;">
                        <strong style="color: #9f1239;">ğŸš¨ ì½˜ì†” ë° ì˜¤ë¥˜ (3ê°œ) â–¶</strong>
                    </summary>
                    <div id="checklistErrors" style="margin-top: 5px; padding-left: 10px;">
                        <div class="metric-item"><span class="metric-label">âŒ console.error ì—†ìŒ</span><span
                                class="metric-value" id="checkConsoleError">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">âš ï¸ console.warn ìµœì†Œí™”</span><span
                                class="metric-value" id="checkConsoleWarn">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ’¥ ë¯¸ì²˜ë¦¬ ì˜ˆì™¸ ì—†ìŒ</span><span
                                class="metric-value" id="checkException">ëŒ€ê¸° ì¤‘</span></div>
                    </div>
                </details>

                <!-- ì¹´í…Œê³ ë¦¬ 5: HTML/ì¸ì½”ë”© -->
                <details style="margin-top: 5px;">
                    <summary
                        style="padding: 10px; background: #f0f9ff; border-radius: 6px; cursor: pointer; list-style: none;">
                        <strong style="color: #0369a1;">ğŸ“„ HTML ë¬¸ë²• ë° ì¸ì½”ë”© (4ê°œ) â–¶</strong>
                    </summary>
                    <div id="checklistHtml" style="margin-top: 5px; padding-left: 10px;">
                        <div class="metric-item"><span class="metric-label">ğŸ”¤ í•œêµ­ì–´ ì¸ì½”ë”© (UTF-8)</span><span
                                class="metric-value" id="checkEncoding">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“ meta charset ì„ ì–¸</span><span
                                class="metric-value" id="checkCharset">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ·ï¸ ë‹«íˆì§€ ì•Šì€ íƒœê·¸ ì—†ìŒ</span><span
                                class="metric-value" id="checkTags">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“ HTML êµ¬ì¡° ìœ íš¨ì„±</span><span
                                class="metric-value" id="checkHtmlStructure">ëŒ€ê¸° ì¤‘</span></div>
                    </div>
                </details>

                <!-- ì¹´í…Œê³ ë¦¬ 6: ë°ì´í„° íŒŒì´í”„ë¼ì¸ -->
                <details style="margin-top: 5px;">
                    <summary
                        style="padding: 10px; background: #ecfdf5; border-radius: 6px; cursor: pointer; list-style: none;">
                        <strong style="color: #047857;">ğŸ“¦ ë°ì´í„° íŒŒì´í”„ë¼ì¸ ê±´ì „ì„± (4ê°œ) â–¶</strong>
                    </summary>
                    <div id="checklistPipeline" style="margin-top: 5px; padding-left: 10px;">
                        <div class="metric-item"><span class="metric-label">ğŸ”„ projectData ë™ê¸°í™” ìƒíƒœ</span><span
                                class="metric-value" id="checkProjectData">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸª AppStore ë°ì´í„° ì •í•©ì„±</span><span
                                class="metric-value" id="checkAppStore">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“Š DataManager ë¬´ê²°ì„±</span><span
                                class="metric-value" id="checkDataManager">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ”— ë°ì´í„° ì†ŒìŠ¤ ì¼ì¹˜ìœ¨</span><span
                                class="metric-value" id="checkDataSync">ëŒ€ê¸° ì¤‘</span></div>
                    </div>
                </details>

                <!-- ì¹´í…Œê³ ë¦¬ 7: Excel ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ -->
                <details style="margin-top: 5px;">
                    <summary
                        style="padding: 10px; background: #f0fdf4; border-radius: 6px; cursor: pointer; list-style: none;">
                        <strong style="color: #15803d;">ğŸ“¤ Excel ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ (4ê°œ) â–¶</strong>
                    </summary>
                    <div id="checklistExcel" style="margin-top: 5px; padding-left: 10px;">
                        <div class="metric-item"><span class="metric-label">ğŸ“ íŒŒì¼ ì…ë ¥ ìš”ì†Œ ì¡´ì¬</span><span
                                class="metric-value" id="checkFileInput">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“¤ ì—…ë¡œë“œ í•¸ë“¤ëŸ¬ ì •ìƒ</span><span
                                class="metric-value" id="checkUploadHandler">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“¥ ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜ ì •ìƒ</span><span
                                class="metric-value" id="checkDownloadFunc">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ’¾ localStorage ì €ì¥/ë¡œë“œ</span><span
                                class="metric-value" id="checkLocalStorage">ëŒ€ê¸° ì¤‘</span></div>
                    </div>
                </details>

                <!-- ì¹´í…Œê³ ë¦¬ 8: ë¡œì»¬/ì›¹ í™˜ê²½ -->
                <details style="margin-top: 5px;">
                    <summary
                        style="padding: 10px; background: #eff6ff; border-radius: 6px; cursor: pointer; list-style: none;">
                        <strong style="color: #1d4ed8;">ğŸŒ ë¡œì»¬/ì›¹ ë°°í¬ í™˜ê²½ (3ê°œ) â–¶</strong>
                    </summary>
                    <div id="checklistEnvironment" style="margin-top: 5px; padding-left: 10px;">
                        <div class="metric-item"><span class="metric-label">ğŸ–¥ï¸ ì‹¤í–‰ í™˜ê²½ ê°ì§€</span><span
                                class="metric-value" id="checkEnvironment">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">â˜ï¸ í´ë¼ìš°ë“œ ì—°ê²° ìƒíƒœ</span><span
                                class="metric-value" id="checkCloudStatus">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ”’ ë³´ì•ˆ í”„ë¡œí† ì½œ (HTTPS)</span><span
                                class="metric-value" id="checkHttps">ëŒ€ê¸° ì¤‘</span></div>
                    </div>
                </details>

                <!-- ì¹´í…Œê³ ë¦¬ 9: ê°„íŠ¸ ì°¨íŠ¸ ë Œë”ë§ -->
                <details style="margin-top: 5px;">
                    <summary
                        style="padding: 10px; background: #fef3c7; border-radius: 6px; cursor: pointer; list-style: none;">
                        <strong style="color: #b45309;">ğŸ“Š ê°„íŠ¸ ì°¨íŠ¸ ë Œë”ë§ (4ê°œ) â–¶</strong>
                    </summary>
                    <div id="checklistGantt" style="margin-top: 5px; padding-left: 10px;">
                        <div class="metric-item"><span class="metric-label">ğŸ“… ê°„íŠ¸ ì»¨í…Œì´ë„ˆ ì¡´ì¬</span><span
                                class="metric-value" id="checkGanttContainer">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“ íƒ€ì„ë¼ì¸ ë Œë”ë§</span><span class="metric-value"
                                id="checkTimeline">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“Œ Today ë§ˆì»¤ í‘œì‹œ</span><span
                                class="metric-value" id="checkTodayMarker">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“¦ ê·¸ë£¹ í—¤ë” ë Œë”ë§</span><span
                                class="metric-value" id="checkGroupHeaders">ëŒ€ê¸° ì¤‘</span></div>
                    </div>
                </details>

                <!-- ì¹´í…Œê³ ë¦¬ 10: í•„í„°/ë“œë¡­ë‹¤ìš´ -->
                <details style="margin-top: 5px;">
                    <summary
                        style="padding: 10px; background: #fce7f3; border-radius: 6px; cursor: pointer; list-style: none;">
                        <strong style="color: #be185d;">ğŸ”½ í•„í„° ë° ë“œë¡­ë‹¤ìš´ (4ê°œ) â–¶</strong>
                    </summary>
                    <div id="checklistFilters" style="margin-top: 5px; padding-left: 10px;">
                        <div class="metric-item"><span class="metric-label">ğŸ’° ì •ì‚° í•„í„° ë“œë¡­ë‹¤ìš´</span><span
                                class="metric-value" id="checkFilterSettlement">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“‹ ì´ê´„ í•„í„° ë“œë¡­ë‹¤ìš´</span><span
                                class="metric-value" id="checkFilterOverview">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“… ì¼ì • í•„í„° ë“œë¡­ë‹¤ìš´</span><span
                                class="metric-value" id="checkFilterSchedule">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ” ê²€ìƒ‰ ê¸°ëŠ¥ ì •ìƒ</span><span class="metric-value"
                                id="checkSearchFunc">ëŒ€ê¸° ì¤‘</span></div>
                    </div>
                </details>

                <!-- ì¹´í…Œê³ ë¦¬ 11: UI ë©”ë‰´ ë° ë„¤ë¹„ê²Œì´ì…˜ -->
                <details style="margin-top: 5px;">
                    <summary
                        style="padding: 10px; background: #f5f3ff; border-radius: 6px; cursor: pointer; list-style: none;">
                        <strong style="color: #6d28d9;">ğŸ¯ UI ë©”ë‰´ ë° ë„¤ë¹„ê²Œì´ì…˜ (4ê°œ) â–¶</strong>
                    </summary>
                    <div id="checklistUI" style="margin-top: 5px; padding-left: 10px;">
                        <div class="metric-item"><span class="metric-label">ğŸ“‚ ë°ì´í„° ê´€ë¦¬ íŒ¨ë„</span><span
                                class="metric-value" id="checkDataPanel">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“œ ë³€ê²½ ì´ë ¥ íŒ¨ë„</span><span class="metric-value"
                                id="checkHistoryPanel">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ”— ë°”ë¡œê°€ê¸° ë©”ë‰´</span><span class="metric-value"
                                id="checkQuickLinks">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">âš™ï¸ ì„¤ì •/ë„êµ¬ ë©”ë‰´</span><span class="metric-value"
                                id="checkSettingsMenu">ëŒ€ê¸° ì¤‘</span></div>
                    </div>
                </details>

                <!-- ì¹´í…Œê³ ë¦¬ 12: ì ì¬ì  ì½˜ì†” ì˜¤ë¥˜ ì§„ë‹¨ -->
                <details style="margin-top: 5px;">
                    <summary
                        style="padding: 10px; background: linear-gradient(135deg, #fef3c7, #fde68a); border-radius: 6px; cursor: pointer; list-style: none; border: 2px solid #f59e0b;">
                        <strong style="color: #92400e;">ğŸ”® ì ì¬ì  ì½˜ì†” ì˜¤ë¥˜ ì§„ë‹¨ (5ê°œ) â–¶</strong>
                    </summary>
                    <div id="checklistLatentErrors" style="margin-top: 5px; padding-left: 10px;">
                        <div class="metric-item"><span class="metric-label">ğŸ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì°¸ì¡° ê²€ì¦</span><span
                                class="metric-value" id="checkEventHandlerRef">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ–±ï¸ í´ë¦­ ì‹œë®¬ë ˆì´ì…˜ í…ŒìŠ¤íŠ¸</span><span
                                class="metric-value" id="checkClickSimulation">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">âš¡ undefined ë³€ìˆ˜ ì°¸ì¡° íƒì§€</span><span
                                class="metric-value" id="checkUndefinedRef">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ›¡ï¸ ì „ì—­ ì˜ˆì™¸ í•¸ë“¤ëŸ¬ ìƒíƒœ</span><span
                                class="metric-value" id="checkGlobalErrorHandler">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“‹ ì ì¬ì  ì˜¤ë¥˜ ìš”ì•½</span><span
                                class="metric-value" id="checkLatentErrorSummary">ëŒ€ê¸° ì¤‘</span></div>
                    </div>
                </details>

                <!-- ì¹´í…Œê³ ë¦¬ 13: ìœ íœ´ ë³µê·€ ì•ˆì •ì„± [v1.7] -->
                <details style="margin-top: 5px;">
                    <summary
                        style="padding: 10px; background: linear-gradient(135deg, #dbeafe, #bfdbfe); border-radius: 6px; cursor: pointer; list-style: none; border: 2px solid #3b82f6;">
                        <strong style="color: #1e40af;">ğŸ”„ ìœ íœ´ ë³µê·€ ì•ˆì •ì„± (5ê°œ) [v1.7] â–¶</strong>
                    </summary>
                    <div id="checklistIdleRecovery" style="margin-top: 5px; padding-left: 10px;">
                        <div class="metric-item"><span class="metric-label">ğŸ§¹ ì„ ì œì  ì •ë¦¬ í•¨ìˆ˜ (__preEmptiveCleanup)</span><span
                                class="metric-value" id="checkPreEmptiveCleanup">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ‘ï¸ VisibilityCleanupController</span><span
                                class="metric-value" id="checkVisibilityController">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">â±ï¸ TimerManager visibilitychange ì—°ë™</span><span
                                class="metric-value" id="checkTimerManagerVisibility">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“Š ObserverPool í†µê³„ (< 10ê°œ)</span><span
                                class="metric-value" id="checkObserverPoolStats">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">âš¡ ìœ íœ´ ë³µê·€ ì¦‰ì‹œ ì‚¬ìš© ì¤€ë¹„</span><span
                                class="metric-value" id="checkIdleReadiness">ëŒ€ê¸° ì¤‘</span></div>
                    </div>
                </details>

                <!-- ì¹´í…Œê³ ë¦¬ 14: ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì§„ë‹¨ [v1.8] -->
                <details style="margin-top: 5px;">
                    <summary
                        style="padding: 10px; background: linear-gradient(135deg, #fecaca, #fca5a5); border-radius: 6px; cursor: pointer; list-style: none; border: 2px solid #dc2626;">
                        <strong style="color: #991b1b;">ğŸ§  ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì§„ë‹¨ (7ê°œ) [v1.8] â–¶</strong>
                    </summary>
                    <div id="checklistMemoryLeak" style="margin-top: 5px; padding-left: 10px;">
                        <div class="metric-item"><span class="metric-label">ğŸ“Š í˜„ì¬ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ (Heap)</span><span
                                class="metric-value" id="checkMemoryHeap">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“ˆ ë©”ëª¨ë¦¬ ì¦ê°€ìœ¨ (ìœ íœ´ ì „í›„)</span><span
                                class="metric-value" id="checkMemoryGrowth">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ¯ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ëˆ„ì  í˜„í™©</span><span
                                class="metric-value" id="checkListenerCount">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">â° íƒ€ì´ë¨¸ ë¯¸í•´ì œ (setInterval)</span><span
                                class="metric-value" id="checkTimerLeak">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ”— WeakMap/WeakRef ì‚¬ìš© ì—¬ë¶€</span><span
                                class="metric-value" id="checkWeakRefUsage">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ—‘ï¸ Detached DOM ë…¸ë“œ ì¶”ì •</span><span
                                class="metric-value" id="checkDetachedDOM">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“‹ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ìœ„í—˜ë„</span><span
                                class="metric-value" id="checkMemoryLeakRisk">ëŒ€ê¸° ì¤‘</span></div>
                    </div>
                </details>

                <!-- ì¹´í…Œê³ ë¦¬ 15: TimerManager ì—°ë™ í™•ëŒ€ [v1.8] -->
                <details style="margin-top: 5px;">
                    <summary
                        style="padding: 10px; background: linear-gradient(135deg, #d1fae5, #a7f3d0); border-radius: 6px; cursor: pointer; list-style: none; border: 2px solid #10b981;">
                        <strong style="color: #065f46;">â±ï¸ TimerManager ì—°ë™ í™•ëŒ€ (6ê°œ) [v1.8] â–¶</strong>
                    </summary>
                    <div id="checklistTimerManagerV18" style="margin-top: 5px; padding-left: 10px;">
                        <div class="metric-item"><span class="metric-label">ğŸ”§ SettlementMonitor v3.0 ì ìš©</span><span
                                class="metric-value" id="checkSettlementMonitorV3">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">â° settlement-monitor íƒ€ì´ë¨¸</span><span
                                class="metric-value" id="checkPausableSettlement">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“… workdate-btn-observer íƒ€ì´ë¨¸</span><span
                                class="metric-value" id="checkPausableWorkdate">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“‹ pending-work-checker íƒ€ì´ë¨¸</span><span
                                class="metric-value" id="checkPausablePending">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“ gantt-today-marker íƒ€ì´ë¨¸</span><span
                                class="metric-value" id="checkPausableGantt">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">âœ… v1.8 ì¢…í•© ì¤€ë¹„ ìƒíƒœ</span><span
                                class="metric-value" id="checkV18Readiness">ëŒ€ê¸° ì¤‘</span></div>
                    </div>
                </details>

                <!-- ì¹´í…Œê³ ë¦¬ 16: ë¹ ë¥¸ ì„±ëŠ¥ ì§„ë‹¨ [v4.24] -->
                <details style="margin-top: 5px;">
                    <summary
                        style="padding: 10px; background: linear-gradient(135deg, #fef3c7, #fde68a); border-radius: 6px; cursor: pointer; list-style: none; border: 2px solid #f59e0b;">
                        <strong style="color: #92400e;">âš¡ ë¹ ë¥¸ ì„±ëŠ¥ ì§„ë‹¨ (10ê°œ) [v4.24] â–¶</strong>
                    </summary>
                    <div id="checklistQuickPerf" style="margin-top: 5px; padding-left: 10px;">
                        <div class="metric-item"><span class="metric-label">ğŸ“Š DOM ë…¸ë“œ ê°œìˆ˜</span><span
                                class="metric-value" id="checkDomNodeCount">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“¦ projectData ê°œìˆ˜</span><span
                                class="metric-value" id="checkProjectDataCount">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ”„ ì§€ì—° ë Œë”ë§ ìƒíƒœ</span><span
                                class="metric-value" id="checkLazyRenderState">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">â±ï¸ pausableIntervals ê°œìˆ˜</span><span
                                class="metric-value" id="checkPausableIntervalsCount">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ‘ï¸ Observer ì´ ê°œìˆ˜</span><span
                                class="metric-value" id="checkObserverTotalCount">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ”§ createPausableInterval ì¡´ì¬</span><span
                                class="metric-value" id="checkCreatePausableExists">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ§¹ __preEmptiveCleanup ì¡´ì¬</span><span
                                class="metric-value" id="checkPreEmptiveExists">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ›ï¸ FilterRenderManager ì¡´ì¬</span><span
                                class="metric-value" id="checkFilterRenderExists">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">ğŸ“ DIAG_STORE.__measuring</span><span
                                class="metric-value" id="checkDiagMeasuring">ëŒ€ê¸° ì¤‘</span></div>
                        <div class="metric-item"><span class="metric-label">âœ… ì„±ëŠ¥ ì¢…í•© ìƒíƒœ</span><span
                                class="metric-value" id="checkQuickPerfSummary">ëŒ€ê¸° ì¤‘</span></div>
                    </div>
                </details>
            </div>

            <!-- ì§„ë‹¨ ê²°ê³¼ ìš”ì•½ -->
            <div
                style="margin-top: 20px; padding: 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; color: white;">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                    <div>
                        <strong style="font-size: 16px;">ğŸ“Š ì¢…í•© ì§„ë‹¨ ê²°ê³¼</strong>
                        <div id="diagSummary" style="font-size: 14px; margin-top: 5px;">ì§„ë‹¨ì„ ì‹¤í–‰í•˜ë©´ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <div
                            style="text-align: center; background: rgba(255,255,255,0.2); padding: 10px 15px; border-radius: 6px;">
                            <div style="font-size: 24px; font-weight: bold;" id="diagPassCount">-</div>
                            <div style="font-size: 11px;">í†µê³¼</div>
                        </div>
                        <div
                            style="text-align: center; background: rgba(255,255,255,0.2); padding: 10px 15px; border-radius: 6px;">
                            <div style="font-size: 24px; font-weight: bold;" id="diagFailCount">-</div>
                            <div style="font-size: 11px;">ì‹¤íŒ¨</div>
                        </div>
                        <div
                            style="text-align: center; background: rgba(255,255,255,0.2); padding: 10px 15px; border-radius: 6px;">
                            <div style="font-size: 24px; font-weight: bold;" id="diagTotalCount">66</div>
                            <div style="font-size: 11px;">ì´ í•­ëª©</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ì›ë¦¬ ì„¤ëª… -->
    <div class="section">
        <div class="section-title">
            ğŸ”¬ ì‘ë™ ì›ë¦¬
        </div>
        <div class="section-description">
            ë¶ë§ˆí¬ë¦¿ì€ ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë©”ì¸ HTMLì„ ìˆ˜ì •í•˜ì§€ ì•Šê³  ì„±ëŠ¥ì„ ì¸¡ì •í•©ë‹ˆë‹¤:
        </div>
        <div class="bookmarklet-box">
            <pre>
1. ë¶ë§ˆí¬ë¦¿ í´ë¦­ â†’ JavaScript ì½”ë“œê°€ í˜„ì¬ í˜ì´ì§€ì— ì£¼ì…ë¨
2. window ê°ì²´ì˜ í•¨ìˆ˜ë¥¼ Proxyë¡œ ë˜í•‘í•˜ì—¬ í˜¸ì¶œ ì¶”ì 
   ì˜ˆ: querySelectorAll, DataManager.getProjects ë“±
3. Performance APIë¡œ ê° ì‘ì—…ì˜ ì‹œì‘/ì¢…ë£Œ ì‹œê°„ ì¸¡ì •
4. Mutation Observerë¡œ DOM ë³€ê²½ ì‚¬í•­ ê°ì§€
5. ì¸¡ì • ë°ì´í„°ë¥¼ ìš°ì¸¡ í•˜ë‹¨ í”Œë¡œíŒ… íŒ¨ë„ì— ì‹¤ì‹œê°„ í‘œì‹œ
6. ì„¸ì…˜ ì¢…ë£Œ ì‹œ CSV íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥</pre>
        </div>

        <p style="margin-top: 15px; color: #555; font-size: 14px; line-height: 1.6;">
            <strong>í•µì‹¬ ì¥ì :</strong> ë©”ì¸ HTML íŒŒì¼ì„ ì „í˜€ ìˆ˜ì •í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ Section 0-START ê·œì¹™ #4 (ì§„ë‹¨ ì½”ë“œ ì£¼ì… ê¸ˆì§€)ë¥¼ ì™„ë²½íˆ ì¤€ìˆ˜í•©ë‹ˆë‹¤.
        </p>
    </div>
    </div>
    </div>

    <!-- ë³µì‚¬ ì•Œë¦¼ -->
    <div class="copy-notification" id="copyNotification">
        âœ… ë¶ë§ˆí¬ë¦¿ ì½”ë“œê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!
    </div>

    <!-- í”„ë¡œíŒŒì¼ëŸ¬ ìŠ¤í¬ë¦½íŠ¸ (Base64 ì¸ì½”ë”©ìš©) -->
    <script type="text/template" id="profilerScript_v2">
(function() {
    // 0. ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€
    if (window.__BP_ACTIVE__) {
        alert('âš ï¸ ì„±ëŠ¥ í”„ë¡œíŒŒì¼ëŸ¬ê°€ ì´ë¯¸ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.');
        return;
    }
    window.__BP_ACTIVE__ = true;

    // 1. ìŠ¤íƒ€ì¼ ì£¼ì… (ì ‘ë‘ì–´ __bp_)
    const style = document.createElement('style');
    style.textContent = `
        #__bp_root { position: fixed; right: 20px; bottom: 20px; width: 650px; height: 85vh; background: white; z-index: 2147483647; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; overflow: hidden; box-sizing: border-box; transition: width 0.3s, height 0.3s; }
        #__bp_root.minimized { width: 280px; height: 50px; }
        #__bp_root.minimized .__bp_content { display: none; }
        #__bp_root * { box-sizing: border-box; }
        .__bp_header { background: #1e293b; color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; cursor: move; user-select: none; }
        .__bp_content { padding: 15px; overflow-y: auto; flex: 1; font-size: 13px; color: #334155; }
        .__bp_btn { cursor: pointer; border: none; padding: 6px 12px; border-radius: 4px; font-weight: bold; color: white; font-size: 12px; transition: opacity 0.2s; margin-right: 5px; }
        .__bp_btn:hover { opacity: 0.9; }
        .__bp_header_btns { display: flex; gap: 8px; align-items: center; }
        .__bp_header_btns button { background: transparent; border: none; color: white; font-size: 16px; cursor: pointer; padding: 0 4px; }
        .__bp_header_btns button:hover { opacity: 0.7; }
        .__bp_metric_item { display: flex; justify-content: space-between; padding: 8px; border-bottom: 1px solid #f1f5f9; align-items: center; }
        .__bp_val { font-weight: bold; color: #64748b; }
        .__bp_val.success { color: #10b981; }
        .__bp_val.warning { color: #f59e0b; }
        .__bp_val.error { color: #ef4444; }
        /* ì½”ë“œ ë·°ì–´ */
        #__bp_modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2147483648; align-items: center; justify-content: center; }
        .__bp_modal_content { background: white; width: 90%; max-width: 800px; max-height: 80vh; border-radius: 8px; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        #__bp_code_view { background: #0f172a; color: #e2e8f0; padding: 15px; overflow: auto; font-family: monospace; white-space: pre; flex: 1; }
        .__bp_line { display: flex; border-left: 3px solid transparent; }
        .__bp_line.error { background: rgba(239, 68, 68, 0.2); border-left-color: #ef4444; }
        .__bp_lnum { width: 40px; color: #64748b; text-align: right; margin-right: 15px; user-select: none; }
        .__bp_error_badge { background: #ef4444; color: white; padding: 2px 6px; border-radius: 10px; font-size: 11px; margin-left: 5px; }
    `;
    document.head.appendChild(style);

    // 2. UI ìƒì„± (ID ë„¤ì„ìŠ¤í˜ì´ìŠ¤: __bp_)
    const root = document.createElement('div');
    root.id = '__bp_root';
    root.innerHTML = `
        <div class="__bp_header" id="__bp_dragHandle">
            <h3 style="margin:0; font-size:16px; font-weight:bold;">ğŸš€ v2.1<span id="__bp_errorBadge" class="__bp_error_badge" style="display:none;">0</span></h3>
            <div class="__bp_header_btns">
                <button onclick="window.__bp_togglePosition()" title="ìœ„ì¹˜ ì „í™˜">â†”</button>
                <button onclick="window.__bp_toggleMinimize()" title="ì ‘ê¸°/í´ê¸°" id="__bp_minBtn">â–</button>
                <button onclick="document.getElementById('__bp_root').remove(); window.__bp_cleanup(); window.__BP_ACTIVE__=false;" title="ë‹«ê¸°">âœ•</button>
            </div>
        </div>
        <div class="__bp_content">
            <!-- ë²„íŠ¼ ê·¸ë£¹ 1: í•µì‹¬ ì§„ë‹¨ -->
            <div style="margin-bottom: 8px;">
                <button onclick="window.__bp_runDiagnostic()" class="__bp_btn" style="background: linear-gradient(135deg, #667eea, #764ba2);">ğŸ”¬ ì „ì²´</button>
                <button onclick="window.__bp_runQuickPerf()" class="__bp_btn" style="background: linear-gradient(135deg, #f59e0b, #d97706);">âš¡ ë¹ ë¥¸ì„±ëŠ¥</button>
                <button onclick="window.__bp_runPerfCheck()" class="__bp_btn" style="background: #10b981;">â±ï¸ ì„±ëŠ¥</button>
                <button onclick="window.__bp_runPatternCheck()" class="__bp_btn" style="background: #8b5cf6;">ğŸ› íŒ¨í„´</button>
            </div>
            <!-- ë²„íŠ¼ ê·¸ë£¹ 2: ê³ ê¸‰ ì§„ë‹¨ -->
            <div style="margin-bottom: 8px;">
                <button onclick="window.__bp_runIdleRecovery()" class="__bp_btn" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);">ğŸ”„ ìœ íœ´ë³µê·€</button>
                <button onclick="window.__bp_runMemoryLeak()" class="__bp_btn" style="background: linear-gradient(135deg, #dc2626, #b91c1c);">ğŸ§  ë©”ëª¨ë¦¬</button>
                <button onclick="window.__bp_runTimerV18()" class="__bp_btn" style="background: linear-gradient(135deg, #059669, #047857);">â±ï¸ íƒ€ì´ë¨¸</button>
            </div>
            <!-- ë²„íŠ¼ ê·¸ë£¹ 3: ëª¨ë‹ˆí„°ë§ -->
            <div style="margin-bottom: 15px;">
                <button onclick="window.__bp_startMonitor()" class="__bp_btn" style="background: #f59e0b;">ğŸ”´ ëª¨ë‹ˆí„°ë§</button>
                <button onclick="window.__bp_stopMonitor()" class="__bp_btn" style="background: #6b7280;">â¬› ì¤‘ì§€</button>
                <button onclick="window.__bp_clearResults()" class="__bp_btn" style="background: #cbd5e1; color: #475569;">ğŸ—‘ï¸</button>
            </div>
            
            <!-- ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ìƒíƒœ -->
            <div id="__bp_monitorStatus" style="background:#fef3c7; padding:10px; border-radius:6px; margin-bottom:15px; display:none;">
                <div style="font-weight:bold; color:#92400e;">ğŸ”´ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ì¤‘...</div>
                <div style="font-size:11px; color:#b45309;">ë²„íŠ¼ í´ë¦­ ì‹œ ë°œìƒí•˜ëŠ” ì½˜ì†” ì˜¤ë¥˜ê°€ ìë™ ìº¡ì²˜ë©ë‹ˆë‹¤.</div>
                <div style="margin-top:5px; font-size:12px;">
                    <span>ìº¡ì²˜ëœ ì˜¤ë¥˜: <b id="__bp_capturedCount">0</b>ê°œ</span> | 
                    <span>í´ë¦­ ì´ë²¤íŠ¸: <b id="__bp_clickCount">0</b>ê°œ</span>
                </div>
            </div>
            
            <!-- ì½˜ì†” -->
            <div id="__bp_results" style="background:#0f172a; color:#e2e8f0; border-radius:6px; padding:10px; height:200px; overflow-y:auto; font-family:monospace; margin-bottom:15px; white-space:pre-wrap;">// ğŸš€ í”„ë¡œíŒŒì¼ëŸ¬ v2.1 ì¤€ë¹„ ì™„ë£Œ
// 'ëª¨ë‹ˆí„°ë§ ì‹œì‘' í´ë¦­ í›„ ë²„íŠ¼/ë©”ë‰´ ì¡°ì‘ì‹œ ì˜¤ë¥˜ ìë™ ìº¡ì²˜</div>

            <!-- ì²´í¬ë¦¬ìŠ¤íŠ¸ í”„ë¦¬ë·° -->
            <div style="background: #f8fafc; padding: 10px; border-radius: 6px; margin-bottom: 15px;">
                <h4 style="margin:0 0 10px 0; color:#475569;">ğŸ“‹ ì‹¤ì‹œê°„ ìº¡ì²˜ í˜„í™©</h4>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                    <div class="__bp_metric_item"><span>window.onerror</span><span id="__bp_checkOnerror" class="__bp_val">-</span></div>
                    <div class="__bp_metric_item"><span>console.error</span><span id="__bp_checkConsoleErr" class="__bp_val">-</span></div>
                    <div class="__bp_metric_item"><span>Promise ê±°ë¶€</span><span id="__bp_checkPromise" class="__bp_val">-</span></div>
                    <div class="__bp_metric_item"><span>í´ë¦­ ì¶”ì </span><span id="__bp_checkClick" class="__bp_val">-</span></div>
                    <div class="__bp_metric_item"><span>ë§ˆì§€ë§‰ í´ë¦­</span><span id="__bp_lastClick" class="__bp_val">-</span></div>
                    <div class="__bp_metric_item"><span>ë§ˆì§€ë§‰ ì˜¤ë¥˜</span><span id="__bp_lastError" class="__bp_val">-</span></div>
                </div>
            </div>

            <!-- ê³ ê¸‰ ê¸°ëŠ¥ -->
            <div style="background: #f0fdfa; padding: 10px; border-radius: 6px; border: 1px solid #ccfbf1;">
                <h4 style="margin:0 0 10px 0; color:#0f766e;">ğŸ¯ ê²°ê³¼ ë‚´ë³´ë‚´ê¸°</h4>
                <div style="display:flex; gap:10px; flex-wrap:wrap;">
                    <button onclick="window.__bp_exportCSV()" class="__bp_btn" style="background: #0d9488;">ğŸ’¾ CSV ë‚´ë³´ë‚´ê¸°</button>
                    <button onclick="window.__bp_exportJSON()" class="__bp_btn" style="background: #0891b2;">ğŸ“‹ JSON ë³µì‚¬</button>
                    <button onclick="window.__bp_copyConsole()" class="__bp_btn" style="background: #8b5cf6;">ğŸ“ ì½˜ì†” ë³µì‚¬</button>
                    <button onclick="window.__bp_showCapturedErrors()" class="__bp_btn" style="background: #7c3aed;">ğŸ“œ ì˜¤ë¥˜ ëª©ë¡ ë³´ê¸°</button>
                </div>
            </div>
        </div>
        
        <!-- ì½”ë“œ ëª¨ë‹¬ -->
        <div id="__bp_modal">
            <div class="__bp_modal_content">
                <div style="padding:10px 15px; border-bottom:1px solid #e2e8f0; display:flex; justify-content:space-between; align-items:center;">
                    <span style="font-weight:bold; color:#1e293b;">ğŸ” ìº¡ì²˜ëœ ì˜¤ë¥˜ ìƒì„¸</span>
                    <button onclick="document.getElementById('__bp_modal').style.display='none'" style="border:none; background:none; font-size:18px; cursor:pointer;">Ã—</button>
                </div>
                <div id="__bp_code_view"></div>
            </div>
        </div>
    `;
    document.body.appendChild(root);

    // 3. ì˜¤ë¥˜ ìº¡ì²˜ ì €ì¥ì†Œ
    window.__bp_capturedErrors = [];
    window.__bp_clickLog = [];
    window.__bp_isMonitoring = false;
    window.__bp_lastClickTarget = null;

    // ìœ í‹¸ë¦¬í‹°
    const escapeHtml = (unsafe) => (unsafe||'').replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
    const findLineNumber = (src, idx) => { if(!src || idx<0) return 1; return src.substring(0, idx).split('\n').length; };
    const getTime = () => new Date().toLocaleTimeString();

    // 4. ë¡œê¹… í•¨ìˆ˜
    window.__bp_log = function(msg, type, action) {
        const div = document.getElementById('__bp_results');
        if(!div) return;
        const line = document.createElement('div');
        line.style.marginTop = '4px';
        
        let color = '#e2e8f0';
        if(type==='success') color='#4ade80';
        if(type==='warning') color='#facc15';
        if(type==='error') color='#f87171';
        if(type==='header') { color='#c084fc'; line.style.fontWeight='bold'; line.style.marginTop='10px'; line.style.borderBottom='1px solid #475569'; }
        if(type==='click') color='#38bdf8';

        line.style.color = color;
        line.textContent = msg;
        div.appendChild(line);
        div.scrollTop = div.scrollHeight;
    };

    window.__bp_updateCheck = function(id, passed) {
        const el = document.getElementById(id);
        if(el) {
            el.textContent = passed ? 'âœ…' : 'âš ï¸';
            el.className = '__bp_val ' + (passed?'success':'warning');
        }
    };

    window.__bp_updateCount = function(id, count) {
        const el = document.getElementById(id);
        if(el) el.textContent = count;
    };

    window.__bp_updateBadge = function() {
        const badge = document.getElementById('__bp_errorBadge');
        const count = window.__bp_capturedErrors.length;
        if(badge) {
            badge.textContent = count;
            badge.style.display = count > 0 ? 'inline' : 'none';
        }
    };

    // 5. ì›ë³¸ í•¨ìˆ˜ ì €ì¥ (ë³µì›ìš©)
    const originalOnerror = window.onerror;
    const originalOnunhandledrejection = window.onunhandledrejection;
    const originalConsoleError = console.error;
    const originalConsoleWarn = console.warn;

    // 6. í´ë¦­ ì¶”ì  í•¸ë“¤ëŸ¬
    // ğŸ”§ FIX(2026-01-22): SVG ìš”ì†Œì˜ classNameì€ SVGAnimatedString ê°ì²´ì´ë¯€ë¡œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬
    const getClassName = function(el) {
        if (!el) return '';
        const cn = el.className;
        if (!cn) return '';
        // SVG ìš”ì†ŒëŠ” classNameì´ SVGAnimatedString ê°ì²´ (baseVal ì†ì„± ì‚¬ìš©)
        if (typeof cn === 'string') return cn;
        if (cn.baseVal !== undefined) return cn.baseVal;
        // classListê°€ ìˆëŠ” ê²½ìš°
        if (el.classList && el.classList.length > 0) return Array.from(el.classList).join(' ');
        return '';
    };
    
    const clickHandler = function(e) {
        if(!window.__bp_isMonitoring) return;
        
        const target = e.target;
        const tagName = target.tagName || 'UNKNOWN';
        const id = target.id ? '#' + target.id : '';
        
        // ì•ˆì „í•œ className ì¶”ì¶œ (SVG ìš”ì†Œ í˜¸í™˜)
        const classNameStr = getClassName(target);
        const className = classNameStr ? '.' + (classNameStr.split(' ')[0] || '') : '';
        
        const text = (target.textContent || '').substring(0, 30).trim();
        const onclick = target.getAttribute ? (target.getAttribute('onclick') || '') : '';
        
        const clickInfo = {
            time: getTime(),
            timestamp: Date.now(),
            element: tagName + id + className,
            text: text,
            onclick: onclick.substring(0, 100)
        };
        
        window.__bp_clickLog.push(clickInfo);
        window.__bp_lastClickTarget = clickInfo;
        
        window.__bp_log(`[${clickInfo.time}] ğŸ–±ï¸ ${clickInfo.element} "${text.substring(0,20)}"`, 'click');
        window.__bp_updateCount('__bp_clickCount', window.__bp_clickLog.length);
        
        const lastEl = document.getElementById('__bp_lastClick');
        if(lastEl) lastEl.textContent = clickInfo.element.substring(0, 15);
    };

    // 7. ì˜¤ë¥˜ ìº¡ì²˜ í•¸ë“¤ëŸ¬ë“¤
    const errorHandler = function(msg, url, line, col, error) {
        if(!window.__bp_isMonitoring) return originalOnerror ? originalOnerror(msg, url, line, col, error) : false;
        
        const errorInfo = {
            type: 'window.onerror',
            time: getTime(),
            timestamp: Date.now(),
            message: String(msg),
            url: url || '',
            line: line || 0,
            col: col || 0,
            stack: error && error.stack ? error.stack : '',
            lastClick: window.__bp_lastClickTarget ? { ...window.__bp_lastClickTarget } : null
        };
        
        window.__bp_capturedErrors.push(errorInfo);
        window.__bp_log(`[${errorInfo.time}] âŒ ERROR: ${errorInfo.message.substring(0,60)}...`, 'error');
        window.__bp_updateCount('__bp_capturedCount', window.__bp_capturedErrors.length);
        window.__bp_updateBadge();
        
        const lastEl = document.getElementById('__bp_lastError');
        if(lastEl) lastEl.textContent = errorInfo.message.substring(0, 15) + '...';
        
        return originalOnerror ? originalOnerror(msg, url, line, col, error) : false;
    };

    const rejectionHandler = function(e) {
        if(!window.__bp_isMonitoring) return originalOnunhandledrejection ? originalOnunhandledrejection(e) : undefined;
        
        const reason = e.reason || 'Unknown rejection';
        const errorInfo = {
            type: 'unhandledrejection',
            time: getTime(),
            timestamp: Date.now(),
            message: String(reason.message || reason),
            stack: reason.stack || '',
            lastClick: window.__bp_lastClickTarget ? { ...window.__bp_lastClickTarget } : null
        };
        
        window.__bp_capturedErrors.push(errorInfo);
        window.__bp_log(`[${errorInfo.time}] âŒ PROMISE: ${errorInfo.message.substring(0,60)}...`, 'error');
        window.__bp_updateCount('__bp_capturedCount', window.__bp_capturedErrors.length);
        window.__bp_updateBadge();
        
        return originalOnunhandledrejection ? originalOnunhandledrejection(e) : undefined;
    };

    const consoleErrorHandler = function(...args) {
        if(window.__bp_isMonitoring) {
            const msg = args.map(a => typeof a === 'object' ? JSON.stringify(a) : String(a)).join(' ');
            const errorInfo = {
                type: 'console.error',
                time: getTime(),
                timestamp: Date.now(),
                message: msg.substring(0, 500),
                lastClick: window.__bp_lastClickTarget ? { ...window.__bp_lastClickTarget } : null
            };
            
            window.__bp_capturedErrors.push(errorInfo);
            window.__bp_log(`[${errorInfo.time}] âŒ console.error: ${msg.substring(0,50)}...`, 'error');
            window.__bp_updateCount('__bp_capturedCount', window.__bp_capturedErrors.length);
            window.__bp_updateBadge();
        }
        originalConsoleError.apply(console, args);
    };

    // 8. ëª¨ë‹ˆí„°ë§ ì‹œì‘/ì¤‘ì§€
    window.__bp_startMonitor = function() {
        if(window.__bp_isMonitoring) {
            window.__bp_log('âš ï¸ ì´ë¯¸ ëª¨ë‹ˆí„°ë§ ì¤‘', 'warning');
            return;
        }
        
        window.__bp_isMonitoring = true;
        window.__bp_capturedErrors = [];
        window.__bp_clickLog = [];
        window.__bp_lastClickTarget = null;
        
        // í•¸ë“¤ëŸ¬ ë“±ë¡
        window.onerror = errorHandler;
        window.onunhandledrejection = rejectionHandler;
        console.error = consoleErrorHandler;
        document.addEventListener('click', clickHandler, true);
        
        // UI ì—…ë°ì´íŠ¸
        document.getElementById('__bp_monitorStatus').style.display = 'block';
        window.__bp_updateCheck('__bp_checkOnerror', true);
        window.__bp_updateCheck('__bp_checkConsoleErr', true);
        window.__bp_updateCheck('__bp_checkPromise', true);
        window.__bp_updateCheck('__bp_checkClick', true);
        window.__bp_updateCount('__bp_capturedCount', 0);
        window.__bp_updateCount('__bp_clickCount', 0);
        
        window.__bp_log('ğŸ”´ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ì‹œì‘!', 'header');
        window.__bp_log('ì´ì œ ë²„íŠ¼/ë©”ë‰´ë¥¼ í´ë¦­í•˜ì„¸ìš”. ì˜¤ë¥˜ ë°œìƒ ì‹œ ìë™ ìº¡ì²˜ë©ë‹ˆë‹¤.', 'info');
    };

    window.__bp_stopMonitor = function() {
        if(!window.__bp_isMonitoring) {
            window.__bp_log('âš ï¸ ëª¨ë‹ˆí„°ë§ ì¤‘ì´ ì•„ë‹˜', 'warning');
            return;
        }
        
        window.__bp_isMonitoring = false;
        
        // ë³µì›
        window.onerror = originalOnerror;
        window.onunhandledrejection = originalOnunhandledrejection;
        console.error = originalConsoleError;
        document.removeEventListener('click', clickHandler, true);
        
        // UI ì—…ë°ì´íŠ¸
        document.getElementById('__bp_monitorStatus').style.display = 'none';
        
        const errCount = window.__bp_capturedErrors.length;
        const clickCount = window.__bp_clickLog.length;
        window.__bp_log(`â¬› ëª¨ë‹ˆí„°ë§ ì¤‘ì§€ (ì˜¤ë¥˜: ${errCount}ê°œ, í´ë¦­: ${clickCount}ê°œ)`, 'header');
        
        if(errCount > 0) {
            window.__bp_log('ğŸ“‹ ìº¡ì²˜ëœ ì˜¤ë¥˜ë¥¼ CSV/JSONìœ¼ë¡œ ë‚´ë³´ë‚´ì„¸ìš”.', 'success');
        }
    };

    // 9. ì •ë¦¬ í•¨ìˆ˜
    window.__bp_cleanup = function() {
        window.__bp_stopMonitor();
        window.__bp_capturedErrors = [];
        window.__bp_clickLog = [];
    };

    window.__bp_clearResults = function() {
        document.getElementById('__bp_results').innerHTML = '// ì´ˆê¸°í™”ë¨';
        window.__bp_capturedErrors = [];
        window.__bp_clickLog = [];
        window.__bp_updateCount('__bp_capturedCount', 0);
        window.__bp_updateCount('__bp_clickCount', 0);
        window.__bp_updateBadge();
    };

    // 10. ê²°ê³¼ ë‚´ë³´ë‚´ê¸°
    window.__bp_exportCSV = function() {
        try {
            let csv = "\uFEFF";
            csv += "Time,Type,Message,LastClickElement,LastClickOnclick\n";
            
            window.__bp_capturedErrors.forEach(err => {
                const lastClick = err.lastClick || {};
                csv += `"${err.time}","${err.type}","${(err.message||'').replace(/"/g,'""')}","${lastClick.element||''}","${(lastClick.onclick||'').replace(/"/g,'""')}"\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = "console_errors_captured.csv";
            link.click();
            
            window.__bp_log('âœ… CSV ì €ì¥ ì™„ë£Œ', 'success');
        } catch(e) {
            window.__bp_log('âŒ CSV ì‹¤íŒ¨: ' + e.message, 'error');
        }
    };

    window.__bp_exportJSON = function() {
        try {
            const data = {
                capturedAt: new Date().toISOString(),
                errors: window.__bp_capturedErrors,
                clicks: window.__bp_clickLog
            };
            
            navigator.clipboard.writeText(JSON.stringify(data, null, 2)).then(() => {
                window.__bp_log('âœ… JSON í´ë¦½ë³´ë“œ ë³µì‚¬ ì™„ë£Œ', 'success');
            }).catch(err => {
                window.__bp_log('âŒ JSON ë³µì‚¬ ì‹¤íŒ¨: ' + err.message, 'error');
            });
        } catch(e) {
            window.__bp_log('âŒ JSON ë³µì‚¬ ì‹¤íŒ¨: ' + e.message, 'error');
        }
    };

    // ğŸ”§ NEW(2026-01-22): ì½˜ì†” ë‚´ìš©ì„ í´ë¦½ë³´ë“œì— ë³µì‚¬
    window.__bp_copyConsole = function() {
        try {
            const resultsDiv = document.getElementById('__bp_results');
            if (!resultsDiv) {
                window.__bp_log('âŒ ì½˜ì†” ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', 'error');
                return;
            }
            
            // ì½˜ì†” ë‚´ìš© ì¶”ì¶œ (í…ìŠ¤íŠ¸ë§Œ)
            const consoleText = resultsDiv.innerText;
            
            // í´ë¦½ë³´ë“œì— ë³µì‚¬
            navigator.clipboard.writeText(consoleText).then(() => {
                window.__bp_log('âœ… ì½˜ì†” ë‚´ìš© í´ë¦½ë³´ë“œ ë³µì‚¬ ì™„ë£Œ (' + consoleText.length + 'ì)', 'success');
            }).catch(err => {
                // í´ë¦½ë³´ë“œ API ì‹¤íŒ¨ ì‹œ ëŒ€ì²´ ë°©ë²• ì‚¬ìš©
                window.__bp_copyFallback(consoleText);
            });
        } catch(e) {
            window.__bp_log('âŒ ì½˜ì†” ë³µì‚¬ ì‹¤íŒ¨: ' + e.message, 'error');
        }
    };

    // í´ë¦½ë³´ë“œ API ì‹¤íŒ¨ ì‹œ ëŒ€ì²´ ë°©ë²•
    window.__bp_copyFallback = function(text) {
        try {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.position = 'fixed';
            textarea.style.left = '-9999px';
            textarea.style.top = '-9999px';
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            window.__bp_log('âœ… ì½˜ì†” ë‚´ìš© í´ë¦½ë³´ë“œ ë³µì‚¬ ì™„ë£Œ (ëŒ€ì²´ ë°©ë²•)', 'success');
        } catch(e) {
            window.__bp_log('âŒ í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨: ' + e.message, 'error');
        }
    };

    window.__bp_showCapturedErrors = function() {
        const modal = document.getElementById('__bp_modal');
        const content = document.getElementById('__bp_code_view');
        
        if(window.__bp_capturedErrors.length === 0) {
            content.innerHTML = '<span style="color:#94a3b8;">ìº¡ì²˜ëœ ì˜¤ë¥˜ê°€ ì—†ìŠµë‹ˆë‹¤.</span>';
        } else {
            let html = '';
            window.__bp_capturedErrors.forEach((err, i) => {
                const lastClick = err.lastClick || {};
                html += `<div style="margin-bottom:15px; padding:10px; background:#1e293b; border-radius:6px; border-left:3px solid #ef4444;">
                    <div style="color:#f87171; font-weight:bold;">[${i+1}] ${err.type} @ ${err.time}</div>
                    <div style="color:#fbbf24; margin:5px 0;">ğŸ“ ${escapeHtml(err.message)}</div>
                    ${lastClick.element ? `<div style="color:#38bdf8;">ğŸ–±ï¸ ì§ì „ í´ë¦­: ${escapeHtml(lastClick.element)} "${escapeHtml(lastClick.text||'')}"</div>` : ''}
                    ${lastClick.onclick ? `<div style="color:#a78bfa; font-size:11px;">onclick: ${escapeHtml(lastClick.onclick)}</div>` : ''}
                    ${err.stack ? `<div style="color:#64748b; font-size:10px; margin-top:5px; white-space:pre-wrap;">${escapeHtml(err.stack.substring(0,300))}</div>` : ''}
                </div>`;
            });
            content.innerHTML = html;
        }
        
        modal.style.display = 'flex';
    };

    // 11. ì •ì  ì§„ë‹¨ (ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€)
    window.__bp_runDiagnostic = function() {
        window.__bp_log('ğŸ”¬ ì •ì  ì§„ë‹¨ ì‹œì‘...', 'header');
        const html = document.documentElement.outerHTML;

        // [FIX] ì£¼ì„ ì œê±° í•¨ìˆ˜ (ë¶ë§ˆí¬ë¦¿ ë‚´ì¥ - ë³„ë„ ìŠ¤ì½”í”„)
        const removeComments = (source) => {
            const strPlaceholders = [];
            let result = source.replace(/(['"\`])(?:(?!\1|\\\\).|\\\\.)*/g, (m) => {
                strPlaceholders.push(m);
                return '__S' + (strPlaceholders.length - 1) + '__';
            });
            result = result.replace(/\/\/[^\\n]*/g, '').replace(/\/\*[\\s\\S]*?\*\//g, '');
            return result;
        };
        const codeOnly = removeComments(html);

        // ì•…ì„± íŒ¨í„´ ì²´í¬ (ì£¼ì„ ì œì™¸í•œ ì½”ë“œì—ì„œë§Œ)
        const patterns = [
            { regex: /DataManager\.getProjects\(\)/g, name: 'DataManager.getProjects()' },
            { regex: /querySelectorAll\s*\(\s*['"]\*['"]\s*\)/g, name: "querySelectorAll('*')" },
            { regex: /getComputedStyle/g, name: 'getComputedStyle' }
        ];

        patterns.forEach(p => {
            const matches = codeOnly.match(p.regex) || [];
            window.__bp_log(`${matches.length > 0 ? 'âš ï¸' : 'âœ…'} ${p.name}: ${matches.length}ê±´`, matches.length > 0 ? 'warning' : 'success');
        });

        // ë°ì´í„° ìƒíƒœ
        const hasProjectData = typeof window.projectData !== 'undefined';
        const hasAppStore = typeof window.AppStore !== 'undefined';
        window.__bp_log(`${hasProjectData ? 'âœ…' : 'âš ï¸'} projectData: ${hasProjectData ? 'ì¡´ì¬' : 'ì—†ìŒ'}`, hasProjectData ? 'success' : 'warning');
        window.__bp_log(`${hasAppStore ? 'âœ…' : 'âš ï¸'} AppStore: ${hasAppStore ? 'ì¡´ì¬' : 'ì—†ìŒ'}`, hasAppStore ? 'success' : 'warning');

        window.__bp_log('ğŸ ì •ì  ì§„ë‹¨ ì™„ë£Œ', 'header');
        window.__bp_log('ğŸ’¡ ë™ì  ì˜¤ë¥˜ ìº¡ì²˜ëŠ” "ëª¨ë‹ˆí„°ë§ ì‹œì‘" ë²„íŠ¼ì„ ì‚¬ìš©í•˜ì„¸ìš”.', 'info');
    };

    // 12. [v4.24] ë¹ ë¥¸ ì„±ëŠ¥ ì§„ë‹¨ (IntegrityEnhancementModule ìƒíƒœ í™•ì¸)
    window.__bp_runQuickPerf = function() {
        window.__bp_log('â”â”â” âš¡ ë¹ ë¥¸ ì„±ëŠ¥ ì§„ë‹¨ [v4.24] â”â”â”', 'header');
        window.__bp_log('â€» ê°€ì´ë“œë¼ì¸ ì„¹ì…˜ 7.2 ê¸°ë°˜ ëŸ°íƒ€ì„ ìƒíƒœ ì ê²€', 'info');

        let passed = 0, failed = 0, warnings = 0;

        // 1. DOM ë…¸ë“œ ê°œìˆ˜
        const domCount = document.querySelectorAll('*').length;
        const domOk = domCount < 15000;
        window.__bp_log(`ğŸ“Š DOM ë…¸ë“œ: ${domCount}ê°œ ${domOk ? 'âœ…' : 'âš ï¸ (15000+ ê²½ê³ )'}`, domOk ? 'success' : 'warning');
        if (domOk) passed++; else warnings++;

        // 2. projectData ê°œìˆ˜
        const pdCount = window.projectData?.length || window.AppStore?.projectData?.length || 0;
        const pdOk = pdCount > 0;
        window.__bp_log(`ğŸ“¦ projectData: ${pdCount}ê°œ ${pdOk ? 'âœ…' : 'âš ï¸ (ë°ì´í„° ë¯¸ë¡œë“œ)'}`, pdOk ? 'success' : 'warning');
        if (pdOk) passed++; else warnings++;

        // 3. ì§€ì—° ë Œë”ë§ ìƒíƒœ
        const lazyCount = document.querySelectorAll('[data-rendered="false"]').length;
        window.__bp_log(`ğŸ”„ ì§€ì—° ë Œë”ë§: ${lazyCount}ê°œ ëŒ€ê¸° ì¤‘`, 'success');
        passed++;

        // 4. pausableIntervals ì¡´ì¬ ì—¬ë¶€
        const pausableExists = !!window.TimerManager?.pausableIntervals;
        const pausableCount = window.TimerManager?.pausableIntervals?.size || 0;
        window.__bp_log(`â±ï¸ pausableIntervals: ${pausableExists ? pausableCount + 'ê°œ' : 'âŒ ë¯¸ì¡´ì¬'}`, pausableExists ? 'success' : 'error');
        if (pausableExists) passed++; else failed++;

        // 5. Observer ì´ ê°œìˆ˜
        const observerTotal = window.ObserverPool?.getAllStats?.()?.total || 0;
        const observerOk = observerTotal <= 10;
        window.__bp_log(`ğŸ‘ï¸ Observer ì´ê³„: ${observerTotal}ê°œ ${observerOk ? 'âœ…' : 'âš ï¸ (10+ ëˆ„ì )'}`, observerOk ? 'success' : 'warning');
        if (observerOk) passed++; else warnings++;

        // 6. createPausableInterval ì¡´ì¬
        const hasCreatePausable = !!window.TimerManager?.createPausableInterval;
        window.__bp_log(`ğŸ”§ createPausableInterval: ${hasCreatePausable ? 'âœ… ì¡´ì¬' : 'âŒ ë¯¸ì¡´ì¬'}`, hasCreatePausable ? 'success' : 'error');
        if (hasCreatePausable) passed++; else failed++;

        // 7. __preEmptiveCleanup ì¡´ì¬
        const hasPreEmptive = typeof window.__preEmptiveCleanup === 'function';
        window.__bp_log(`ğŸ§¹ __preEmptiveCleanup: ${hasPreEmptive ? 'âœ… ì¡´ì¬' : 'âš ï¸ ë¯¸ì¡´ì¬'}`, hasPreEmptive ? 'success' : 'warning');
        if (hasPreEmptive) passed++; else warnings++;

        // 8. FilterRenderManager ì¡´ì¬
        const hasFilterRender = !!window.FilterRenderManager;
        window.__bp_log(`ğŸ›ï¸ FilterRenderManager: ${hasFilterRender ? 'âœ… ì¡´ì¬' : 'âš ï¸ ë¯¸ì¡´ì¬'}`, hasFilterRender ? 'success' : 'warning');
        if (hasFilterRender) passed++; else warnings++;

        // 9. VisibilityCleanupController ì¡´ì¬
        const hasVisController = !!window.VisibilityCleanupController;
        window.__bp_log(`ğŸ‘ï¸ VisibilityCleanupController: ${hasVisController ? 'âœ… ì¡´ì¬' : 'âš ï¸ ë¯¸ì¡´ì¬'}`, hasVisController ? 'success' : 'warning');
        if (hasVisController) passed++; else warnings++;

        // ê²°ê³¼ ìš”ì•½
        window.__bp_log('â”â”â” âš¡ ì„±ëŠ¥ ì§„ë‹¨ ê²°ê³¼ â”â”â”', 'header');
        const totalOk = failed === 0 && warnings <= 2;
        window.__bp_log(`${totalOk ? 'âœ…' : 'âš ï¸'} í†µê³¼: ${passed}ê°œ | ì‹¤íŒ¨: ${failed}ê°œ | ê²½ê³ : ${warnings}ê°œ`, totalOk ? 'success' : 'warning');

        // ê¶Œì¥ ì¡°ì¹˜
        if (!pausableExists || !hasCreatePausable) {
            window.__bp_log('ğŸ”§ ê¶Œì¥ ì¡°ì¹˜:', 'warning');
            window.__bp_log('  â€¢ TimerManager í™•ì¥ ë¯¸ì ìš© â†’ IntegrityEnhancementModule ë¡œë“œ í™•ì¸', 'info');
        }
        if (!hasPreEmptive || !hasFilterRender) {
            window.__bp_log('  â€¢ v1.5/v1.7 ëª¨ë“ˆ ë¯¸ì ìš© â†’ HTML íŒŒì¼ ë¬´ê²°ì„± í™•ì¸', 'info');
        }
    };

    // 13. [v4.24] ì„±ëŠ¥ ì²´í¬ (DOM, ë©”ëª¨ë¦¬, íƒ€ì´ë°)
    window.__bp_runPerfCheck = function() {
        window.__bp_log('â”â”â” â±ï¸ ì„±ëŠ¥ ì²´í¬ â”â”â”', 'header');

        // DOM ë…¸ë“œ
        const domCount = document.querySelectorAll('*').length;
        window.__bp_log(`ğŸ“Š DOM ë…¸ë“œ: ${domCount}ê°œ ${domCount < 5000 ? 'âœ…' : domCount < 15000 ? 'âš ï¸' : 'âŒ'}`, domCount < 5000 ? 'success' : 'warning');

        // ë©”ëª¨ë¦¬ (Chrome ì „ìš©)
        if (performance.memory) {
            const used = (performance.memory.usedJSHeapSize / 1024 / 1024).toFixed(2);
            const total = (performance.memory.totalJSHeapSize / 1024 / 1024).toFixed(2);
            window.__bp_log(`ğŸ§  ë©”ëª¨ë¦¬: ${used}MB / ${total}MB ${used < 100 ? 'âœ…' : 'âš ï¸'}`, used < 100 ? 'success' : 'warning');
        } else {
            window.__bp_log('ğŸ§  ë©”ëª¨ë¦¬: ì¸¡ì • ë¶ˆê°€ (Chrome ì „ìš©)', 'warning');
        }

        // íƒ€ì´ë° (Navigation Timing API)
        const navEntry = performance.getEntriesByType('navigation')[0];
        if (navEntry) {
            window.__bp_log(`â±ï¸ DOM ë¡œë“œ: ${navEntry.domContentLoadedEventEnd.toFixed(0)}ms ${navEntry.domContentLoadedEventEnd < 3000 ? 'âœ…' : 'âš ï¸'}`, navEntry.domContentLoadedEventEnd < 3000 ? 'success' : 'warning');
            window.__bp_log(`â±ï¸ ì „ì²´ ë¡œë“œ: ${navEntry.loadEventEnd.toFixed(0)}ms ${navEntry.loadEventEnd < 5000 ? 'âœ…' : 'âš ï¸'}`, navEntry.loadEventEnd < 5000 ? 'success' : 'warning');
        }

        // FCP
        const paintEntries = performance.getEntriesByType('paint');
        paintEntries.forEach(e => {
            if (e.name === 'first-contentful-paint') {
                window.__bp_log(`ğŸ¨ FCP: ${e.startTime.toFixed(0)}ms ${e.startTime < 2000 ? 'âœ…' : 'âš ï¸'}`, e.startTime < 2000 ? 'success' : 'warning');
            }
        });

        // ì´ë²¤íŠ¸ ë£¨í”„ ì§€ì—°
        const start = performance.now();
        setTimeout(() => {
            const lag = performance.now() - start;
            window.__bp_log(`ğŸ”„ ì´ë²¤íŠ¸ ë£¨í”„ ì§€ì—°: ${lag.toFixed(1)}ms ${lag < 50 ? 'âœ…' : 'âš ï¸'}`, lag < 50 ? 'success' : 'warning');
        }, 0);

        window.__bp_log('âœ… ì„±ëŠ¥ ì²´í¬ ì™„ë£Œ', 'success');
    };

    // 14. [v4.24] íŒ¨í„´ ê²€ì¦ (ì•…ì„± íŒ¨í„´)
    window.__bp_runPatternCheck = function() {
        window.__bp_log('â”â”â” ğŸ› ì•…ì„± íŒ¨í„´ ê²€ì¦ â”â”â”', 'header');

        const html = document.documentElement.outerHTML;

        // í•¨ìˆ˜ ê°œìˆ˜ (ê°„ëµ ì²´í¬)
        const funcMatches = html.split('function ').length - 1;
        window.__bp_log('ğŸ”§ function í‚¤ì›Œë“œ: ' + funcMatches + 'ê°œ', 'info');

        // let/const ì‚¬ìš©
        const letCount = html.split('let ').length - 1;
        const constCount = html.split('const ').length - 1;
        window.__bp_log('ğŸ‘» ë³€ìˆ˜ ì„ ì–¸: let=' + letCount + ', const=' + constCount, 'info');

        // async/try-catch ë¹„ìœ¨
        const asyncCount = html.split('async ').length - 1;
        const tryCount = html.split('try {').length + html.split('try{').length - 2;
        window.__bp_log('ğŸª¤ async: ' + asyncCount + 'ê°œ, try: ' + tryCount + 'ê°œ', asyncCount > tryCount * 3 ? 'warning' : 'success');

        // API íŒ¨í„´
        const qsaStar = html.split("querySelectorAll('*')").length + html.split('querySelectorAll("*")').length - 2;
        window.__bp_log('ğŸ” querySelectorAll("*"): ' + (qsaStar > 0 ? 'âš ï¸ ' + qsaStar + 'ê±´' : 'âœ… ì—†ìŒ'), qsaStar > 0 ? 'warning' : 'success');

        const getProjects = html.split('DataManager.getProjects()').length - 1;
        window.__bp_log('ğŸ“¦ DataManager.getProjects(): ' + getProjects + 'ê±´', getProjects > 15 ? 'warning' : 'success');

        const computedStyle = html.split('getComputedStyle').length - 1;
        window.__bp_log('ğŸ¨ getComputedStyle: ' + computedStyle + 'ê±´', computedStyle > 30 ? 'warning' : 'success');

        // setInterval/clearInterval ë¹„ìœ¨
        const setInt = html.split('setInterval').length - 1;
        const clearInt = html.split('clearInterval').length - 1;
        window.__bp_log('â±ï¸ setInterval: ' + setInt + ', clearInterval: ' + clearInt, setInt > clearInt * 2 ? 'warning' : 'success');

        window.__bp_log('âœ… íŒ¨í„´ ê²€ì¦ ì™„ë£Œ', 'success');
    };

    // 15. [v4.24] ìœ íœ´ ë³µê·€ ì•ˆì •ì„± ì§„ë‹¨ (v1.7)
    window.__bp_runIdleRecovery = function() {
        window.__bp_log('â”â”â” ğŸ”„ ìœ íœ´ ë³µê·€ ì•ˆì •ì„± [v1.7] â”â”â”', 'header');
        window.__bp_log('â€» 30ì´ˆ+ ìœ íœ´ í›„ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ ì§„ë‹¨', 'info');

        let passed = 0, failed = 0;

        // 1. __preEmptiveCleanup ì¡´ì¬
        const hasPreEmptive = typeof window.__preEmptiveCleanup === 'function';
        window.__bp_log(`ğŸ§¹ __preEmptiveCleanup: ${hasPreEmptive ? 'âœ… ì¡´ì¬' : 'âŒ ë¯¸ì¡´ì¬'}`, hasPreEmptive ? 'success' : 'error');
        if (hasPreEmptive) passed++; else failed++;

        // 2. VisibilityCleanupController ì¡´ì¬
        const hasVisController = !!window.VisibilityCleanupController;
        window.__bp_log(`ğŸ‘ï¸ VisibilityCleanupController: ${hasVisController ? 'âœ… ì¡´ì¬' : 'âŒ ë¯¸ì¡´ì¬'}`, hasVisController ? 'success' : 'error');
        if (hasVisController) passed++; else failed++;

        // 3. VisibilityCleanupController.preEmptiveCleanup ë©”ì„œë“œ
        const hasPreEmptiveMethod = !!window.VisibilityCleanupController?.preEmptiveCleanup;
        window.__bp_log(`ğŸ”§ preEmptiveCleanup ë©”ì„œë“œ: ${hasPreEmptiveMethod ? 'âœ… ì¡´ì¬' : 'âŒ ë¯¸ì¡´ì¬'}`, hasPreEmptiveMethod ? 'success' : 'error');
        if (hasPreEmptiveMethod) passed++; else failed++;

        // 4. TimerManager.pauseAll/resumeAll
        const hasPauseAll = !!window.TimerManager?.pauseAll;
        const hasResumeAll = !!window.TimerManager?.resumeAll;
        window.__bp_log(`â¸ï¸ TimerManager.pauseAll: ${hasPauseAll ? 'âœ…' : 'âŒ'}`, hasPauseAll ? 'success' : 'error');
        window.__bp_log(`â–¶ï¸ TimerManager.resumeAll: ${hasResumeAll ? 'âœ…' : 'âŒ'}`, hasResumeAll ? 'success' : 'error');
        if (hasPauseAll) passed++; else failed++;
        if (hasResumeAll) passed++; else failed++;

        // 5. Observer ëˆ„ì  ìƒíƒœ
        const observerTotal = window.ObserverPool?.getAllStats?.()?.total || 0;
        const observerOk = observerTotal <= 10;
        window.__bp_log(`ğŸ‘ï¸ Observer ëˆ„ì : ${observerTotal}ê°œ ${observerOk ? 'âœ… (â‰¤10)' : 'âš ï¸ (>10)'}`, observerOk ? 'success' : 'warning');
        if (observerOk) passed++; else failed++;

        // ê²°ê³¼
        window.__bp_log('â”â”â” ê²°ê³¼ â”â”â”', 'header');
        const ready = failed === 0;
        window.__bp_log(`${ready ? 'âœ…' : 'âŒ'} ìœ íœ´ ë³µê·€ ì¤€ë¹„: ${passed}/${passed + failed} (${ready ? 'ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥' : 'ê°œì„  í•„ìš”'})`, ready ? 'success' : 'error');
    };

    // 16. [v4.24] ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì§„ë‹¨ (v1.8)
    window.__bp_runMemoryLeak = function() {
        window.__bp_log('â”â”â” ğŸ§  ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì§„ë‹¨ [v1.8] â”â”â”', 'header');
        window.__bp_log('â€» ìœ íœ´ ë³µê·€ ì‹œ ë²„ë²…ê±°ë¦¼ ì›ì¸ ë¶„ì„', 'info');

        let warnings = 0;

        // 1. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ (Chrome ì „ìš©)
        if (performance.memory) {
            const used = performance.memory.usedJSHeapSize / 1024 / 1024;
            const limit = performance.memory.jsHeapSizeLimit / 1024 / 1024;
            const ratio = (used / limit * 100).toFixed(1);
            window.__bp_log(`ğŸ“Š Heap ì‚¬ìš©ëŸ‰: ${used.toFixed(1)}MB / ${limit.toFixed(0)}MB (${ratio}%)`, used < 200 ? 'success' : 'warning');
            if (used >= 200) warnings++;
        } else {
            window.__bp_log('ğŸ“Š Heap ì¸¡ì • ë¶ˆê°€ (Chrome ì „ìš©)', 'warning');
        }

        // 2. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ì • (getEventListeners ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ DOM ê¸°ë°˜ ì¶”ì •)
        const elementsWithEvents = document.querySelectorAll('[onclick], [onchange], [onkeyup], [onkeydown], [onmouseover]').length;
        window.__bp_log(`ğŸ¯ ì¸ë¼ì¸ ì´ë²¤íŠ¸ ìš”ì†Œ: ${elementsWithEvents}ê°œ ${elementsWithEvents < 100 ? 'âœ…' : 'âš ï¸'}`, elementsWithEvents < 100 ? 'success' : 'warning');
        if (elementsWithEvents >= 100) warnings++;

        // 3. íƒ€ì´ë¨¸ ìƒíƒœ
        const tmExists = !!window.TimerManager;
        const intervals = window.TimerManager?.intervals?.size || 0;
        const timers = window.TimerManager?.timers?.size || 0;
        const pausable = window.TimerManager?.pausableIntervals?.size || 0;
        window.__bp_log(`â±ï¸ í™œì„± íƒ€ì´ë¨¸: intervals=${intervals}, timers=${timers}, pausable=${pausable}`, intervals < 10 ? 'success' : 'warning');
        if (intervals >= 10) warnings++;

        // 4. Observer ìƒíƒœ
        const observerTotal = window.ObserverPool?.getAllStats?.()?.total || 0;
        window.__bp_log(`ğŸ‘ï¸ Observer ì´ê³„: ${observerTotal}ê°œ ${observerTotal <= 10 ? 'âœ…' : 'âš ï¸'}`, observerTotal <= 10 ? 'success' : 'warning');
        if (observerTotal > 10) warnings++;

        // 5. WeakMap ì‚¬ìš© ì—¬ë¶€
        const hasWeakMap = !!window.EventHub?._handlerWeakMap;
        window.__bp_log(`ğŸ”— EventHub WeakMap: ${hasWeakMap ? 'âœ… ì‚¬ìš© ì¤‘' : 'âš ï¸ ë¯¸ì‚¬ìš©'}`, hasWeakMap ? 'success' : 'warning');
        if (!hasWeakMap) warnings++;

        // 6. Detached DOM ì¶”ì • (MutationObserver íƒ€ê²Ÿ ì²´í¬)
        let detachedCount = 0;
        if (window.ObserverPool?.perElementObservers) {
            window.ObserverPool.perElementObservers.forEach((entry) => {
                if (entry.target && !document.contains(entry.target)) detachedCount++;
            });
        }
        window.__bp_log(`ğŸ—‘ï¸ Detached Observer íƒ€ê²Ÿ: ${detachedCount}ê°œ ${detachedCount === 0 ? 'âœ…' : 'âš ï¸'}`, detachedCount === 0 ? 'success' : 'warning');
        if (detachedCount > 0) warnings++;

        // ê²°ê³¼
        window.__bp_log('â”â”â” ê²°ê³¼ â”â”â”', 'header');
        const risk = warnings >= 3 ? 'ë†’ìŒ' : warnings >= 1 ? 'ì¤‘ê°„' : 'ë‚®ìŒ';
        const color = warnings >= 3 ? 'error' : warnings >= 1 ? 'warning' : 'success';
        window.__bp_log(`ğŸ“‹ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ìœ„í—˜ë„: ${risk} (ê²½ê³  ${warnings}ê°œ)`, color);
    };

    // 17. [v4.24] TimerManager ì—°ë™ ì§„ë‹¨ (v1.8)
    window.__bp_runTimerV18 = function() {
        window.__bp_log('â”â”â” â±ï¸ TimerManager ì—°ë™ [v1.8] â”â”â”', 'header');
        window.__bp_log('â€» ìœ íœ´ ì‹œ ìë™ ì •ì§€ë˜ëŠ” íƒ€ì´ë¨¸ ë“±ë¡ í™•ì¸', 'info');

        const tmExists = !!window.TimerManager;
        const hasCreatePausable = !!window.TimerManager?.createPausableInterval;
        const pausableMap = window.TimerManager?.pausableIntervals;

        window.__bp_log(`ğŸ”§ TimerManager: ${tmExists ? 'âœ… ì¡´ì¬' : 'âŒ ë¯¸ì¡´ì¬'}`, tmExists ? 'success' : 'error');
        window.__bp_log(`ğŸ”§ createPausableInterval: ${hasCreatePausable ? 'âœ… ì¡´ì¬' : 'âŒ ë¯¸ì¡´ì¬'}`, hasCreatePausable ? 'success' : 'error');
        window.__bp_log(`ğŸ”§ pausableIntervals Map: ${pausableMap ? 'âœ… ì¡´ì¬' : 'âŒ ë¯¸ì¡´ì¬'}`, pausableMap ? 'success' : 'error');

        if (pausableMap && pausableMap.size > 0) {
            window.__bp_log(`ğŸ“‹ ë“±ë¡ëœ Pausable íƒ€ì´ë¨¸ (${pausableMap.size}ê°œ):`, 'info');
            pausableMap.forEach((entry, name) => {
                const status = entry.paused ? 'â¸ï¸ ì¼ì‹œì •ì§€' : 'â–¶ï¸ ì‹¤í–‰ ì¤‘';
                window.__bp_log(`  â€¢ ${name}: ${status} (${entry.delay}ms)`, 'info');
            });
        } else {
            window.__bp_log('âš ï¸ ë“±ë¡ëœ Pausable íƒ€ì´ë¨¸ ì—†ìŒ', 'warning');
        }

        // í•„ìˆ˜ íƒ€ì´ë¨¸ ì²´í¬
        const requiredTimers = ['settlement-monitor', 'workdate-btn-observer', 'pending-work-checker', 'gantt-today-marker', 'v17-stale-cleanup'];
        window.__bp_log('â”â”â” í•„ìˆ˜ íƒ€ì´ë¨¸ í™•ì¸ â”â”â”', 'header');

        let registered = 0;
        requiredTimers.forEach(name => {
            const exists = pausableMap?.has(name);
            window.__bp_log(`  ${exists ? 'âœ…' : 'âŒ'} ${name}`, exists ? 'success' : 'warning');
            if (exists) registered++;
        });

        window.__bp_log('â”â”â” ê²°ê³¼ â”â”â”', 'header');
        const ready = hasCreatePausable && registered >= 3;
        window.__bp_log(`${ready ? 'âœ…' : 'âš ï¸'} v1.8 ì¤€ë¹„ ìƒíƒœ: ${registered}/${requiredTimers.length} íƒ€ì´ë¨¸ ë“±ë¡`, ready ? 'success' : 'warning');
    };

    // 18. UI ì œì–´ í•¨ìˆ˜ (ì ‘ê¸°/í´ê¸°, ìœ„ì¹˜ ì „í™˜, ë“œë˜ê·¸)
    window.__bp_isMinimized = false;
    window.__bp_positionLeft = false;

    window.__bp_toggleMinimize = function() {
        const root = document.getElementById('__bp_root');
        const minBtn = document.getElementById('__bp_minBtn');
        if (!root) return;
        
        window.__bp_isMinimized = !window.__bp_isMinimized;
        if (window.__bp_isMinimized) {
            root.classList.add('minimized');
            if (minBtn) minBtn.textContent = 'â•';
        } else {
            root.classList.remove('minimized');
            if (minBtn) minBtn.textContent = 'â–';
        }
    };

    window.__bp_togglePosition = function() {
        const root = document.getElementById('__bp_root');
        if (!root) return;
        
        window.__bp_positionLeft = !window.__bp_positionLeft;
        if (window.__bp_positionLeft) {
            root.style.right = 'auto';
            root.style.left = '20px';
        } else {
            root.style.left = 'auto';
            root.style.right = '20px';
        }
    };

    // ë“œë˜ê·¸ ì´ë™ ê¸°ëŠ¥
    (function initDrag() {
        const root = document.getElementById('__bp_root');
        const handle = document.getElementById('__bp_dragHandle');
        if (!root || !handle) return;

        let isDragging = false;
        let offsetX = 0;
        let offsetY = 0;

        handle.addEventListener('mousedown', (e) => {
            if (e.target.tagName === 'BUTTON') return;
            isDragging = true;
            offsetX = e.clientX - root.offsetLeft;
            offsetY = e.clientY - root.offsetTop;
            root.style.transition = 'none';
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            e.preventDefault();
            let newX = e.clientX - offsetX;
            let newY = e.clientY - offsetY;
            
            // í™”ë©´ ê²½ê³„ ì œí•œ
            newX = Math.max(0, Math.min(newX, window.innerWidth - root.offsetWidth));
            newY = Math.max(0, Math.min(newY, window.innerHeight - root.offsetHeight));
            
            root.style.left = newX + 'px';
            root.style.top = newY + 'px';
            root.style.right = 'auto';
            root.style.bottom = 'auto';
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
            root.style.transition = 'width 0.3s, height 0.3s';
        });
    })();

    console.log('âœ… í”„ë¡œíŒŒì¼ëŸ¬ v2.1 (ë™ì  ì˜¤ë¥˜ ìº¡ì²˜) ë¡œë“œë¨');
})();
    </script>

    <!-- ============================================================
         [v4.24] ë¼ì´ë¸Œ ë°ëª¨ìš© ê¸°ë³¸ ëª¨ë“ˆ + IntegrityEnhancementModule
         ì§„ë‹¨ ë‹¨ë… íŒŒì¼ì—ì„œ "ë¼ì´ë¸Œ ë°ëª¨" ì‹¤í–‰ ì‹œ í•„ìš”í•œ ëª¨ë“ˆë“¤
         ============================================================ -->
    <script>
        (function LiveDemoBaseModules() {
            'use strict';

            // 1. TimerManager ê¸°ë³¸ êµ¬ì¡°
            if (!window.TimerManager) {
                window.TimerManager = {
                    __installed: true,
                    timers: new Set(),
                    intervals: new Set(),
                    setTimeout: function(fn, delay) {
                        const id = window.setTimeout(() => {
                            this.timers.delete(id);
                            fn();
                        }, delay);
                        this.timers.add(id);
                        return id;
                    },
                    setInterval: function(fn, delay) {
                        const id = window.setInterval(fn, delay);
                        this.intervals.add(id);
                        return id;
                    },
                    clearTimeout: function(id) {
                        window.clearTimeout(id);
                        this.timers.delete(id);
                    },
                    clearInterval: function(id) {
                        window.clearInterval(id);
                        this.intervals.delete(id);
                    },
                    clearAll: function() {
                        this.timers.forEach(id => window.clearTimeout(id));
                        this.intervals.forEach(id => window.clearInterval(id));
                        this.timers.clear();
                        this.intervals.clear();
                    }
                };
            }

            // 2. ObserverPool ê¸°ë³¸ êµ¬ì¡°
            if (!window.ObserverPool) {
                window.ObserverPool = {
                    shared: null,
                    callbacks: new Map(),
                    init: function() {
                        this.shared = new MutationObserver((mutations) => {
                            this.callbacks.forEach(cb => cb(mutations));
                        });
                        if (document.body) {
                            this.shared.observe(document.body, { childList: true, subtree: true, attributes: true });
                        }
                    },
                    subscribe: function(id, callback) {
                        if (!this.shared) this.init();
                        this.callbacks.set(id, callback);
                    },
                    unsubscribe: function(id) {
                        this.callbacks.delete(id);
                    }
                };
            }

            console.log('[LiveDemo] âœ“ Base modules initialized');
        })();
    </script>

    <script>
        (function IntegrityEnhancementModule() {
            'use strict';

            console.log('%c [v1.5] INTEGRITY ENHANCEMENT MODULE (LiveDemo) ',
                'background: #7c3aed; color: #fff; font-size: 14px;');

            // 1. TimerManager í™•ì¥: Page Visibility ì—°ë™
            if (window.TimerManager) {
                const TM = window.TimerManager;
                TM.pausableIntervals = new Map();

                TM.createPausableInterval = function(name, fn, delay) {
                    if (this.pausableIntervals.has(name)) {
                        this.clearPausableInterval(name);
                    }
                    const entry = { fn, delay, id: null, paused: document.hidden };
                    if (!document.hidden) {
                        entry.id = window.setInterval(fn, delay);
                    }
                    this.pausableIntervals.set(name, entry);
                    return name;
                };

                TM.clearPausableInterval = function(name) {
                    const entry = this.pausableIntervals.get(name);
                    if (entry?.id) window.clearInterval(entry.id);
                    this.pausableIntervals.delete(name);
                };

                TM.pauseAll = function() {
                    this.pausableIntervals.forEach((entry) => {
                        if (entry.id) {
                            window.clearInterval(entry.id);
                            entry.id = null;
                            entry.paused = true;
                        }
                    });
                };

                TM.resumeAll = function() {
                    this.pausableIntervals.forEach((entry) => {
                        if (entry.paused && !entry.id) {
                            entry.id = window.setInterval(entry.fn, entry.delay);
                            entry.paused = false;
                        }
                    });
                };

                document.addEventListener('visibilitychange', () => {
                    if (document.hidden) {
                        TM.pauseAll();
                        if (typeof window.__preEmptiveCleanup === 'function') {
                            try { window.__preEmptiveCleanup(); } catch(e) {}
                        }
                    } else {
                        TM.resumeAll();
                    }
                });

                console.log('[v1.5] âœ“ TimerManager extended');
            }

            // 2. ObserverPool í™•ì¥
            if (window.ObserverPool) {
                const OP = window.ObserverPool;
                OP.perElementObservers = new Map();

                OP.registerPerElement = function(id, observer, target, options) {
                    if (!id || !observer || !target) return null;
                    if (this.perElementObservers.has(id)) {
                        this.unregisterPerElement(id);
                    }
                    observer.observe(target, options);
                    this.perElementObservers.set(id, { observer, target });
                    return id;
                };

                OP.unregisterPerElement = function(id) {
                    const entry = this.perElementObservers.get(id);
                    if (entry) {
                        entry.observer.disconnect();
                        this.perElementObservers.delete(id);
                    }
                };

                OP.unregisterByPrefix = function(prefix) {
                    let count = 0;
                    this.perElementObservers.forEach((_, id) => {
                        if (id.startsWith(prefix)) {
                            this.unregisterPerElement(id);
                            count++;
                        }
                    });
                    return count;
                };

                OP.getPerElementStats = function() {
                    return { count: this.perElementObservers.size };
                };

                OP.allObservers = new Map();
                OP.registerAll = function(id, observer, target, options) {
                    if (!id || !observer || !target) return null;
                    if (this.allObservers.has(id)) {
                        const old = this.allObservers.get(id);
                        old.observer.disconnect();
                    }
                    observer.observe(target, options);
                    this.allObservers.set(id, { observer, target, created: Date.now() });
                    return id;
                };

                OP.getAllStats = function() {
                    const stats = { total: 0 };
                    this.allObservers.forEach((_, id) => {
                        const prefix = id.split('-')[0] || 'other';
                        stats[prefix] = (stats[prefix] || 0) + 1;
                        stats.total++;
                    });
                    this.perElementObservers.forEach((_, id) => {
                        const prefix = id.split('-')[0] || 'other';
                        stats[prefix] = (stats[prefix] || 0) + 1;
                        stats.total++;
                    });
                    return stats;
                };

                OP.cleanupStale = function() {
                    let count = 0;
                    this.allObservers.forEach((entry, id) => {
                        if (!document.contains(entry.target)) {
                            entry.observer.disconnect();
                            this.allObservers.delete(id);
                            count++;
                        }
                    });
                    return count;
                };

                console.log('[v1.5] âœ“ ObserverPool extended');
            }

            // 3. FilterRenderManager
            window.FilterRenderManager = {
                _pendingRAF: null,
                _lastRenderTime: 0,
                _MIN_GAP_MS: 32,
                _isRendering: false,

                scheduleRender: function(options) {
                    options = options || {};
                    if (this._isRendering && !options.force) return;
                    if (this._pendingRAF) {
                        cancelAnimationFrame(this._pendingRAF);
                        this._pendingRAF = null;
                    }
                    this._pendingRAF = requestAnimationFrame(this._doRender.bind(this));
                },

                _doRender: function() {
                    this._isRendering = true;
                    try {
                        this._lastRenderTime = performance.now();
                        this._pendingRAF = null;
                        if (typeof window.render === 'function') {
                            window.render(true);
                        }
                    } finally {
                        this._isRendering = false;
                    }
                }
            };

            console.log('[v1.5] âœ“ FilterRenderManager installed');

            // 4. FilterElementCache
            window.FilterElementCache = {
                _cache: null,
                _cacheTime: 0,
                _TTL: 5000,

                get: function(key) {
                    if (!key) return null;
                    if (!this._cache || Date.now() - this._cacheTime > this._TTL) {
                        this._rebuild();
                    }
                    return this._cache?.[key] || null;
                },

                _rebuild: function() {
                    this._cache = {};
                    this._cacheTime = Date.now();
                },

                invalidate: function() {
                    this._cache = null;
                    this._cacheTime = 0;
                }
            };

            console.log('[v1.5] âœ“ FilterElementCache installed');

            console.log('[v1.5] âœ“ IntegrityEnhancementModule complete (LiveDemo)');
        })();
    </script>

    <script>
        (function IntegrityEnhancementModuleV17() {
            'use strict';

            console.log('%c [v1.7] INTEGRITY ENHANCEMENT MODULE (Pre-emptive Cleanup) ',
                'background: #059669; color: #fff; font-size: 14px;');

            // VisibilityCleanupController + __preEmptiveCleanup
            (function() {
                let lastActiveTime = Date.now();

                function preEmptiveCleanup() {
                    try {
                        if (window.FilterRenderManager) {
                            window.FilterRenderManager._isRendering = false;
                            if (window.FilterRenderManager._pendingRAF) {
                                cancelAnimationFrame(window.FilterRenderManager._pendingRAF);
                                window.FilterRenderManager._pendingRAF = null;
                            }
                        }

                        if (window.FilterElementCache?.invalidate) {
                            window.FilterElementCache.invalidate();
                        }

                        if (window.ObserverPool?.cleanupStale) {
                            window.ObserverPool.cleanupStale();
                        }

                        console.log('[v1.7] âœ“ Pre-emptive cleanup done');
                    } catch(e) {
                        console.warn('[v1.7] Pre-emptive cleanup error:', e);
                    }
                }

                window.__preEmptiveCleanup = preEmptiveCleanup;

                window.VisibilityCleanupController = {
                    lastActiveTime: lastActiveTime,
                    getIdleTime: function() { return Date.now() - lastActiveTime; },
                    forceCleanup: preEmptiveCleanup,
                    preEmptiveCleanup: preEmptiveCleanup
                };

                document.addEventListener('visibilitychange', () => {
                    if (document.hidden) {
                        lastActiveTime = Date.now();
                        window.VisibilityCleanupController.lastActiveTime = lastActiveTime;
                    } else {
                        const idleTime = Date.now() - lastActiveTime;
                        console.log('[v1.7] â–¶ Instant resume after', Math.round(idleTime/1000), 'sec');
                        lastActiveTime = Date.now();
                        window.VisibilityCleanupController.lastActiveTime = lastActiveTime;
                    }
                });

                console.log('[v1.7] âœ“ VisibilityCleanupController installed');
            })();

            // ì£¼ê¸°ì  Stale ì •ë¦¬
            if (window.TimerManager?.createPausableInterval && window.ObserverPool?.cleanupStale) {
                window.TimerManager.createPausableInterval('v17-stale-cleanup', () => {
                    if (document.hidden) return;
                    const stats = window.ObserverPool.getAllStats?.() || {};
                    if (stats.total > 10) {
                        console.log('[v1.7] Periodic cleanup, observers:', stats.total);
                        window.ObserverPool.cleanupStale();
                    }
                }, 60000);

                console.log('[v1.7] âœ“ Periodic stale cleanup scheduled');
            }

            console.log('[v1.7] âœ“ IntegrityEnhancementModuleV17 complete (LiveDemo)');
        })();
    </script>

    <script>
        // ë¶ë§ˆí¬ë¦¿ ì½”ë“œ ìƒì„± í•¨ìˆ˜
        function getBookmarkletCode() {
            const el = document.getElementById('profilerScript_v2');
            if (!el) return null;

            let profilerScript = el.textContent;

            // ê°„ë‹¨í•œ ì£¼ì„ ì œê±° (ì„ íƒì )
            profilerScript = profilerScript.replace(/^\s*\/\/.*$/gm, '');

            // ì¤‘ìš”: encodeURIComponentëŠ” ì‹±ê¸€ ì¿¼íŠ¸(')ë¥¼ ì¸ì½”ë”©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ìˆ˜ë™ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•¨
            // ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ s.text=decodeURIComponent('...') êµ¬ë¬¸ì—ì„œ ë¬¸ìì—´ì´ ê¹¨ì§
            // [Fix] ë¸Œë¼ìš°ì € ì£¼ì†Œì°½ì—ì„œ % ë¬¸ìê°€ ë””ì½”ë”©ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ %ë¥¼ %25ë¡œ ì´ì¤‘ ì¸ì½”ë”©í•´ì•¼ í•¨
            const encoded = encodeURIComponent(profilerScript).replace(/'/g, '%27').replace(/%/g, '%25');

            return `javascript:(function(){var s=document.createElement('script');s.text=decodeURIComponent('${encoded}');document.body.appendChild(s);})();`;
        }

        // ì´ˆê¸°í™”: ë“œë˜ê·¸ ê°€ëŠ¥í•œ ë§í¬ì— ì½”ë“œ ì„¤ì •
        document.addEventListener('DOMContentLoaded', () => {
            const code = getBookmarkletCode();
            const link = document.getElementById('bookmarkletLink');
            if (code && link) {
                link.href = code;
            }
        });

        function copyBookmarklet() {
            const bookmarkletCode = getBookmarkletCode();
            if (!bookmarkletCode) {
                console.warn('í”„ë¡œíŒŒì¼ëŸ¬ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            navigator.clipboard.writeText(bookmarkletCode).then(() => {
                const notification = document.getElementById('copyNotification');
                notification.style.display = 'block';
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 3000);
            }).catch(err => {
                alert('ë³µì‚¬ ì‹¤íŒ¨: ' + err);
            });
        }

        // ============ ë¡œê¹… ë° ìœ í‹¸ë¦¬í‹° (ê°œì„ ë¨) ============

        // HTML ì´ìŠ¤ì¼€ì´í”„ ìœ í‹¸ë¦¬í‹°
        function escapeHtml(unsafe) {
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        // ë¼ì¸ ë²ˆí˜¸ ì°¾ê¸° ìœ í‹¸ë¦¬í‹°
        function findLineNumber(source, index) {
            if (!source || index < 0) return 1;
            return source.substring(0, index).split('\n').length;
        }

        // ì£¼ë³€ ì½”ë“œ ì¶”ì¶œ ìœ í‹¸ë¦¬í‹°
        function getCodeContext(source, line) {
            if (!source) return '';
            const lines = source.split('\n');
            const start = Math.max(0, line - 6);
            const end = Math.min(lines.length, line + 5);
            return lines.slice(start, end).join('\n');
        }

        // ì½”ë“œ ë·°ì–´ í˜¸ì¶œ
        function showCodeSnippet(line, context) {
            const modal = document.getElementById('codeSnippetModal');
            const content = document.getElementById('codeViewerContent');
            const lineInfo = document.getElementById('codeModalLineInfo');

            if (modal && content) {
                content.innerHTML = ''; // ì´ˆê¸°í™”
                lineInfo.textContent = `Line ${line}`;

                const startLine = Math.max(1, line - 5);
                const codeLines = context.split('\n');

                codeLines.forEach((text, index) => {
                    const currentLineNum = startLine + index;
                    const isErrorLine = currentLineNum === line;

                    const row = document.createElement('div');
                    row.className = 'code-line' + (isErrorLine ? ' error-line' : '');

                    const numSpan = document.createElement('div');
                    numSpan.className = 'line-number';
                    numSpan.textContent = currentLineNum;

                    const codeSpan = document.createElement('div');
                    codeSpan.className = 'line-content';
                    codeSpan.textContent = text;
                    if (isErrorLine) codeSpan.style.fontWeight = 'bold';

                    row.appendChild(numSpan);
                    row.appendChild(codeSpan);
                    content.appendChild(row);
                });

                modal.style.display = 'flex';
            }
        }

        // ê°œì„ ëœ ë¡œê¹… í•¨ìˆ˜ (ì•¡ì…˜ ë²„íŠ¼ ì§€ì›)
        function logToResults(message, type = 'info', action = null) {
            const resultsDiv = document.getElementById('demoResults');
            if (resultsDiv) {
                const colors = {
                    info: '#e2e8f0',
                    success: '#10b981',
                    warning: '#f59e0b',
                    error: '#ef4444',
                    header: '#f8fafc'
                };

                const msgDiv = document.createElement('div');
                msgDiv.style.marginBottom = '8px';
                msgDiv.style.lineHeight = '1.5';

                if (type === 'header') {
                    msgDiv.style.fontWeight = 'bold';
                    msgDiv.style.color = colors[type];
                    msgDiv.style.borderBottom = '1px solid #334155';
                    msgDiv.style.paddingBottom = '5px';
                    msgDiv.style.marginTop = '15px';
                    msgDiv.textContent = message;
                } else {
                    const icon = type === 'success' ? 'âœ… ' : type === 'warning' ? 'âš ï¸ ' : type === 'error' ? 'âŒ ' : 'â„¹ï¸ ';
                    msgDiv.style.color = colors[type];
                    msgDiv.innerHTML = `<span style="margin-right:5px">${icon}</span>${escapeHtml(message)}`;

                    // ì•¡ì…˜ ë²„íŠ¼ ì¶”ê°€
                    if (action && action.label && action.line) {
                        const btn = document.createElement('button');
                        btn.className = 'view-code-btn';
                        btn.textContent = action.label;
                        // í•¸ë“¤ëŸ¬ ì§ì ‘ ë°”ì¸ë”© ëŒ€ì‹  í´ë¡œì € ì‚¬ìš© ì•ˆí•¨ -> ì „ì—­ ë³€ìˆ˜ diagState.uploadedHtml ë“± ì ‘ê·¼ í•„ìš”
                        // ì—¬ê¸°ì„œëŠ” ê°„ë‹¨íˆ HTML ì†ŒìŠ¤ë¥¼ ê°€ì ¸ì˜´
                        const source = diagState.uploadedHtml || document.documentElement.outerHTML;
                        const context = getCodeContext(source, action.line);

                        btn.onclick = () => showCodeSnippet(action.line, context);
                        msgDiv.appendChild(btn);
                    }
                }

                resultsDiv.appendChild(msgDiv);
                resultsDiv.scrollTop = resultsDiv.scrollHeight;
            }
        }

        // ê¸°ì¡´ ì½”ë“œì™€ì˜ í˜¸í™˜ì„±ì„ ìœ„í•´ logToDemo ë³„ì¹­ ì„¤ì •
        const logToDemo = logToResults;

        // ============ ë„¤ë¹„ê²Œì´ì…˜ ê¸°ëŠ¥ ============
        // ============ ë„¤ë¹„ê²Œì´ì…˜ ê¸°ëŠ¥ ============
        function showSection(sectionId) {
            // ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ë³€ê²½
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent.includes(getSectionLabel(sectionId))) {
                    btn.classList.add('active');
                }
            });

            // ì„¹ì…˜ ìŠ¤í¬ë¡¤ (ID ê¸°ë°˜ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ê²¬ê³ ì„± í™•ë³´)
            const targetId = 'section-' + sectionId;
            const el = document.getElementById(targetId);

            if (el) {
                // ì ‘í˜€ìˆëŠ” ì„¹ì…˜(<details>)ì¸ ê²½ìš° í¼ì¹˜ê¸°
                if (el.tagName === 'DETAILS') {
                    el.open = true;
                }
                el.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function getSectionLabel(sectionId) {
            const labels = {
                'bookmarklet': 'ë¶ë§ˆí¬ ìƒì„±',
                'usage': 'ì‚¬ìš© ë°©ë²•',
                'metrics': 'ì¸¡ì • í•­ëª©',
                'advanced': 'ê³ ê¸‰ ê¸°ëŠ¥',
                'demo': 'ë¼ì´ë¸Œ ë°ëª¨'
            };
            return labels[sectionId] || '';
        }

        // ============ ë¼ì´ë¸Œ ë°ëª¨ ì§„ë‹¨ ê¸°ëŠ¥ (í™•ì¥) ============

        // ì§„ë‹¨ ìƒíƒœ ì €ì¥ì†Œ
        const diagState = {
            domNodes: 0,
            memoryMB: 0,
            diagTime: 0,
            errors: 0,
            warnings: 0,
            passCount: 0,
            failCount: 0,
            uploadedHtml: null,
            consoleErrors: [],
            consoleWarns: []
        };

        // ì›ë³¸ ì½˜ì†” í•¨ìˆ˜ ì €ì¥ (ì˜¤ë¥˜ ìº¡ì²˜ìš©)
        const originalConsoleError = console.error;
        const originalConsoleWarn = console.warn;

        // ì½˜ì†” ì˜¤ë¥˜ ìº¡ì²˜ í™œì„±í™”
        console.error = function (...args) {
            diagState.consoleErrors.push({
                time: new Date().toLocaleTimeString(),
                message: args.map(a => typeof a === 'object' ? JSON.stringify(a) : String(a)).join(' ')
            });
            originalConsoleError.apply(console, args);
        };

        console.warn = function (...args) {
            diagState.consoleWarns.push({
                time: new Date().toLocaleTimeString(),
                message: args.map(a => typeof a === 'object' ? JSON.stringify(a) : String(a)).join(' ')
            });
            originalConsoleWarn.apply(console, args);
        };

        function updateDemoStatus(status, isError = false) {
            const indicator = document.getElementById('demoStatusIndicator');
            const text = document.getElementById('demoStatusText');
            if (indicator) indicator.className = isError ? 'status-indicator error' : 'status-indicator ready';
            if (text) text.textContent = status;
        }

        // ========== íˆ´íŒ ë°ì´í„° (ë¦¬íŒ©í† ë§ ê°€ì´ë“œ ê¸°ë°˜) ==========
        const TOOLTIP_DATA = {
            // ê¸°ë³¸ ì„±ëŠ¥
            checkDom: { fail: 'âš ï¸ DOM ë…¸ë“œ 5000ê°œ ì´ˆê³¼\n\n[ë¬¸ì œ]\nê³¼ë„í•œ DOM ë…¸ë“œëŠ” ë Œë”ë§ ì§€ì—°ì„ ìœ ë°œí•©ë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ ë¶ˆí•„ìš”í•œ ì¤‘ì²© ìš”ì†Œ ì œê±°\nâ€¢ ê°€ìƒ ìŠ¤í¬ë¡¤ë§ ì ìš© ê³ ë ¤\nâ€¢ display:none ëŒ€ì‹  ìš”ì†Œ ì™„ì „ ì œê±°' },
            checkMemory: { fail: 'âš ï¸ ë©”ëª¨ë¦¬ 100MB ì´ˆê³¼\n\n[ë¬¸ì œ]\në©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë˜ëŠ” ê³¼ë„í•œ ë°ì´í„° ìºì‹± ì˜ì‹¬.\n\n[ì¡°ì¹˜]\nâ€¢ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì •ë¦¬\nâ€¢ ëŒ€ìš©ëŸ‰ ë°°ì—´ ì°¸ì¡° í•´ì œ\nâ€¢ WeakMap/WeakSet ì‚¬ìš© ê³ ë ¤' },
            checkDCL: { fail: 'âš ï¸ DOMContentLoaded 3ì´ˆ ì´ˆê³¼\n\n[ë¬¸ì œ]\nì´ˆê¸° íŒŒì‹±ì´ ë„ˆë¬´ ëŠë¦½ë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ ìŠ¤í¬ë¦½íŠ¸ defer/async ì ìš©\nâ€¢ CSS í¬ë¦¬í‹°ì»¬ íŒ¨ìŠ¤ ìµœì í™”\nâ€¢ ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸ ìµœì†Œí™”' },
            checkFCP: { fail: 'âš ï¸ First Paint 2ì´ˆ ì´ˆê³¼\n\n[ë¬¸ì œ]\nì‚¬ìš©ì ì²´ê° ì†ë„ê°€ ëŠë¦½ë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ í°íŠ¸ í”„ë¦¬ë¡œë“œ\nâ€¢ ì´ë¯¸ì§€ lazy loading\nâ€¢ ì„œë²„ ì‘ë‹µ ì‹œê°„ ê°œì„ ' },
            checkEventLoop: { fail: 'âš ï¸ ì´ë²¤íŠ¸ ë£¨í”„ ì§€ì—° 100ms ì´ˆê³¼\n\n[ë¬¸ì œ]\nUI ì‘ë‹µì„±ì´ ì €í•˜ë©ë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ ê¸´ ì‘ì—… ì²­í¬ë¡œ ë¶„í• \nâ€¢ requestIdleCallback í™œìš©\nâ€¢ Web Worker ì‚¬ìš© ê³ ë ¤' },

            // 5ëŒ€ ì•…ì„± íŒ¨í„´
            checkMole: { fail: 'ğŸ¹ ë‘ë”ì§€ íŒ¨í„´ ê°ì§€\n\n[ì •ì˜]\në™ì¼í•œ ë¡œì§ì´ ì—¬ëŸ¬ ê³³ì— ì¤‘ë³µ êµ¬í˜„ë¨.\n\n[ì¡°ì¹˜]\nâ€¢ ë‹¨ì¼ ì†ŒìŠ¤(Single Source)ë¡œ ì¤‘ì•™ ì§‘ì¤‘í™”\nâ€¢ ê³µí†µ í•¨ìˆ˜/í´ë˜ìŠ¤ë¡œ ì¶”ì¶œ\nâ€¢ DRY ì›ì¹™ ì ìš©' },
            checkGhost: { fail: 'ğŸ‘» ìœ ë ¹ íŒ¨í„´ ê°ì§€\n\n[ì •ì˜]\nreturn ì´í›„ ë„ë‹¬ ë¶ˆê°€ëŠ¥í•œ ì½”ë“œê°€ ì¡´ì¬í•¨.\n\n[ì¡°ì¹˜]\nâ€¢ return ì´í›„ ì½”ë“œ ì¦‰ì‹œ ì œê±°\nâ€¢ í•¨ìˆ˜ ë¡œì§ íë¦„ ì¬ê²€í† \nâ€¢ Dead code elimination ì ìš©' },
            checkTrap: { fail: 'ğŸª¤ í•¨ì • íŒ¨í„´ ê°ì§€\n\n[ì •ì˜]\ní”Œë˜ê·¸ ì„¤ì • í›„ í•´ì œê°€ ëˆ„ë½ë¨ (ë¬´í•œ ì ê¸ˆ ìœ„í—˜).\n\n[ì¡°ì¹˜]\nâ€¢ ë°˜ë“œì‹œ try-finally ì‚¬ìš©\nâ€¢ í”Œë˜ê·¸ ì„¤ì •/í•´ì œ ìŒ í™•ì¸\nâ€¢ DIAG_STORE.__measuring ë“± í™•ì¸' },
            checkSpaghetti: { fail: 'ğŸ ìŠ¤íŒŒê²Œí‹° íŒ¨í„´ ê°ì§€\n\n[ì •ì˜]\n3ë‹¨ ì´ìƒ ì¤‘ì²©ìœ¼ë¡œ ì½”ë“œ ê°€ë…ì„± ì €í•˜.\n\n[ì¡°ì¹˜]\nâ€¢ Early Return íŒ¨í„´ ì ìš©\nâ€¢ Guard Clause ì‚¬ìš©\nâ€¢ í•¨ìˆ˜ ë¶„ë¦¬ë¡œ ì¤‘ì²© ì œê±°' },
            checkMinefield: { fail: 'ğŸ’£ ì§€ë¢°ë°­ íŒ¨í„´ ê°ì§€\n\n[ì •ì˜]\nconst ë³€ìˆ˜ ì¬í• ë‹¹ ì‹œë„ (ëŸ°íƒ€ì„ ì—ëŸ¬ ìœ ë°œ).\n\n[ì¡°ì¹˜]\nâ€¢ ì¡°ê±´ë¶€ ë³€ê²½ í•„ìš” ì‹œ let ì‚¬ìš©\nâ€¢ ë¶ˆë³€ì„± ì˜ë„ í™•ì¸\nâ€¢ ë³€ìˆ˜ ì„ ì–¸ ì¬ê²€í† ' },

            // API í˜¸ì¶œ
            checkQsa: { fail: 'âš ï¸ querySelectorAll("*") í˜¸ì¶œ ê°ì§€\n\n[ë¬¸ì œ]\nì „ì²´ DOM ìˆœíšŒëŠ” ì‹¬ê°í•œ ì„±ëŠ¥ ì €í•˜ ìœ ë°œ.\n\n[ì¡°ì¹˜]\nâ€¢ êµ¬ì²´ì  ì„ íƒì ì‚¬ìš©\nâ€¢ ID/í´ë˜ìŠ¤ ê¸°ë°˜ ì„ íƒ\nâ€¢ ìºì‹±ëœ ì°¸ì¡° í™œìš©' },
            checkDm: { fail: 'âš ï¸ DataManager.getProjects() ë‹¤ì¤‘ í˜¸ì¶œ\n\n[ë¬¸ì œ]\në°ì´í„° ì¬ì¡°íšŒëŠ” O(1)â†’O(n) ì„±ëŠ¥ ì €í•˜.\n\n[ì¡°ì¹˜]\nâ€¢ ê²°ê³¼ ë³€ìˆ˜ì— ìºì‹±\nâ€¢ í•¨ìˆ˜ ìµœì´ˆ 1íšŒë§Œ í˜¸ì¶œ\nâ€¢ projectData ë³€ìˆ˜ ì¬ì‚¬ìš©' },
            checkStyle: { fail: 'âš ï¸ getComputedStyle() ê³¼ë‹¤ í˜¸ì¶œ\n\n[ë¬¸ì œ]\në ˆì´ì•„ì›ƒ ê°•ì œ ë¦¬í”Œë¡œìš° ë°œìƒ.\n\n[ì¡°ì¹˜]\nâ€¢ CSS í´ë˜ìŠ¤ í† ê¸€ë¡œ ëŒ€ì²´\nâ€¢ ìŠ¤íƒ€ì¼ ë³€ê²½ ì¼ê´„ ì²˜ë¦¬\nâ€¢ í˜¸ì¶œ ê²°ê³¼ ìºì‹±' },

            // ì½˜ì†”/ì˜¤ë¥˜
            checkConsoleError: { fail: 'âŒ console.error ë°œìƒ\n\n[ë¬¸ì œ]\nì½”ë“œì— ì˜¤ë¥˜ê°€ ìˆìŠµë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ ì—ëŸ¬ ìŠ¤íƒ í™•ì¸\nâ€¢ ì›ì¸ ì½”ë“œ ìˆ˜ì •\nâ€¢ ì˜ˆì™¸ ì²˜ë¦¬ ì¶”ê°€' },
            checkConsoleWarn: { fail: 'âš ï¸ console.warn ë‹¤ìˆ˜ ë°œìƒ\n\n[ë¬¸ì œ]\nì ì¬ì  ë¬¸ì œê°€ ëˆ„ì ë˜ê³  ìˆìŠµë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ ê²½ê³  ì›ì¸ íŒŒì•…\nâ€¢ ê¶Œì¥ ë°©ì‹ìœ¼ë¡œ ë³€ê²½\nâ€¢ deprecation ëŒ€ì‘' },
            checkException: { fail: 'ğŸ’¥ ë¯¸ì²˜ë¦¬ ì˜ˆì™¸ ë°œìƒ\n\n[ë¬¸ì œ]\nì˜ˆì™¸ê°€ catchë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ try-catch ë¸”ë¡ ì¶”ê°€\nâ€¢ ì—ëŸ¬ ë°”ìš´ë”ë¦¬ êµ¬í˜„\nâ€¢ window.onerror í•¸ë“¤ë§' },

            // HTML/ì¸ì½”ë”©
            checkEncoding: { fail: 'âš ï¸ UTF-8 ì¸ì½”ë”© ë¯¸í™•ì¸\n\n[ë¬¸ì œ]\ní•œê¸€ì´ ê¹¨ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ <meta charset="UTF-8"> ì¶”ê°€\nâ€¢ íŒŒì¼ ì €ì¥ ì‹œ UTF-8 ì„ íƒ\nâ€¢ BOM ì œê±° ê³ ë ¤' },
            checkCharset: { fail: 'âŒ meta charset ëˆ„ë½\n\n[ë¬¸ì œ]\në¸Œë¼ìš°ì € ì¸ì½”ë”© ì¶”ë¡  ì˜ì¡´.\n\n[ì¡°ì¹˜]\nâ€¢ <head>ì— <meta charset="UTF-8"> ì¶”ê°€\nâ€¢ HTML5 ë¬¸ì„œ í‘œì¤€ ì¤€ìˆ˜' },
            checkTags: { fail: 'âš ï¸ ë‹«íˆì§€ ì•Šì€ íƒœê·¸\n\n[ë¬¸ì œ]\nHTML êµ¬ì¡° ì˜¤ë¥˜ë¡œ ë Œë”ë§ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥.\n\n[ì¡°ì¹˜]\nâ€¢ íƒœê·¸ ìŒ í™•ì¸\nâ€¢ ìë™ ë‹«í˜ íƒœê·¸ í™•ì¸\nâ€¢ HTML ìœ íš¨ì„± ê²€ì‚¬' },
            checkHtmlStructure: { fail: 'âš ï¸ HTML êµ¬ì¡° ë¶ˆì™„ì „\n\n[ë¬¸ì œ]\nhtml/head/body íƒœê·¸ ëˆ„ë½.\n\n[ì¡°ì¹˜]\nâ€¢ í‘œì¤€ HTML5 êµ¬ì¡° ì ìš©\nâ€¢ DOCTYPE ì„ ì–¸ í™•ì¸' },

            // ë°ì´í„° íŒŒì´í”„ë¼ì¸
            checkProjectData: { fail: 'âš ï¸ projectData ë¯¸ê°ì§€\n\n[ë¬¸ì œ]\ní”„ë¡œì íŠ¸ ë°ì´í„° ë³€ìˆ˜ê°€ ì •ì˜ë˜ì§€ ì•ŠìŒ.\n\n[ì¡°ì¹˜]\nâ€¢ ë°ì´í„° ì´ˆê¸°í™” í™•ì¸\nâ€¢ Excel ì—…ë¡œë“œ í›„ í™•ì¸\nâ€¢ AppStore ë™ê¸°í™” í™•ì¸' },
            checkAppStore: { fail: 'âš ï¸ AppStore ë¯¸ê°ì§€\n\n[ë¬¸ì œ]\nì¤‘ì•™ ìƒíƒœ ì €ì¥ì†Œ ë¯¸ì •ì˜.\n\n[ì¡°ì¹˜]\nâ€¢ AppStore ì´ˆê¸°í™” í™•ì¸\nâ€¢ ì „ì—­ ìƒíƒœ ê´€ë¦¬ êµ¬í˜„' },
            checkDataManager: { fail: 'ì •ë³´: DataManager ë¯¸ì‚¬ìš©\n\n[ì°¸ê³ ]\nDataManager íŒ¨í„´ ë¯¸ì‚¬ìš© ì‹œ ì§ì ‘ ë°ì´í„° ê´€ë¦¬ í•„ìš”.' },
            checkDataSync: { fail: 'âš ï¸ ë°ì´í„° ë™ê¸°í™” í•„ìš”\n\n[ë¬¸ì œ]\nprojectData/AppStore ë¶ˆì¼ì¹˜ ê°€ëŠ¥ì„±.\n\n[ì¡°ì¹˜]\nâ€¢ ë™ê¸°í™” í•¨ìˆ˜ í™•ì¸\nâ€¢ ì €ì¥/ë¡œë“œ ì‹œì  ê²€ì¦' },

            // Excel
            checkFileInput: { fail: 'âš ï¸ íŒŒì¼ ì…ë ¥ ìš”ì†Œ ì—†ìŒ\n\n[ë¬¸ì œ]\nExcel ì—…ë¡œë“œ ë¶ˆê°€.\n\n[ì¡°ì¹˜]\nâ€¢ <input type="file"> ì¶”ê°€\nâ€¢ accept=".xlsx,.xls" ì„¤ì •' },
            checkUploadHandler: { fail: 'âš ï¸ ì—…ë¡œë“œ í•¸ë“¤ëŸ¬ ë¯¸ê°ì§€\n\n[ë¬¸ì œ]\níŒŒì¼ ì²˜ë¦¬ ë¡œì§ ì—†ìŒ.\n\n[ì¡°ì¹˜]\nâ€¢ FileReader êµ¬í˜„\nâ€¢ XLSX ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©' },
            checkDownloadFunc: { fail: 'âš ï¸ ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜ ë¯¸ê°ì§€\n\n[ë¬¸ì œ]\nExcel ë‚´ë³´ë‚´ê¸° ë¶ˆê°€.\n\n[ì¡°ì¹˜]\nâ€¢ XLSX.write êµ¬í˜„\nâ€¢ Blob/saveAs ì‚¬ìš©' },
            checkLocalStorage: { fail: 'âš ï¸ localStorage ì œí•œ\n\n[ë¬¸ì œ]\në¡œì»¬ ì €ì¥ ë¶ˆê°€ (Private ëª¨ë“œ ë“±).\n\n[ì¡°ì¹˜]\nâ€¢ IndexedDB ëŒ€ì•ˆ ê³ ë ¤\nâ€¢ ì„œë²„ ì €ì¥ êµ¬í˜„' },

            // í™˜ê²½
            checkEnvironment: { fail: '' },
            checkCloudStatus: { fail: '' },
            checkHttps: { fail: 'âš ï¸ HTTP ë¹„ë³´ì•ˆ ì—°ê²°\n\n[ë¬¸ì œ]\në°ì´í„° ì „ì†¡ì´ ì•”í˜¸í™”ë˜ì§€ ì•ŠìŒ.\n\n[ì¡°ì¹˜]\nâ€¢ HTTPS ì ìš©\nâ€¢ SSL ì¸ì¦ì„œ ì„¤ì¹˜' },

            // ê°„íŠ¸
            checkGanttContainer: { fail: 'âš ï¸ ê°„íŠ¸ ì»¨í…Œì´ë„ˆ ì—†ìŒ\n\n[ë¬¸ì œ]\nê°„íŠ¸ ì°¨íŠ¸ ë Œë”ë§ ë¶ˆê°€.\n\n[ì¡°ì¹˜]\nâ€¢ ê°„íŠ¸ ì»¨í…Œì´ë„ˆ ìš”ì†Œ í™•ì¸\nâ€¢ ì´ˆê¸°í™” í•¨ìˆ˜ í™•ì¸' },
            checkTimeline: { fail: 'âš ï¸ íƒ€ì„ë¼ì¸ ë¯¸ê°ì§€\n\n[ì¡°ì¹˜]\nâ€¢ ë‚ ì§œ í—¤ë” ë Œë”ë§ í™•ì¸\nâ€¢ ìŠ¤ì¼€ì¼ ì„¤ì • í™•ì¸' },
            checkTodayMarker: { fail: 'âš ï¸ Today ë§ˆì»¤ ì—†ìŒ\n\n[ì¡°ì¹˜]\nâ€¢ ì˜¤ëŠ˜ ë‚ ì§œì„  ë Œë”ë§ í™•ì¸\nâ€¢ IntegrityTodayLine í™•ì¸' },
            checkGroupHeaders: { fail: 'âš ï¸ ê·¸ë£¹ í—¤ë” ì—†ìŒ\n\n[ì¡°ì¹˜]\nâ€¢ í”„ë¡œì íŠ¸ ê·¸ë£¹ ë Œë”ë§ í™•ì¸\nâ€¢ ë°ì´í„° êµ¬ì¡° í™•ì¸' },

            // í•„í„°
            checkFilterSettlement: { fail: 'âš ï¸ ì •ì‚° í•„í„° ì—†ìŒ' },
            checkFilterOverview: { fail: 'âš ï¸ ì´ê´„ í•„í„° ì—†ìŒ' },
            checkFilterSchedule: { fail: 'âš ï¸ ì¼ì • í•„í„° ì—†ìŒ' },
            checkSearchFunc: { fail: 'âš ï¸ ê²€ìƒ‰ ê¸°ëŠ¥ ì—†ìŒ' },

            // UI
            checkDataPanel: { fail: 'âš ï¸ ë°ì´í„° ê´€ë¦¬ íŒ¨ë„ ì—†ìŒ' },
            checkHistoryPanel: { fail: 'âš ï¸ ë³€ê²½ ì´ë ¥ íŒ¨ë„ ì—†ìŒ' },
            checkQuickLinks: { fail: 'âš ï¸ ë°”ë¡œê°€ê¸° ë©”ë‰´ ì—†ìŒ' },
            checkSettingsMenu: { fail: 'âš ï¸ ì„¤ì • ë©”ë‰´ ì—†ìŒ' },

            // ì ì¬ì  ì½˜ì†” ì˜¤ë¥˜ ì§„ë‹¨ (ì‹ ê·œ)
            checkEventHandlerRef: { fail: 'ğŸ”® ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì˜¤ë¥˜ ê°ì§€\n\n[ë¬¸ì œ]\nonclick/onchange ë“±ì—ì„œ ì •ì˜ë˜ì§€ ì•Šì€ í•¨ìˆ˜ë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ ì°¸ì¡°ëœ í•¨ìˆ˜ê°€ ì •ì˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸\nâ€¢ í•¨ìˆ˜ëª… ì˜¤íƒ€ ìˆ˜ì •\nâ€¢ ì „ì—­ ìŠ¤ì½”í”„ì— í•¨ìˆ˜ ë…¸ì¶œ í™•ì¸' },
            checkClickSimulation: { fail: 'ğŸ–±ï¸ í´ë¦­ ì‹œë®¬ë ˆì´ì…˜ ì˜¤ë¥˜ ë°œìƒ\n\n[ë¬¸ì œ]\në²„íŠ¼/ë©”ë‰´ í´ë¦­ ì‹œ ëŸ°íƒ€ì„ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ ì˜¤ë¥˜ ë°œìƒ ìš”ì†Œ í™•ì¸\nâ€¢ ì½˜ì†” ë¡œê·¸ì—ì„œ ìƒì„¸ ì˜¤ë¥˜ í™•ì¸\nâ€¢ try-catchë¡œ í•¸ë“¤ëŸ¬ ë³´í˜¸' },
            checkUndefinedRef: { fail: 'âš¡ undefined ë³€ìˆ˜ ì°¸ì¡° ê°ì§€\n\n[ë¬¸ì œ]\nì •ì˜ë˜ì§€ ì•Šì€ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ëŠ” ì½”ë“œê°€ ìˆìŠµë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ ë³€ìˆ˜ ì„ ì–¸ í™•ì¸\nâ€¢ ì´ˆê¸°í™” ìˆœì„œ ì ê²€\nâ€¢ ì „ì—­ ë³€ìˆ˜ ì°¸ì¡° ì‹œ window ì ‘ë‘ì–´ í™•ì¸' },
            checkGlobalErrorHandler: { fail: 'ğŸ›¡ï¸ ì „ì—­ ì˜ˆì™¸ í•¸ë“¤ëŸ¬ ë¯¸ì„¤ì •\n\n[ë¬¸ì œ]\nwindow.onerrorê°€ ì„¤ì •ë˜ì§€ ì•Šì•„ ì˜ˆì™¸ê°€ ëˆ„ë½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ window.onerror í•¸ë“¤ëŸ¬ ì¶”ê°€\nâ€¢ window.onunhandledrejection ì¶”ê°€\nâ€¢ ì—ëŸ¬ ëª¨ë‹ˆí„°ë§ êµ¬í˜„' },
            checkLatentErrorSummary: { fail: 'ğŸ“‹ ì ì¬ì  ì˜¤ë¥˜ ë°œê²¬\n\n[ìš”ì•½]\nì‚¬ìš©ì ìƒí˜¸ì‘ìš© ì‹œ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì½”ë“œê°€ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ ìœ„ì˜ ê°œë³„ í•­ëª© í™•ì¸\nâ€¢ ìƒì„¸ ë¡œê·¸ ì°¸ì¡°\nâ€¢ ë¬¸ì œ ì½”ë“œ ìˆ˜ì •' },

            // [v1.7] ìœ íœ´ ë³µê·€ ì•ˆì •ì„± ì§„ë‹¨
            checkPreEmptiveCleanup: { fail: 'ğŸ§¹ ì„ ì œì  ì •ë¦¬ í•¨ìˆ˜ ë¯¸ì¡´ì¬\n\n[ë¬¸ì œ]\nwindow.__preEmptiveCleanup í•¨ìˆ˜ê°€ ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\nìœ íœ´ ì§„ì… ì‹œ ì •ë¦¬ê°€ ìˆ˜í–‰ë˜ì§€ ì•Šì•„ ë³µê·€ ì‹œ ì§€ì—°ì´ ë°œìƒí•©ë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ v1.7 ì„ ì œì  ì •ë¦¬ ëª¨ë“ˆ ì ìš© í™•ì¸\nâ€¢ VisibilityCleanupController ì„¤ì¹˜ í™•ì¸\nâ€¢ ê°€ì´ë“œë¼ì¸ ì„¹ì…˜ 5 ì°¸ì¡°' },
            checkVisibilityController: { fail: 'ğŸ‘ï¸ VisibilityCleanupController ë¯¸ì¡´ì¬\n\n[ë¬¸ì œ]\nwindow.VisibilityCleanupControllerê°€ ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\nìœ íœ´ ìƒíƒœ ê´€ë¦¬ ë° ì •ë¦¬ ì œì–´ê°€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ v1.6+ ë¬´ê²°ì„± ëª¨ë“ˆ ì ìš© í™•ì¸\nâ€¢ IIFE ë‚´ VisibilityCleanupController ì •ì˜ í™•ì¸\nâ€¢ ê°€ì´ë“œë¼ì¸ ì„¹ì…˜ 5 ì°¸ì¡°' },
            checkTimerManagerVisibility: { fail: 'â±ï¸ TimerManager visibilitychange ë¯¸ì—°ë™\n\n[ë¬¸ì œ]\nTimerManagerê°€ Page Visibility APIì™€ ì—°ë™ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\níƒ­ ë¹„í™œì„±í™” ì‹œ íƒ€ì´ë¨¸ê°€ ê³„ì† ì‹¤í–‰ë˜ì–´ CPU ê³¼ë¶€í•˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ TimerManager.pauseAll/resumeAll êµ¬í˜„ í™•ì¸\nâ€¢ visibilitychange ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ í™•ì¸\nâ€¢ ê°€ì´ë“œë¼ì¸ ì„¹ì…˜ 2.1 ì°¸ì¡°' },
            checkObserverPoolStats: { fail: 'ğŸ“Š Observer ëˆ„ì  ì´ˆê³¼\n\n[ë¬¸ì œ]\nObserver ì´ ê°œìˆ˜ê°€ 10ê°œë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.\në©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë° ì„±ëŠ¥ ì €í•˜ì˜ ì§•í›„ì…ë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ ObserverPool.cleanupStale() í˜¸ì¶œ\nâ€¢ ë¶ˆí•„ìš”í•œ Observer í•´ì œ í™•ì¸\nâ€¢ ì£¼ê¸°ì  ì •ë¦¬ ì„¤ì • í™•ì¸ (1ë¶„/10ê°œ)' },
            checkIdleReadiness: { fail: 'âš¡ ìœ íœ´ ë³µê·€ ì¦‰ì‹œ ì‚¬ìš© ë¶ˆê°€\n\n[ë¬¸ì œ]\nìœ íœ´ ìƒíƒœì—ì„œ ë³µê·€ ì‹œ ì¦‰ì‹œ ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.\nì„ ì œì  ì •ë¦¬ê°€ ì™„ë£Œë˜ì§€ ì•Šì•„ ë³µê·€ ì‹œ ì§€ì—°ì´ ë°œìƒí•©ë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ __preEmptiveCleanup ìœ íœ´ ì§„ì… ì‹œ í˜¸ì¶œ í™•ì¸\nâ€¢ ë³µê·€ ì‹œ "Instant resume" ë¡œê·¸ í™•ì¸\nâ€¢ v1.7 íŒ¨í„´ ì ìš© í™•ì¸' },

            // [v1.8] ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì§„ë‹¨
            checkMemoryHeap: { fail: 'ğŸ“Š ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ê³¼ë‹¤\n\n[ë¬¸ì œ]\nJS Heap ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë†’ìŠµë‹ˆë‹¤.\nì¥ì‹œê°„ ì‚¬ìš© ì‹œ ë¸Œë¼ìš°ì € ì„±ëŠ¥ì´ ì €í•˜ë©ë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ ë¶ˆí•„ìš”í•œ ê°ì²´ ì°¸ì¡° í•´ì œ\nâ€¢ ëŒ€ìš©ëŸ‰ ë°°ì—´ ì‚¬ìš© í›„ null í• ë‹¹\nâ€¢ ì´ë¯¸ì§€/ìº”ë²„ìŠ¤ ë©”ëª¨ë¦¬ í•´ì œ' },
            checkMemoryGrowth: { fail: 'ğŸ“ˆ ë©”ëª¨ë¦¬ ì¦ê°€ìœ¨ ì´ìƒ\n\n[ë¬¸ì œ]\nìœ íœ´ ì „í›„ ë©”ëª¨ë¦¬ê°€ ë¹„ì •ìƒì ìœ¼ë¡œ ì¦ê°€í–ˆìŠµë‹ˆë‹¤.\në©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ í•´ì œ í™•ì¸\nâ€¢ setInterval ì •ë¦¬ í™•ì¸\nâ€¢ ìºì‹œ ë¬´íš¨í™” ë¡œì§ ì ê²€' },
            checkListenerCount: { fail: 'ğŸ¯ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ê³¼ë‹¤\n\n[ë¬¸ì œ]\nì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆê°€ ê³¼ë„í•˜ê²Œ ë“±ë¡ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\nremoveEventListener ëˆ„ë½ìœ¼ë¡œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ addEventListener/removeEventListener ìŒ í™•ì¸\nâ€¢ ë™ì  ìš”ì†Œ ì œê±° ì‹œ ë¦¬ìŠ¤ë„ˆ í•´ì œ\nâ€¢ EventHub.onWithCleanup ì‚¬ìš©' },
            checkTimerLeak: { fail: 'â° íƒ€ì´ë¨¸ ëˆ„ìˆ˜ ê°ì§€\n\n[ë¬¸ì œ]\nclearInterval/clearTimeoutì´ ëˆ„ë½ë˜ì–´ íƒ€ì´ë¨¸ê°€ ëˆ„ì ë©ë‹ˆë‹¤.\nìœ íœ´ ë³µê·€ ì‹œ ë™ì‹œ ì‹¤í–‰ìœ¼ë¡œ ë²„ë²…ê±°ë¦¼ ë°œìƒ.\n\n[ì¡°ì¹˜]\nâ€¢ setInterval ì‚¬ìš© ì‹œ ID ì €ì¥\nâ€¢ ì»´í¬ë„ŒíŠ¸ íŒŒê´´ ì‹œ clearInterval í˜¸ì¶œ\nâ€¢ TimerManager.clearAll() í™œìš©' },
            checkWeakRefUsage: { fail: 'ğŸ”— WeakMap/WeakRef ë¯¸ì‚¬ìš©\n\n[ë¬¸ì œ]\nê°ì²´ ì°¸ì¡°ì— ì¼ë°˜ Map/Setì„ ì‚¬ìš©í•˜ì—¬ GCê°€ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ DOM ìš”ì†Œ ì°¸ì¡° ì‹œ WeakMap ì‚¬ìš©\nâ€¢ ìºì‹œì— WeakRef ì ìš© ê²€í† \nâ€¢ ìˆ˜ë™ ì°¸ì¡° í•´ì œ ë¡œì§ ì¶”ê°€' },
            checkDetachedDOM: { fail: 'ğŸ—‘ï¸ Detached DOM ë…¸ë“œ ê°ì§€\n\n[ë¬¸ì œ]\nDOMì—ì„œ ì œê±°ë˜ì—ˆì§€ë§Œ JSì—ì„œ ì°¸ì¡°ë˜ëŠ” ë…¸ë“œê°€ ìˆìŠµë‹ˆë‹¤.\në©”ëª¨ë¦¬ ëˆ„ìˆ˜ì˜ ì£¼ìš” ì›ì¸ì…ë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ ë³€ìˆ˜ì— ì €ì¥ëœ DOM ì°¸ì¡° null ì²˜ë¦¬\nâ€¢ ì´ë²¤íŠ¸ ìœ„ì„ íŒ¨í„´ ì‚¬ìš©\nâ€¢ MutationObserver í•´ì œ í™•ì¸' },
            checkMemoryLeakRisk: { fail: 'ğŸ“‹ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ìœ„í—˜\n\n[ë¬¸ì œ]\nì—¬ëŸ¬ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì§•í›„ê°€ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.\nì¥ì‹œê°„ ì‚¬ìš© ì‹œ ì‹œìŠ¤í…œ ì„±ëŠ¥ì´ ì €í•˜ë©ë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ ìœ„ì˜ ê°œë³„ í•­ëª© ìˆ˜ì •\nâ€¢ Chrome DevTools Memory íƒ­ ë¶„ì„\nâ€¢ Heap Snapshot ë¹„êµ ë¶„ì„' },
            // [v1.8] TimerManager ì—°ë™ í™•ëŒ€
            checkSettlementMonitorV3: { fail: 'ğŸ”§ Settlement' + 'Monitor v2' + '.0 (êµ¬ë²„ì „)\n\n[ë¬¸ì œ]\n100ms setIntervalì´ ìœ íœ´ ì‹œì—ë„ ê³„ì† ì‹¤í–‰ë©ë‹ˆë‹¤.\në³µê·€ ì‹œ ëˆ„ì ëœ ì½œë°±ì´ ë²„ë²…ê±°ë¦¼ì„ ìœ ë°œí•©ë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ v3.0ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ\nâ€¢ TimerManager.createPausableInterval ì‚¬ìš©\nâ€¢ ê°„ê²© 100ms â†’ 500ms ì¦ê°€' },
            checkPausableSettlement: { fail: 'â° settlement-monitor ë¯¸ë“±ë¡\n\n[ë¬¸ì œ]\nSettlementMonitor íƒ€ì´ë¨¸ê°€ TimerManagerì— ë“±ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\nìœ íœ´ ì‹œ ìë™ ì •ì§€ê°€ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ TimerManager.createPausableInterval("settlement-monitor", ...) ì‚¬ìš©' },
            checkPausableWorkdate: { fail: 'ğŸ“… workdate-btn-observer ë¯¸ë“±ë¡\n\n[ë¬¸ì œ]\nWorkdate ë²„íŠ¼ ê°ì‹œ íƒ€ì´ë¨¸ê°€ TimerManagerì— ë“±ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ TimerManager.createPausableInterval("workdate-btn-observer", ...) ì‚¬ìš©' },
            checkPausablePending: { fail: 'ğŸ“‹ pending-work-checker ë¯¸ë“±ë¡\n\n[ë¬¸ì œ]\nPending Work í™•ì¸ íƒ€ì´ë¨¸ê°€ TimerManagerì— ë“±ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ TimerManager.createPausableInterval("pending-work-checker", ...) ì‚¬ìš©' },
            checkPausableGantt: { fail: 'ğŸ“ gantt-today-marker ë¯¸ë“±ë¡\n\n[ë¬¸ì œ]\nGantt Today Marker íƒ€ì´ë¨¸ê°€ TimerManagerì— ë“±ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ TimerManager.createPausableInterval("gantt-today-marker", ...) ì‚¬ìš©' },
            checkV18Readiness: { fail: 'âœ… v1.8 ë¯¸ì ìš©\n\n[ë¬¸ì œ]\nTimerManager ì—°ë™ì´ ì™„ì „í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\nìœ íœ´ ë³µê·€ ì‹œ ë²„ë²…ê±°ë¦¼ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n[ì¡°ì¹˜]\nâ€¢ ëª¨ë“  setIntervalì„ TimerManagerë¡œ ì´ê´€\nâ€¢ ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ debounce ì ìš©\nâ€¢ v1.8 ê°€ì´ë“œë¼ì¸ ì°¸ì¡°' }
        };

        function updateChecklist(id, passed, value) {
            const el = document.getElementById(id);
            if (el) {
                el.textContent = value;
                el.style.color = passed ? '#10b981' : '#ef4444';
                el.style.fontWeight = 'bold';
                el.className = 'metric-value ' + (passed ? 'success' : 'warning');

                // íˆ´íŒ ì„¤ì • (ì‹¤íŒ¨ ì‹œì—ë§Œ)
                if (!passed && TOOLTIP_DATA[id] && TOOLTIP_DATA[id].fail) {
                    el.setAttribute('data-tooltip', TOOLTIP_DATA[id].fail);
                } else {
                    el.removeAttribute('data-tooltip');
                }
            }
            // í†µê³„ ì—…ë°ì´íŠ¸
            if (passed) diagState.passCount++;
            else diagState.failCount++;
        }

        function updateMetricCards() {
            const set = (id, val, threshold, reverse = false) => {
                const el = document.getElementById(id);
                if (el) {
                    el.textContent = typeof val === 'number' ? (val < 1000 ? val : val.toFixed(0)) : val;
                    if (threshold !== undefined) {
                        const ok = reverse ? val >= threshold : val < threshold;
                        el.style.color = ok ? '#10b981' : '#ef4444';
                    }
                }
            };
            set('diagMetricDom', diagState.domNodes, 5000);
            set('diagMetricMemory', diagState.memoryMB.toFixed(1), 100);
            set('diagMetricTime', diagState.diagTime.toFixed(0) + 'ms');
            set('diagMetricErrors', diagState.errors, 1);
            set('diagMetricWarnings', diagState.warnings, 3);

            const statusEl = document.getElementById('diagMetricStatus');
            if (statusEl) {
                const hasIssues = diagState.errors > 0 || diagState.failCount > 3;
                statusEl.textContent = hasIssues ? 'âš ï¸' : 'âœ…';
            }
        }

        function updateSummary() {
            const summary = document.getElementById('diagSummary');
            const passEl = document.getElementById('diagPassCount');
            const failEl = document.getElementById('diagFailCount');

            if (passEl) passEl.textContent = diagState.passCount;
            if (failEl) failEl.textContent = diagState.failCount;

            if (summary) {
                const totalItems = 60; // 43 + 5 (ì ì¬ì  ì˜¤ë¥˜) + 5 (ìœ íœ´ ë³µê·€) + 7 (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ v1.8)
                const rate = Math.round((diagState.passCount / totalItems) * 100);
                let status = rate >= 90 ? 'âœ… ì–‘í˜¸' : rate >= 70 ? 'âš ï¸ ì£¼ì˜ í•„ìš”' : 'âŒ ê°œì„  í•„ìš”';
                summary.textContent = `ì§„ë‹¨ ì™„ë£Œ: ${rate}% í†µê³¼ (${diagState.passCount}/${totalItems}) - ${status}`;
            }
        }

        // ========== íŒŒì¼ ì—…ë¡œë“œ í•¸ë“¤ëŸ¬ ==========
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
                diagState.uploadedHtml = e.target.result;
                document.getElementById('uploadStatus').innerHTML =
                    `âœ… <strong>${file.name}</strong> ë¡œë“œ ì™„ë£Œ (${(file.size / 1024).toFixed(1)}KB)`;
                logToDemo(`ğŸ“ íŒŒì¼ ì—…ë¡œë“œ: ${file.name} (${(file.size / 1024).toFixed(1)}KB)`, 'success');
            };
            reader.onerror = () => {
                document.getElementById('uploadStatus').textContent = 'âŒ íŒŒì¼ ì½ê¸° ì‹¤íŒ¨';
                logToDemo('âŒ íŒŒì¼ ì½ê¸° ì‹¤íŒ¨', 'error');
            };
            reader.readAsText(file);
        }

        // ========== ì „ì²´ ì§„ë‹¨ ì‹¤í–‰ ==========
        async function runFullDiagnostic() {
            const startTime = performance.now();
            diagState.passCount = 0;
            diagState.failCount = 0;
            diagState.errors = 0;
            diagState.warnings = 0;

            updateDemoStatus('ì „ì²´ ì§„ë‹¨ ì‹¤í–‰ ì¤‘...');
            logToDemo('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'header');
            logToDemo('ğŸ”¬ ì¢…í•© ì§„ë‹¨ ì‹œì‘ (16ê°œ ì¹´í…Œê³ ë¦¬, 76ê°œ í•­ëª©)', 'header');
            logToDemo('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'header');

            // ì§„ë‹¨ ëŒ€ìƒ HTML ê²°ì •
            const targetHtml = diagState.uploadedHtml || document.documentElement.outerHTML;
            const isExternal = !!diagState.uploadedHtml;
            logToDemo(`ğŸ“„ ì§„ë‹¨ ëŒ€ìƒ: ${isExternal ? 'ì—…ë¡œë“œëœ ì™¸ë¶€ íŒŒì¼' : 'í˜„ì¬ í˜ì´ì§€'}`, 'info');

            await sleep(50);

            // ===== 1. ê¸°ë³¸ ì„±ëŠ¥ ì§„ë‹¨ (5ê°œ) =====
            logToDemo('', 'info');
            logToDemo('â”â”â” ğŸ“Š ê¸°ë³¸ ì„±ëŠ¥ (5ê°œ) â”â”â”', 'header');

            // 1-1. DOM ë…¸ë“œ ìˆ˜
            diagState.domNodes = document.querySelectorAll('*').length;
            const domOk = diagState.domNodes < 5000;
            updateChecklist('checkDom', domOk, `${diagState.domNodes}ê°œ ${domOk ? 'âœ…' : 'âš ï¸'}`);
            logToDemo(`â±ï¸ DOM ë…¸ë“œ ìˆ˜: ${diagState.domNodes}ê°œ (ê¸°ì¤€: <5000)`, domOk ? 'success' : 'warning');

            // 1-2. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
            if (performance.memory) {
                diagState.memoryMB = performance.memory.usedJSHeapSize / 1024 / 1024;
                const memOk = diagState.memoryMB < 100;
                updateChecklist('checkMemory', memOk, `${diagState.memoryMB.toFixed(1)}MB ${memOk ? 'âœ…' : 'âš ï¸'}`);
                logToDemo(`ğŸ§  ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: ${diagState.memoryMB.toFixed(2)}MB (ê¸°ì¤€: <100MB)`, memOk ? 'success' : 'warning');
            } else {
                updateChecklist('checkMemory', true, 'N/A (Chrome ì „ìš©)');
                logToDemo('ğŸ§  ë©”ëª¨ë¦¬: ì¸¡ì • ë¶ˆê°€ (Chromeì—ì„œë§Œ ì§€ì›)', 'warning');
            }

            // 1-3. DOMContentLoaded
            if (performance.timing) {
                const dcl = performance.timing.domContentLoadedEventEnd - performance.timing.navigationStart;
                const dclOk = dcl < 3000;
                updateChecklist('checkDCL', dclOk, `${dcl}ms ${dclOk ? 'âœ…' : 'âš ï¸'}`);
                logToDemo(`ğŸ“ˆ DOMContentLoaded: ${dcl}ms (ê¸°ì¤€: <3000ms)`, dclOk ? 'success' : 'warning');
            } else {
                updateChecklist('checkDCL', true, 'N/A');
            }

            // 1-4. First Contentful Paint
            const paintEntries = performance.getEntriesByType('paint');
            const fcp = paintEntries.find(e => e.name === 'first-contentful-paint');
            if (fcp) {
                const fcpOk = fcp.startTime < 2000;
                updateChecklist('checkFCP', fcpOk, `${fcp.startTime.toFixed(0)}ms ${fcpOk ? 'âœ…' : 'âš ï¸'}`);
                logToDemo(`ğŸ¨ FCP: ${fcp.startTime.toFixed(2)}ms (ê¸°ì¤€: <2000ms)`, fcpOk ? 'success' : 'warning');
            } else {
                updateChecklist('checkFCP', true, 'N/A');
                logToDemo('ğŸ¨ FCP: ì¸¡ì • ë¶ˆê°€', 'info');
            }

            // 1-5. ì´ë²¤íŠ¸ ë£¨í”„ ì§€ì—°
            const loopDelay = await measureEventLoop();
            const loopOk = loopDelay < 100;
            updateChecklist('checkEventLoop', loopOk, `${loopDelay.toFixed(0)}ms ${loopOk ? 'âœ…' : 'âš ï¸'}`);
            logToDemo(`â° ì´ë²¤íŠ¸ ë£¨í”„ ì§€ì—°: ${loopDelay.toFixed(2)}ms (ê¸°ì¤€: <100ms)`, loopOk ? 'success' : 'warning');

            await sleep(50);

            // ===== 2. 5ëŒ€ ì•…ì„± íŒ¨í„´ (5ê°œ) =====
            logToResults('', 'info');
            logToResults('â”â”â” ğŸ› 5ëŒ€ ì•…ì„± íŒ¨í„´ (5ê°œ) â”â”â”', 'header');

            const patterns = analyzeCodePatterns(targetHtml);

            // í—¬í¼: íŒ¨í„´ ê²°ê³¼ ë¡œê¹… ë° ìƒì„¸ ë¼ì¸ ë²„íŠ¼ ì¶”ê°€
            const logPatternResult = (name, detected, count, lines, checkId) => {
                updateChecklist(checkId, !detected, detected ? `âš ï¸ ${count}ê±´` : 'âœ… ì—†ìŒ');
                const status = detected ? 'error' : 'success';
                const msg = `${name}: ${detected ? `âŒ ${count}ê±´ ê°ì§€` : 'âœ… ì—†ìŒ'}`;
                logToResults(msg, status);

                if (detected && lines && lines.length > 0) {
                    // ìµœëŒ€ 5ê°œê¹Œì§€ë§Œ ìƒì„¸ ë¼ì¸ í‘œì‹œ (ë„ˆë¬´ ë§ìœ¼ë©´ ìŠ¤í¬ë¡¤ ì••ë°•)
                    lines.slice(0, 5).forEach(line => {
                        logToResults(`  â€¢ Line ${line}: ${name} íŒ¨í„´ ê°ì§€`, 'warning', { label: 'ğŸ” ì½”ë“œ ë³´ê¸°', line: line });
                    });
                    if (lines.length > 5) {
                        logToResults(`  â€¢ ... ì™¸ ${lines.length - 5}ê±´`, 'info');
                    }
                }
            };

            logPatternResult('ğŸ¹ ë‘ë”ì§€ íŒ¨í„´', patterns.mole, patterns.moleCount, patterns.moleLines, 'checkMole');
            logPatternResult('ğŸ‘» ìœ ë ¹ íŒ¨í„´', patterns.ghost, patterns.ghostCount, patterns.ghostLines, 'checkGhost');
            logPatternResult('ğŸª¤ í•¨ì • íŒ¨í„´', patterns.trap, patterns.trapCount, patterns.trapLines, 'checkTrap');
            logPatternResult('ğŸ ìŠ¤íŒŒê²Œí‹° íŒ¨í„´', patterns.spaghetti, patterns.spaghettiCount, patterns.spaghettiLines, 'checkSpaghetti');
            logPatternResult('ğŸ’£ ì§€ë¢°ë°­ íŒ¨í„´', patterns.minefield, patterns.minefieldCount, patterns.minefieldLines, 'checkMinefield');

            await sleep(50);

            // ===== 3. API í˜¸ì¶œ ìµœì í™” (3ê°œ) =====
            logToResults('', 'info');
            logToResults('â”â”â” ğŸ” API í˜¸ì¶œ ìµœì í™” (3ê°œ) â”â”â”', 'header');

            const apiPatterns = analyzeApiPatterns(targetHtml);

            updateChecklist('checkQsa', !apiPatterns.qsaStar, apiPatterns.qsaStar ? `âš ï¸ ${apiPatterns.qsaStarCount}ê±´` : 'âœ… ì—†ìŒ');
            logToResults(`ğŸ” querySelectorAll('*'): ${apiPatterns.qsaStar ? `âŒ ${apiPatterns.qsaStarCount}ê±´` : 'âœ… ì—†ìŒ'}`, apiPatterns.qsaStar ? 'warning' : 'success');
            if (apiPatterns.qsaStar) {
                apiPatterns.qsaLines.slice(0, 5).forEach(line => logToResults(`  â€¢ Line ${line}: ì „ì²´ ì„ íƒì ì‚¬ìš©`, 'warning', { label: 'ğŸ” ì½”ë“œ ë³´ê¸°', line: line }));
            }

            updateChecklist('checkDm', !apiPatterns.dmGetProjects, apiPatterns.dmGetProjects ? `âš ï¸ ${apiPatterns.dmCount}ê±´` : 'âœ… ìµœì í™”ë¨');
            logToResults(`ğŸ“¦ DataManager.getProjects(): ${apiPatterns.dmGetProjects ? `âš ï¸ ${apiPatterns.dmCount}ê±´ (ìµœì í™” ê¶Œì¥)` : 'âœ… ìµœì í™”ë¨'}`, apiPatterns.dmGetProjects ? 'warning' : 'success');
            if (apiPatterns.dmGetProjects) {
                apiPatterns.dmLines.slice(0, 5).forEach(line => logToResults(`  â€¢ Line ${line}: ì¤‘ë³µ í˜¸ì¶œ ê°€ëŠ¥ì„±`, 'warning', { label: 'ğŸ” ì½”ë“œ ë³´ê¸°', line: line }));
            }

            updateChecklist('checkStyle', !apiPatterns.getComputedStyle, apiPatterns.getComputedStyle ? `âš ï¸ ${apiPatterns.styleCount}ê±´` : 'âœ… ìµœì†Œí™”');
            logToResults(`ğŸ¨ getComputedStyle(): ${apiPatterns.getComputedStyle ? `âš ï¸ ${apiPatterns.styleCount}ê±´` : 'âœ… ìµœì†Œí™”'}`, apiPatterns.getComputedStyle ? 'warning' : 'success');
            if (apiPatterns.getComputedStyle) {
                apiPatterns.styleLines.slice(0, 5).forEach(line => logToResults(`  â€¢ Line ${line}: ë ˆì´ì•„ì›ƒ ê°•ì œ ìœ ë°œ`, 'warning', { label: 'ğŸ” ì½”ë“œ ë³´ê¸°', line: line }));
            }

            await sleep(50);

            // ===== 4. ì½˜ì†” ë° ì˜¤ë¥˜ (3ê°œ) =====
            logToDemo('', 'info');
            logToDemo('â”â”â” ğŸš¨ ì½˜ì†” ë° ì˜¤ë¥˜ (3ê°œ) â”â”â”', 'header');

            const errorCount = diagState.consoleErrors.length;
            const warnCount = diagState.consoleWarns.length;
            diagState.errors = errorCount;
            diagState.warnings = warnCount;

            updateChecklist('checkConsoleError', errorCount === 0, errorCount === 0 ? 'âœ… ì—†ìŒ' : `âŒ ${errorCount}ê°œ`);
            logToDemo(`âŒ console.error: ${errorCount}ê°œ`, errorCount === 0 ? 'success' : 'error');

            updateChecklist('checkConsoleWarn', warnCount < 5, warnCount < 5 ? `âœ… ${warnCount}ê°œ` : `âš ï¸ ${warnCount}ê°œ`);
            logToDemo(`âš ï¸ console.warn: ${warnCount}ê°œ`, warnCount < 5 ? 'success' : 'warning');

            // ë¯¸ì²˜ë¦¬ ì˜ˆì™¸ ì²´í¬ (í˜„ì¬ í˜ì´ì§€ì—ì„œ ê°ì§€ëœ ê²ƒ)
            const hasExceptions = false; // ë™ì ìœ¼ë¡œ ìº¡ì²˜ëœ ì˜ˆì™¸ í™•ì¸
            updateChecklist('checkException', !hasExceptions, hasExceptions ? 'âŒ ìˆìŒ' : 'âœ… ì—†ìŒ');
            logToDemo(`ğŸ’¥ ë¯¸ì²˜ë¦¬ ì˜ˆì™¸: ${hasExceptions ? 'âŒ ìˆìŒ' : 'âœ… ì—†ìŒ'}`, hasExceptions ? 'error' : 'success');

            await sleep(50);

            // ===== 5. HTML ë¬¸ë²• ë° ì¸ì½”ë”© (4ê°œ) =====
            logToResults('', 'info');
            logToResults('â”â”â” ğŸ“„ HTML ë¬¸ë²• ë° ì¸ì½”ë”© (4ê°œ) â”â”â”', 'header');

            const htmlCheck = analyzeHtmlStructure(targetHtml);

            updateChecklist('checkEncoding', htmlCheck.utf8, htmlCheck.utf8 ? 'âœ… UTF-8' : 'âš ï¸ í™•ì¸ í•„ìš”');
            logToResults(`ğŸ”¤ í•œêµ­ì–´ ì¸ì½”ë”©: ${htmlCheck.utf8 ? 'âœ… UTF-8 í™•ì¸' : 'âš ï¸ ì¸ì½”ë”© í™•ì¸ í•„ìš”'}`, htmlCheck.utf8 ? 'success' : 'warning');

            updateChecklist('checkCharset', htmlCheck.hasCharset, htmlCheck.hasCharset ? 'âœ… ì„ ì–¸ë¨' : 'âŒ ëˆ„ë½');
            logToResults(`ğŸ“ meta charset: ${htmlCheck.hasCharset ? 'âœ… ì„ ì–¸ë¨' : 'âŒ ëˆ„ë½'}`, htmlCheck.hasCharset ? 'success' : 'error');

            updateChecklist('checkTags', !htmlCheck.unclosedTags, htmlCheck.unclosedTags ? `âš ï¸ ${htmlCheck.unclosedCount}ê±´` : 'âœ… ì •ìƒ');
            logToResults(`ğŸ·ï¸ ë‹«íˆì§€ ì•Šì€ íƒœê·¸: ${htmlCheck.unclosedTags ? `âš ï¸ ${htmlCheck.unclosedCount}ê±´ ë°œê²¬` : 'âœ… ì—†ìŒ'}`, htmlCheck.unclosedTags ? 'warning' : 'success');

            if (htmlCheck.errors && htmlCheck.errors.length > 0) {
                htmlCheck.errors.slice(0, 5).forEach(err => {
                    const msg = err.type === 'orphan_close'
                        ? `  â€¢ Line ${err.line}: ë¶ˆí•„ìš”í•œ ë‹«ëŠ” íƒœê·¸ </${err.tag}>`
                        : `  â€¢ Line ${err.line}: ë‹«íˆì§€ ì•Šì€ íƒœê·¸ <${err.tag}>`;
                    logToResults(msg, 'warning', { label: 'ğŸ” ì½”ë“œ ë³´ê¸°', line: err.line });
                });
                if (htmlCheck.errors.length > 5) {
                    logToResults(`  â€¢ ... ì™¸ ${htmlCheck.errors.length - 5}ê±´`, 'info');
                }
            }

            updateChecklist('checkHtmlStructure', htmlCheck.validStructure, htmlCheck.validStructure ? 'âœ… ìœ íš¨' : 'âš ï¸ ê²€í†  í•„ìš”');
            logToResults(`ğŸ“ HTML êµ¬ì¡°: ${htmlCheck.validStructure ? 'âœ… ìœ íš¨' : 'âš ï¸ ê²€í†  í•„ìš”'}`, htmlCheck.validStructure ? 'success' : 'warning');

            await sleep(50);

            // ===== 6. ë°ì´í„° íŒŒì´í”„ë¼ì¸ ê±´ì „ì„± (4ê°œ) =====
            logToDemo('', 'info');
            logToDemo('â”â”â” ğŸ“¦ ë°ì´í„° íŒŒì´í”„ë¼ì¸ ê±´ì „ì„± (4ê°œ) â”â”â”', 'header');

            const pipeline = analyzeDataPipeline(targetHtml);

            updateChecklist('checkProjectData', pipeline.hasProjectData, pipeline.hasProjectData ? 'âœ… ì •ìƒ' : 'âš ï¸ ë¯¸ê°ì§€');
            logToDemo(`ğŸ”„ projectData: ${pipeline.hasProjectData ? 'âœ… ì •ì˜ë¨' : 'âš ï¸ ë¯¸ê°ì§€'}`, pipeline.hasProjectData ? 'success' : 'warning');

            updateChecklist('checkAppStore', pipeline.hasAppStore, pipeline.hasAppStore ? 'âœ… ì •ìƒ' : 'âš ï¸ ë¯¸ê°ì§€');
            logToDemo(`ğŸª AppStore: ${pipeline.hasAppStore ? 'âœ… ì •ì˜ë¨' : 'âš ï¸ ë¯¸ê°ì§€'}`, pipeline.hasAppStore ? 'success' : 'warning');

            updateChecklist('checkDataManager', pipeline.hasDataManager, pipeline.hasDataManager ? 'âœ… ì¡´ì¬' : 'ì •ë³´: ì—†ìŒ');
            logToDemo(`ğŸ“Š DataManager: ${pipeline.hasDataManager ? 'âœ… ì¡´ì¬' : 'ì •ë³´: ë¯¸ì‚¬ìš©'}`, pipeline.hasDataManager ? 'success' : 'info');

            updateChecklist('checkDataSync', pipeline.dataSync, pipeline.dataSync ? 'âœ… ë™ê¸°í™”' : 'âš ï¸ í™•ì¸ í•„ìš”');
            logToDemo(`ğŸ”— ë°ì´í„° ë™ê¸°í™”: ${pipeline.dataSync ? 'âœ… ì •ìƒ' : 'âš ï¸ í™•ì¸ í•„ìš”'}`, pipeline.dataSync ? 'success' : 'warning');

            await sleep(50);

            // ===== 7. Excel ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ (4ê°œ) =====
            logToDemo('', 'info');
            logToDemo('â”â”â” ğŸ“¤ Excel ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ (4ê°œ) â”â”â”', 'header');

            const excel = analyzeExcelFeatures(targetHtml);

            updateChecklist('checkFileInput', excel.hasFileInput, excel.hasFileInput ? 'âœ… ìˆìŒ' : 'âš ï¸ ì—†ìŒ');
            logToDemo(`ğŸ“ íŒŒì¼ ì…ë ¥: ${excel.hasFileInput ? 'âœ… ìˆìŒ' : 'âš ï¸ ì—†ìŒ'}`, excel.hasFileInput ? 'success' : 'warning');

            updateChecklist('checkUploadHandler', excel.hasUploadHandler, excel.hasUploadHandler ? 'âœ… ì •ìƒ' : 'âš ï¸ ë¯¸ê°ì§€');
            logToDemo(`ğŸ“¤ ì—…ë¡œë“œ í•¸ë“¤ëŸ¬: ${excel.hasUploadHandler ? 'âœ… ìˆìŒ' : 'âš ï¸ ë¯¸ê°ì§€'}`, excel.hasUploadHandler ? 'success' : 'warning');

            updateChecklist('checkDownloadFunc', excel.hasDownloadFunc, excel.hasDownloadFunc ? 'âœ… ì •ìƒ' : 'âš ï¸ ë¯¸ê°ì§€');
            logToDemo(`ğŸ“¥ ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜: ${excel.hasDownloadFunc ? 'âœ… ìˆìŒ' : 'âš ï¸ ë¯¸ê°ì§€'}`, excel.hasDownloadFunc ? 'success' : 'warning');

            const lsOk = checkLocalStorage();
            updateChecklist('checkLocalStorage', lsOk, lsOk ? 'âœ… ì •ìƒ' : 'âš ï¸ ì œí•œ');
            logToDemo(`ğŸ’¾ localStorage: ${lsOk ? 'âœ… ì‚¬ìš© ê°€ëŠ¥' : 'âš ï¸ ì œí•œë¨'}`, lsOk ? 'success' : 'warning');

            await sleep(50);

            // ===== 8. ë¡œì»¬/ì›¹ ë°°í¬ í™˜ê²½ (3ê°œ) =====
            logToDemo('', 'info');
            logToDemo('â”â”â” ğŸŒ ë¡œì»¬/ì›¹ ë°°í¬ í™˜ê²½ (3ê°œ) â”â”â”', 'header');

            const env = analyzeEnvironment();

            updateChecklist('checkEnvironment', true, env.isLocal ? 'ğŸ–¥ï¸ ë¡œì»¬' : 'â˜ï¸ ì›¹');
            logToDemo(`ğŸ–¥ï¸ ì‹¤í–‰ í™˜ê²½: ${env.isLocal ? 'ë¡œì»¬ (file://)' : 'ì›¹ ì„œë²„ (' + location.protocol + ')'}`, 'info');

            updateChecklist('checkCloudStatus', !env.isLocal || true, env.isLocal ? 'í•´ë‹¹ ì—†ìŒ' : 'âœ… ì—°ê²°ë¨');
            logToDemo(`â˜ï¸ í´ë¼ìš°ë“œ: ${env.isLocal ? 'ë¡œì»¬ í™˜ê²½ (í•´ë‹¹ ì—†ìŒ)' : 'âœ… ì›¹ ë°°í¬ í™˜ê²½'}`, 'info');

            updateChecklist('checkHttps', env.isSecure || env.isLocal, env.isSecure ? 'âœ… HTTPS' : env.isLocal ? 'ë¡œì»¬' : 'âš ï¸ HTTP');
            logToDemo(`ğŸ”’ ë³´ì•ˆ: ${env.isSecure ? 'âœ… HTTPS' : env.isLocal ? 'ë¡œì»¬ (ë³´ì•ˆ ë¬´ê´€)' : 'âš ï¸ HTTP (ë¹„ë³´ì•ˆ)'}`, env.isSecure || env.isLocal ? 'success' : 'warning');

            await sleep(50);

            // ===== 9. ê°„íŠ¸ ì°¨íŠ¸ ë Œë”ë§ (4ê°œ) =====
            logToDemo('', 'info');
            logToDemo('â”â”â” ğŸ“Š ê°„íŠ¸ ì°¨íŠ¸ ë Œë”ë§ (4ê°œ) â”â”â”', 'header');

            const gantt = analyzeGanttFeatures(targetHtml);

            updateChecklist('checkGanttContainer', gantt.hasContainer, gantt.hasContainer ? 'âœ… ìˆìŒ' : 'âš ï¸ ì—†ìŒ');
            logToDemo(`ğŸ“… ê°„íŠ¸ ì»¨í…Œì´ë„ˆ: ${gantt.hasContainer ? 'âœ… ìˆìŒ' : 'âš ï¸ ë¯¸ê°ì§€'}`, gantt.hasContainer ? 'success' : 'warning');

            updateChecklist('checkTimeline', gantt.hasTimeline, gantt.hasTimeline ? 'âœ… ìˆìŒ' : 'âš ï¸ ì—†ìŒ');
            logToDemo(`ğŸ“ íƒ€ì„ë¼ì¸: ${gantt.hasTimeline ? 'âœ… ìˆìŒ' : 'âš ï¸ ë¯¸ê°ì§€'}`, gantt.hasTimeline ? 'success' : 'warning');

            updateChecklist('checkTodayMarker', gantt.hasTodayMarker, gantt.hasTodayMarker ? 'âœ… ìˆìŒ' : 'âš ï¸ ì—†ìŒ');
            logToDemo(`ğŸ“Œ Today ë§ˆì»¤: ${gantt.hasTodayMarker ? 'âœ… ìˆìŒ' : 'âš ï¸ ë¯¸ê°ì§€'}`, gantt.hasTodayMarker ? 'success' : 'warning');

            updateChecklist('checkGroupHeaders', gantt.hasGroupHeaders, gantt.hasGroupHeaders ? 'âœ… ìˆìŒ' : 'âš ï¸ ì—†ìŒ');
            logToDemo(`ğŸ“¦ ê·¸ë£¹ í—¤ë”: ${gantt.hasGroupHeaders ? 'âœ… ìˆìŒ' : 'âš ï¸ ë¯¸ê°ì§€'}`, gantt.hasGroupHeaders ? 'success' : 'warning');

            await sleep(50);

            // ===== 10. í•„í„° ë° ë“œë¡­ë‹¤ìš´ (4ê°œ) =====
            logToDemo('', 'info');
            logToDemo('â”â”â” ğŸ”½ í•„í„° ë° ë“œë¡­ë‹¤ìš´ (4ê°œ) â”â”â”', 'header');

            const filters = analyzeFilterFeatures(targetHtml);

            updateChecklist('checkFilterSettlement', filters.hasSettlement, filters.hasSettlement ? 'âœ… ìˆìŒ' : 'âš ï¸ ì—†ìŒ');
            logToDemo(`ğŸ’° ì •ì‚° í•„í„°: ${filters.hasSettlement ? 'âœ… ìˆìŒ' : 'âš ï¸ ë¯¸ê°ì§€'}`, filters.hasSettlement ? 'success' : 'warning');

            updateChecklist('checkFilterOverview', filters.hasOverview, filters.hasOverview ? 'âœ… ìˆìŒ' : 'âš ï¸ ì—†ìŒ');
            logToDemo(`ğŸ“‹ ì´ê´„ í•„í„°: ${filters.hasOverview ? 'âœ… ìˆìŒ' : 'âš ï¸ ë¯¸ê°ì§€'}`, filters.hasOverview ? 'success' : 'warning');

            updateChecklist('checkFilterSchedule', filters.hasSchedule, filters.hasSchedule ? 'âœ… ìˆìŒ' : 'âš ï¸ ì—†ìŒ');
            logToDemo(`ğŸ“… ì¼ì • í•„í„°: ${filters.hasSchedule ? 'âœ… ìˆìŒ' : 'âš ï¸ ë¯¸ê°ì§€'}`, filters.hasSchedule ? 'success' : 'warning');

            updateChecklist('checkSearchFunc', filters.hasSearch, filters.hasSearch ? 'âœ… ìˆìŒ' : 'âš ï¸ ì—†ìŒ');
            logToDemo(`ğŸ” ê²€ìƒ‰ ê¸°ëŠ¥: ${filters.hasSearch ? 'âœ… ìˆìŒ' : 'âš ï¸ ë¯¸ê°ì§€'}`, filters.hasSearch ? 'success' : 'warning');

            await sleep(50);

            // ===== 11. UI ë©”ë‰´ ë° ë„¤ë¹„ê²Œì´ì…˜ (4ê°œ) =====
            logToDemo('', 'info');
            logToDemo('â”â”â” ğŸ¯ UI ë©”ë‰´ ë° ë„¤ë¹„ê²Œì´ì…˜ (4ê°œ) â”â”â”', 'header');

            const ui = analyzeUIFeatures(targetHtml);

            updateChecklist('checkDataPanel', ui.hasDataPanel, ui.hasDataPanel ? 'âœ… ìˆìŒ' : 'âš ï¸ ì—†ìŒ');
            logToDemo(`ğŸ“‚ ë°ì´í„° ê´€ë¦¬ íŒ¨ë„: ${ui.hasDataPanel ? 'âœ… ìˆìŒ' : 'âš ï¸ ë¯¸ê°ì§€'}`, ui.hasDataPanel ? 'success' : 'warning');

            updateChecklist('checkHistoryPanel', ui.hasHistoryPanel, ui.hasHistoryPanel ? 'âœ… ìˆìŒ' : 'âš ï¸ ì—†ìŒ');
            logToDemo(`ğŸ“œ ë³€ê²½ ì´ë ¥ íŒ¨ë„: ${ui.hasHistoryPanel ? 'âœ… ìˆìŒ' : 'âš ï¸ ë¯¸ê°ì§€'}`, ui.hasHistoryPanel ? 'success' : 'warning');

            updateChecklist('checkQuickLinks', ui.hasQuickLinks, ui.hasQuickLinks ? 'âœ… ìˆìŒ' : 'âš ï¸ ì—†ìŒ');
            logToDemo(`ğŸ”— ë°”ë¡œê°€ê¸° ë©”ë‰´: ${ui.hasQuickLinks ? 'âœ… ìˆìŒ' : 'âš ï¸ ë¯¸ê°ì§€'}`, ui.hasQuickLinks ? 'success' : 'warning');

            updateChecklist('checkSettingsMenu', ui.hasSettings, ui.hasSettings ? 'âœ… ìˆìŒ' : 'âš ï¸ ì—†ìŒ');
            logToDemo(`âš™ï¸ ì„¤ì •/ë„êµ¬ ë©”ë‰´: ${ui.hasSettings ? 'âœ… ìˆìŒ' : 'âš ï¸ ë¯¸ê°ì§€'}`, ui.hasSettings ? 'success' : 'warning');

            await sleep(50);

            // ===== 12. ì ì¬ì  ì½˜ì†” ì˜¤ë¥˜ ì§„ë‹¨ (5ê°œ) =====
            await runLatentErrorDiagnostic(targetHtml);

            await sleep(50);

            // ===== 13. ìœ íœ´ ë³µê·€ ì•ˆì •ì„± (5ê°œ) [v1.7] =====
            await runIdleRecoveryDiagnostic(targetHtml);

            await sleep(50);

            // ===== 14. ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì§„ë‹¨ (7ê°œ) [v1.8] =====
            await runMemoryLeakDiagnostic(targetHtml);

            await sleep(50);

            // ===== 15. TimerManager ì—°ë™ í™•ëŒ€ (6ê°œ) [v1.8] =====
            await runTimerManagerV18Diagnostic(targetHtml);

            await sleep(50);

            // ===== 16. ë¹ ë¥¸ ì„±ëŠ¥ ì§„ë‹¨ (10ê°œ) [v4.24] =====
            await runQuickPerfDiagnostic();

            // ===== ì§„ë‹¨ ì™„ë£Œ =====
            diagState.diagTime = performance.now() - startTime;

            logToDemo('', 'info');
            logToDemo('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'header');
            logToDemo(`ğŸ‰ ì „ì²´ ì§„ë‹¨ ì™„ë£Œ! (${diagState.diagTime.toFixed(0)}ms)`, 'success');

            const totalItems = 76; // 43 + 5 (ì ì¬ì  ì˜¤ë¥˜) + 5 (ìœ íœ´ ë³µê·€) + 7 (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜) + 6 (íƒ€ì´ë¨¸ ì—°ë™ v1.8) + 10 (ë¹ ë¥¸ ì„±ëŠ¥ v4.24)
            logToDemo(`ğŸ“Š ê²°ê³¼: ${diagState.passCount}/${totalItems} í†µê³¼ (${Math.round(diagState.passCount / totalItems * 100)}%)`,
                diagState.passCount >= 40 ? 'success' : diagState.passCount >= 30 ? 'warning' : 'error');
            logToDemo('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'header');

            updateMetricCards();
            updateSummary();
            updateDemoStatus('ì§„ë‹¨ ì™„ë£Œ');
        }

        // ========== ê°œë³„ ì§„ë‹¨ í•¨ìˆ˜ë“¤ ==========

        function runPerformanceCheck() {
            updateDemoStatus('ì„±ëŠ¥ ì²´í¬ ì¤‘...');
            logToDemo('â”â”â” â±ï¸ ì„±ëŠ¥ ì²´í¬ ì‹œì‘ â”â”â”', 'header');

            // DOM ë…¸ë“œ
            const domCount = document.querySelectorAll('*').length;
            logToDemo(`DOM ë…¸ë“œ: ${domCount}ê°œ`, domCount < 5000 ? 'success' : 'warning');

            // ë©”ëª¨ë¦¬
            if (performance.memory) {
                const mem = (performance.memory.usedJSHeapSize / 1024 / 1024).toFixed(2);
                logToDemo(`ë©”ëª¨ë¦¬: ${mem}MB`, mem < 100 ? 'success' : 'warning');
            }

            // íƒ€ì´ë°
            if (performance.timing) {
                const dcl = performance.timing.domContentLoadedEventEnd - performance.timing.navigationStart;
                const load = performance.timing.loadEventEnd - performance.timing.navigationStart;
                logToDemo(`DOMContentLoaded: ${dcl}ms`, dcl < 3000 ? 'success' : 'warning');
                logToDemo(`Load Complete: ${load}ms`, load < 5000 ? 'success' : 'warning');
            }

            // FCP
            const paintEntries = performance.getEntriesByType('paint');
            paintEntries.forEach(e => {
                if (e.name === 'first-contentful-paint') {
                    logToDemo(`FCP: ${e.startTime.toFixed(2)}ms`, e.startTime < 2000 ? 'success' : 'warning');
                }
            });

            logToDemo('âœ… ì„±ëŠ¥ ì²´í¬ ì™„ë£Œ', 'success');
            updateDemoStatus('ì„±ëŠ¥ ì²´í¬ ì™„ë£Œ');
        }

        function runPatternCheck() {
            updateDemoStatus('íŒ¨í„´ ê²€ì¦ ì¤‘...');
            const html = diagState.uploadedHtml || document.documentElement.outerHTML;

            logToDemo('â”â”â” ğŸ› ì•…ì„± íŒ¨í„´ ê²€ì¦ ì‹œì‘ â”â”â”', 'header');

            const patterns = analyzeCodePatterns(html);
            logToDemo(`ğŸ¹ ë‘ë”ì§€: ${patterns.mole ? 'âŒ ' + patterns.moleCount + 'ê±´' : 'âœ… ì—†ìŒ'}`, patterns.mole ? 'error' : 'success');
            logToDemo(`ğŸ‘» ìœ ë ¹: ${patterns.ghost ? 'âŒ ' + patterns.ghostCount + 'ê±´' : 'âœ… ì—†ìŒ'}`, patterns.ghost ? 'error' : 'success');
            logToDemo(`ğŸª¤ í•¨ì •: ${patterns.trap ? 'âŒ ' + patterns.trapCount + 'ê±´' : 'âœ… ì—†ìŒ'}`, patterns.trap ? 'error' : 'success');
            logToDemo(`ğŸ ìŠ¤íŒŒê²Œí‹°: ${patterns.spaghetti ? 'âŒ ' + patterns.spaghettiCount + 'ê±´' : 'âœ… ì—†ìŒ'}`, patterns.spaghetti ? 'error' : 'success');
            logToDemo(`ğŸ’£ ì§€ë¢°ë°­: ${patterns.minefield ? 'âŒ ' + patterns.minefieldCount + 'ê±´' : 'âœ… ì—†ìŒ'}`, patterns.minefield ? 'error' : 'success');

            const api = analyzeApiPatterns(html);
            logToDemo(`querySelectorAll('*'): ${api.qsaStar ? 'âš ï¸ ' + api.qsaStarCount + 'ê±´' : 'âœ… ì—†ìŒ'}`, api.qsaStar ? 'warning' : 'success');
            logToDemo(`DataManager.getProjects(): ${api.dmGetProjects ? 'âš ï¸ ' + api.dmCount + 'ê±´' : 'âœ… ìµœì í™”ë¨'}`, api.dmGetProjects ? 'warning' : 'success');

            logToDemo('âœ… íŒ¨í„´ ê²€ì¦ ì™„ë£Œ', 'success');
            updateDemoStatus('íŒ¨í„´ ê²€ì¦ ì™„ë£Œ');
        }

        function runConsoleCheck() {
            updateDemoStatus('ì½˜ì†” ì˜¤ë¥˜ í™•ì¸ ì¤‘...');
            logToDemo('â”â”â” ğŸš¨ ì½˜ì†” ì˜¤ë¥˜ í™•ì¸ â”â”â”', 'header');

            logToDemo(`console.error: ${diagState.consoleErrors.length}ê°œ`, diagState.consoleErrors.length === 0 ? 'success' : 'error');
            diagState.consoleErrors.slice(-5).forEach(e => {
                logToDemo(`  [${e.time}] ${e.message.substring(0, 80)}...`, 'error');
            });

            logToDemo(`console.warn: ${diagState.consoleWarns.length}ê°œ`, diagState.consoleWarns.length < 5 ? 'success' : 'warning');
            diagState.consoleWarns.slice(-3).forEach(e => {
                logToDemo(`  [${e.time}] ${e.message.substring(0, 80)}...`, 'warning');
            });

            logToDemo('âœ… ì½˜ì†” ì˜¤ë¥˜ í™•ì¸ ì™„ë£Œ', 'success');
            updateDemoStatus('ì½˜ì†” í™•ì¸ ì™„ë£Œ');
        }

        function runHtmlCheck() {
            updateDemoStatus('HTML ê²€ì‚¬ ì¤‘...');
            const html = diagState.uploadedHtml || document.documentElement.outerHTML;

            logToDemo('â”â”â” ğŸ“„ HTML êµ¬ì¡° ê²€ì‚¬ â”â”â”', 'header');

            const check = analyzeHtmlStructure(html);
            logToDemo(`DOCTYPE: ${html.includes('<!DOCTYPE') ? 'âœ… ìˆìŒ' : 'âš ï¸ ì—†ìŒ'}`, html.includes('<!DOCTYPE') ? 'success' : 'warning');
            logToDemo(`<html> íƒœê·¸: ${html.includes('<html') ? 'âœ… ìˆìŒ' : 'âŒ ì—†ìŒ'}`, html.includes('<html') ? 'success' : 'error');
            logToDemo(`<head> íƒœê·¸: ${html.includes('<head') ? 'âœ… ìˆìŒ' : 'âš ï¸ ì—†ìŒ'}`, html.includes('<head') ? 'success' : 'warning');
            logToDemo(`<body> íƒœê·¸: ${html.includes('<body') ? 'âœ… ìˆìŒ' : 'âŒ ì—†ìŒ'}`, html.includes('<body') ? 'success' : 'error');
            logToDemo(`meta charset: ${check.hasCharset ? 'âœ… ì„ ì–¸ë¨' : 'âš ï¸ í™•ì¸ í•„ìš”'}`, check.hasCharset ? 'success' : 'warning');
            logToDemo(`ë‹«íˆì§€ ì•Šì€ íƒœê·¸: ${check.unclosedCount}ê±´`, check.unclosedCount === 0 ? 'success' : 'warning');

            logToDemo('âœ… HTML ê²€ì‚¬ ì™„ë£Œ', 'success');
            updateDemoStatus('HTML ê²€ì‚¬ ì™„ë£Œ');
        }

        function runEncodingCheck() {
            updateDemoStatus('ì¸ì½”ë”© ê²€ì‚¬ ì¤‘...');
            const html = diagState.uploadedHtml || document.documentElement.outerHTML;

            logToDemo('â”â”â” ğŸ”¤ ì¸ì½”ë”© ê²€ì‚¬ â”â”â”', 'header');

            // UTF-8 ì„ ì–¸ í™•ì¸
            const hasUtf8 = /charset\s*=\s*["']?UTF-8/i.test(html);
            logToDemo(`UTF-8 ì„ ì–¸: ${hasUtf8 ? 'âœ… ìˆìŒ' : 'âš ï¸ í™•ì¸ í•„ìš”'}`, hasUtf8 ? 'success' : 'warning');

            // í•œê¸€ í¬í•¨ ì—¬ë¶€
            const hasKorean = /[ê°€-í£]/.test(html);
            logToDemo(`í•œê¸€ í¬í•¨: ${hasKorean ? 'âœ… ìˆìŒ' : 'ì •ë³´ ì—†ìŒ'}`, hasKorean ? 'success' : 'info');

            // ì¸ì½”ë”© ê¹¨ì§ íŒ¨í„´ í™•ì¸
            const brokenPatterns = html.match(/[\uFFFD\u00EF\u00BB\u00BF]/g);
            const hasBroken = brokenPatterns && brokenPatterns.length > 2;
            logToDemo(`ì¸ì½”ë”© ê¹¨ì§: ${hasBroken ? 'âš ï¸ ê°€ëŠ¥ì„± ìˆìŒ' : 'âœ… ì—†ìŒ'}`, hasBroken ? 'warning' : 'success');

            // BOM í™•ì¸
            const hasBom = html.charCodeAt(0) === 0xFEFF || html.startsWith('\ufeff');
            logToDemo(`BOM: ${hasBom ? 'ì •ë³´: BOM í¬í•¨' : 'ì •ë³´: BOM ì—†ìŒ'}`, 'info');

            logToDemo('âœ… ì¸ì½”ë”© ê²€ì‚¬ ì™„ë£Œ', 'success');
            updateDemoStatus('ì¸ì½”ë”© ê²€ì‚¬ ì™„ë£Œ');
        }

        // ========== ì ì¬ì  ì½˜ì†” ì˜¤ë¥˜ ê°œë³„ ì§„ë‹¨ ==========
        async function runLatentErrorCheck() {
            updateDemoStatus('ì ì¬ì  ì˜¤ë¥˜ ì§„ë‹¨ ì¤‘...');
            const html = diagState.uploadedHtml || document.documentElement.outerHTML;

            logToDemo('â”â”â” ğŸ”® ì ì¬ì  ì½˜ì†” ì˜¤ë¥˜ ì§„ë‹¨ â”â”â”', 'header');
            logToDemo('â€» í´ë¦­/ì´ë²¤íŠ¸ ë°œìƒ ì‹œ ë‚˜íƒ€ë‚  ìˆ˜ ìˆëŠ” ì ì¬ ì˜¤ë¥˜ë¥¼ ì‚¬ì „ íƒì§€í•©ë‹ˆë‹¤.', 'info');

            await runLatentErrorDiagnostic(html);

            logToDemo('âœ… ì ì¬ì  ì˜¤ë¥˜ ì§„ë‹¨ ì™„ë£Œ', 'success');
            updateDemoStatus('ì ì¬ì  ì˜¤ë¥˜ ì§„ë‹¨ ì™„ë£Œ');
        }

        // ========== [v1.7] ìœ íœ´ ë³µê·€ ì•ˆì •ì„± ê°œë³„ ì§„ë‹¨ ==========
        async function runIdleRecoveryCheck() {
            updateDemoStatus('ìœ íœ´ ë³µê·€ ì•ˆì •ì„± ì§„ë‹¨ ì¤‘...');
            const html = diagState.uploadedHtml || document.documentElement.outerHTML;

            logToDemo('â”â”â” ğŸ”„ ìœ íœ´ ë³µê·€ ì•ˆì •ì„± ì§„ë‹¨ [v1.7] â”â”â”', 'header');
            logToDemo('â€» 30ì´ˆ+ ìœ íœ´ í›„ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ë¥¼ ì§„ë‹¨í•©ë‹ˆë‹¤.', 'info');
            logToDemo('â€» v1.7 ì„ ì œì  ì •ë¦¬ ëª¨ë“ˆ ì ìš© ì—¬ë¶€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.', 'info');

            await runIdleRecoveryDiagnostic(html);

            logToDemo('âœ… ìœ íœ´ ë³µê·€ ì•ˆì •ì„± ì§„ë‹¨ ì™„ë£Œ', 'success');
            updateDemoStatus('ìœ íœ´ ë³µê·€ ì•ˆì •ì„± ì§„ë‹¨ ì™„ë£Œ');
        }

        // ========== [v1.8] TimerManager ì—°ë™ í™•ëŒ€ ê°œë³„ ì§„ë‹¨ ==========
        async function runTimerManagerV18Check() {
            updateDemoStatus('TimerManager ì—°ë™ ì§„ë‹¨ ì¤‘...');
            const html = diagState.uploadedHtml || document.documentElement.outerHTML;

            logToDemo('â”â”â” â±ï¸ TimerManager ì—°ë™ í™•ëŒ€ ì§„ë‹¨ [v1.8] â”â”â”', 'header');
            logToDemo('â€» ìœ íœ´ ë³µê·€ ë²„ë²…ê±°ë¦¼ í•´ê²°ì„ ìœ„í•œ íƒ€ì´ë¨¸ ì—°ë™ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.', 'info');
            logToDemo('â€» SettlementMonitor v3.0, ìŠ¤í¬ë¡¤ debounce ì ìš© ì—¬ë¶€ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤.', 'info');

            await runTimerManagerV18Diagnostic(html);

            logToDemo('âœ… TimerManager ì—°ë™ ì§„ë‹¨ ì™„ë£Œ', 'success');
            updateDemoStatus('TimerManager ì—°ë™ ì§„ë‹¨ ì™„ë£Œ');
        }

        // ========== ê³ ê¸‰ ê¸°ëŠ¥: CSV ë‚´ë³´ë‚´ê¸° ==========
        function exportDemoCSV() {
            try {
                const timestamp = new Date().toLocaleString();
                let csvContent = "\uFEFF"; // BOM for Excel
                csvContent += "Timestamp,Category,Item,Status,Value\n";

                // 1. ì²´í¬ë¦¬ìŠ¤íŠ¸ í•­ëª© ìˆ˜ì§‘ (Live Demo IDs)
                // IDs: checkDom, checkMemory, checkDCL, checkFCP, checkEventLoop
                //      checkMole, checkGhost, checkTrap, checkSpaghetti, checkMinefield
                //      checkQsa, checkDm, checkStyle
                //      checkConsoleError, checkConsoleWarn, checkException
                //      checkEncoding, checkCharset, checkTags, checkHtmlStructure
                //      checkProjectData, checkAppStore, checkDataManager, checkDataSync
                //      checkFileInput, checkUploadHandler, checkDownloadFunc, checkLocalStorage
                //      checkEnvironment, checkCloudStatus, checkHttps
                //      checkGanttContainer, checkTimeline, checkTodayMarker, checkGroupHeaders
                //      checkFilterSettlement, checkFilterOverview, checkFilterSchedule, checkSearchFunc
                //      checkDataPanel, checkHistoryPanel, checkQuickLinks, checkSettingsMenu

                const checklistMap = [
                    { id: 'checkDom', cat: 'Performance', name: 'DOM Nodes' },
                    { id: 'checkMemory', cat: 'Performance', name: 'Memory' },
                    { id: 'checkDCL', cat: 'Performance', name: 'DOMContentLoaded' },
                    { id: 'checkFCP', cat: 'Performance', name: 'FCP' },
                    { id: 'checkEventLoop', cat: 'Performance', name: 'Event Loop' },
                    { id: 'checkMole', cat: 'Pattern', name: 'Mole' },
                    { id: 'checkGhost', cat: 'Pattern', name: 'Ghost' },
                    { id: 'checkTrap', cat: 'Pattern', name: 'Trap' },
                    { id: 'checkSpaghetti', cat: 'Pattern', name: 'Spaghetti' },
                    { id: 'checkMinefield', cat: 'Pattern', name: 'Minefield' },
                    { id: 'checkQsa', cat: 'API', name: 'QSA Star' },
                    { id: 'checkDm', cat: 'API', name: 'DataManager' },
                    { id: 'checkStyle', cat: 'API', name: 'ComputedStyle' },
                    { id: 'checkConsoleError', cat: 'Console', name: 'Errors' },
                    { id: 'checkConsoleWarn', cat: 'Console', name: 'Warnings' },
                    { id: 'checkException', cat: 'Console', name: 'Exceptions' },
                    { id: 'checkEncoding', cat: 'HTML', name: 'Encoding' },
                    { id: 'checkCharset', cat: 'HTML', name: 'Charset' },
                    { id: 'checkTags', cat: 'HTML', name: 'Tags' },
                    { id: 'checkHtmlStructure', cat: 'HTML', name: 'Structure' },
                    { id: 'checkProjectData', cat: 'Data', name: 'ProjectData' },
                    { id: 'checkAppStore', cat: 'Data', name: 'AppStore' },
                    { id: 'checkDataManager', cat: 'Data', name: 'DataManager' },
                    { id: 'checkDataSync', cat: 'Data', name: 'DataSync' },
                    { id: 'checkFileInput', cat: 'Excel', name: 'FileInput' },
                    { id: 'checkUploadHandler', cat: 'Excel', name: 'UploadHandler' },
                    { id: 'checkDownloadFunc', cat: 'Excel', name: 'DownloadFunc' },
                    { id: 'checkLocalStorage', cat: 'Excel', name: 'LocalStorage' },
                    { id: 'checkEnvironment', cat: 'Env', name: 'Environment' },
                    { id: 'checkCloudStatus', cat: 'Env', name: 'CloudStatus' },
                    { id: 'checkHttps', cat: 'Env', name: 'HTTPS' },
                    { id: 'checkGanttContainer', cat: 'Gantt', name: 'Container' },
                    { id: 'checkTimeline', cat: 'Gantt', name: 'Timeline' },
                    { id: 'checkTodayMarker', cat: 'Gantt', name: 'TodayMarker' },
                    { id: 'checkGroupHeaders', cat: 'Gantt', name: 'GroupHeaders' },
                    { id: 'checkFilterSettlement', cat: 'Filter', name: 'Settlement' },
                    { id: 'checkFilterOverview', cat: 'Filter', name: 'Overview' },
                    { id: 'checkFilterSchedule', cat: 'Filter', name: 'Schedule' },
                    { id: 'checkSearchFunc', cat: 'Filter', name: 'Search' },
                    { id: 'checkDataPanel', cat: 'UI', name: 'DataPanel' },
                    { id: 'checkHistoryPanel', cat: 'UI', name: 'HistoryPanel' },
                    { id: 'checkQuickLinks', cat: 'UI', name: 'QuickLinks' },
                    { id: 'checkSettingsMenu', cat: 'UI', name: 'SettingsMenu' },
                    // ì ì¬ì  ì˜¤ë¥˜ ì§„ë‹¨ (5)
                    { id: 'checkEventHandlerRef', cat: 'LatentError', name: 'EventHandlerRef' },
                    { id: 'checkClickSimulation', cat: 'LatentError', name: 'ClickSimulation' },
                    { id: 'checkUndefinedRef', cat: 'LatentError', name: 'UndefinedRef' },
                    { id: 'checkGlobalErrorHandler', cat: 'LatentError', name: 'GlobalErrorHandler' },
                    { id: 'checkLatentErrorSummary', cat: 'LatentError', name: 'Summary' },
                    // ìœ íœ´ ë³µê·€ ì•ˆì •ì„± (5) [v1.7]
                    { id: 'checkPreEmptiveCleanup', cat: 'IdleRecovery', name: 'PreEmptiveCleanup' },
                    { id: 'checkVisibilityController', cat: 'IdleRecovery', name: 'VisibilityController' },
                    { id: 'checkTimerManagerVisibility', cat: 'IdleRecovery', name: 'TimerManagerVisibility' },
                    { id: 'checkObserverPoolStats', cat: 'IdleRecovery', name: 'ObserverPoolStats' },
                    { id: 'checkIdleReadiness', cat: 'IdleRecovery', name: 'IdleReadiness' },
                    // ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì§„ë‹¨ (7) [v1.8]
                    { id: 'checkMemoryHeap', cat: 'MemoryLeak', name: 'HeapUsage' },
                    { id: 'checkMemoryGrowth', cat: 'MemoryLeak', name: 'MemoryGrowth' },
                    { id: 'checkListenerCount', cat: 'MemoryLeak', name: 'ListenerCount' },
                    { id: 'checkTimerLeak', cat: 'MemoryLeak', name: 'TimerLeak' },
                    { id: 'checkWeakRefUsage', cat: 'MemoryLeak', name: 'WeakRefUsage' },
                    { id: 'checkDetachedDOM', cat: 'MemoryLeak', name: 'DetachedDOM' },
                    { id: 'checkMemoryLeakRisk', cat: 'MemoryLeak', name: 'LeakRisk' },
                    // TimerManager ì—°ë™ í™•ëŒ€ (6) [v1.8]
                    { id: 'checkSettlementMonitorV3', cat: 'TimerManagerV18', name: 'SettlementMonitorV3' },
                    { id: 'checkPausableSettlement', cat: 'TimerManagerV18', name: 'PausableSettlement' },
                    { id: 'checkPausableWorkdate', cat: 'TimerManagerV18', name: 'PausableWorkdate' },
                    { id: 'checkPausablePending', cat: 'TimerManagerV18', name: 'PausablePending' },
                    { id: 'checkPausableGantt', cat: 'TimerManagerV18', name: 'PausableGantt' },
                    { id: 'checkV18Readiness', cat: 'TimerManagerV18', name: 'V18Readiness' }
                ];

                checklistMap.forEach(item => {
                    const el = document.getElementById(item.id);
                    if (el) {
                        // Extract status from class name or text (approximated)
                        const isSuccess = el.className.includes('success');
                        const isWarning = el.className.includes('warning');
                        const status = isSuccess ? 'Pass' : isWarning ? 'Warn/Fail' : 'Unknown';
                        const val = el.textContent;
                        csvContent += `"${timestamp}","${item.cat}","${item.name}","${status}","${val}"\n`;
                    }
                });

                // 2. ë¡œê·¸ ìˆ˜ì§‘
                const logDiv = document.getElementById('demoResults');
                if (logDiv) {
                    csvContent += "\n--- Live Demo Execution Log ---\n";
                    csvContent += "Time,Message\n";
                    const lines = logDiv.innerText.split('\n');
                    lines.forEach(l => {
                        if (l.trim()) csvContent += `"${timestamp}","${l.replace(/"/g, '""')}"\n`;
                    });
                }

                // íŒŒì¼ ë‹¤ìš´ë¡œë“œ
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement("a");
                const url = URL.createObjectURL(blob);
                link.setAttribute("href", url);
                link.setAttribute("download", "live_demo_report.csv");
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

                logToDemo('âœ… CSV ë¦¬í¬íŠ¸ ì €ì¥ ì™„ë£Œ', 'success');
            } catch (e) {
                logToDemo('âŒ CSV ì €ì¥ ì‹¤íŒ¨: ' + e.message, 'error');
            }
        }

        // ğŸ”§ NEW(2026-01-22): ë¼ì´ë¸Œ ì§„ë‹¨ ì½˜ì†” ë‚´ìš©ì„ í´ë¦½ë³´ë“œì— ë³µì‚¬
        function copyDemoConsole() {
            try {
                const resultsDiv = document.getElementById('demoResults');
                if (!resultsDiv) {
                    logToDemo('âŒ ì½˜ì†” ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', 'error');
                    return;
                }

                // ì½˜ì†” ë‚´ìš© ì¶”ì¶œ (í…ìŠ¤íŠ¸ë§Œ)
                const consoleText = resultsDiv.innerText;

                if (!consoleText || consoleText.trim().length === 0) {
                    logToDemo('âš ï¸ ë³µì‚¬í•  ì½˜ì†” ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.', 'warning');
                    return;
                }

                // í´ë¦½ë³´ë“œì— ë³µì‚¬
                navigator.clipboard.writeText(consoleText).then(() => {
                    logToDemo('âœ… ì½˜ì†” ë‚´ìš© í´ë¦½ë³´ë“œ ë³µì‚¬ ì™„ë£Œ (' + consoleText.length + 'ì)', 'success');
                }).catch(err => {
                    // í´ë¦½ë³´ë“œ API ì‹¤íŒ¨ ì‹œ ëŒ€ì²´ ë°©ë²• ì‚¬ìš©
                    copyDemoConsoleFallback(consoleText);
                });
            } catch (e) {
                logToDemo('âŒ ì½˜ì†” ë³µì‚¬ ì‹¤íŒ¨: ' + e.message, 'error');
            }
        }

        // í´ë¦½ë³´ë“œ API ì‹¤íŒ¨ ì‹œ ëŒ€ì²´ ë°©ë²• (execCommand ì‚¬ìš©)
        function copyDemoConsoleFallback(text) {
            try {
                const textarea = document.createElement('textarea');
                textarea.value = text;
                textarea.style.position = 'fixed';
                textarea.style.left = '-9999px';
                textarea.style.top = '-9999px';
                document.body.appendChild(textarea);
                textarea.select();
                const success = document.execCommand('copy');
                document.body.removeChild(textarea);

                if (success) {
                    logToDemo('âœ… ì½˜ì†” ë‚´ìš© í´ë¦½ë³´ë“œ ë³µì‚¬ ì™„ë£Œ (ëŒ€ì²´ ë°©ë²•)', 'success');
                } else {
                    logToDemo('âŒ í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨: execCommand ì‹¤íŒ¨', 'error');
                }
            } catch (e) {
                logToDemo('âŒ í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨: ' + e.message, 'error');
            }
        }

        // ========== ì½”ë“œ ë¶„ì„ í—¬í¼ í•¨ìˆ˜ë“¤ (ê°œì„ ë¨: ë¼ì¸ ê°ì§€ + ì£¼ì„ ì œì™¸) ==========

        // [FIX] ì£¼ì„ ì œê±° ìœ í‹¸ë¦¬í‹° (ì „ì—­ ì¬ì‚¬ìš©)
        function removeCommentsFromCode(source) {
            // 1. ë¬¸ìì—´ ë¦¬í„°ëŸ´ ë³´í˜¸ (ì„ì‹œ ì¹˜í™˜)
            const stringPlaceholders = [];
            let protected = source.replace(/(['"`])(?:(?!\1|\\).|\\.)*\1/g, (match) => {
                stringPlaceholders.push(match);
                return `__STR_PLACEHOLDER_${stringPlaceholders.length - 1}__`;
            });
            // 2. í•œì¤„ ì£¼ì„ ì œê±° (// ...)
            protected = protected.replace(/\/\/[^\n]*/g, '');
            // 3. ì—¬ëŸ¬ì¤„ ì£¼ì„ ì œê±° (/* ... */)
            protected = protected.replace(/\/\*[\s\S]*?\*\//g, '');
            // 4. ë¬¸ìì—´ ë³µì›
            protected = protected.replace(/__STR_PLACEHOLDER_(\d+)__/g, (_, idx) => stringPlaceholders[parseInt(idx)]);
            return protected;
        }

        function analyzeCodePatterns(html) {
            // [FIX] ì£¼ì„ ì œê±° í›„ ì‹¤ì œ ì½”ë“œë§Œ ë¶„ì„
            const codeWithoutComments = removeCommentsFromCode(html);

            const findMatches = (regex, source, originalHtml) => {
                const matches = [];
                let match;
                const re = new RegExp(regex, regex.flags.includes('g') ? regex.flags : regex.flags + 'g');
                while ((match = re.exec(source)) !== null) {
                    // ì›ë³¸ HTMLì—ì„œ ìœ„ì¹˜ ì°¾ê¸°
                    const originalIndex = originalHtml.indexOf(match[0], Math.max(0, match.index - 500));
                    matches.push({
                        index: originalIndex >= 0 ? originalIndex : match.index,
                        line: findLineNumber(originalHtml, originalIndex >= 0 ? originalIndex : match.index),
                        text: match[0]
                    });
                }
                return matches;
            };

            const moleRegex = /DataManager\.getProjects\(\)/g;
            const ghostRegex = /return[^;]*;\s*[a-zA-Z]/g;
            const trapRegex = /__measuring\s*=\s*true/g;
            const spaghettiRegex = /\{[^{}]*\{[^{}]*\{[^{}]*\{/g;
            const minefieldRegex = /const\s+\w+\s*=[^;]+;\s*[\s\S]{0,100}\1\s*=/g;

            const moleMatches = findMatches(moleRegex, codeWithoutComments, html);
            const ghostMatches = findMatches(ghostRegex, codeWithoutComments, html);
            const trapMatches = findMatches(trapRegex, codeWithoutComments, html);
            const spaghettiMatches = findMatches(spaghettiRegex, codeWithoutComments, html);
            const minefieldMatches = findMatches(minefieldRegex, codeWithoutComments, html);

            return {
                mole: moleMatches.length > 2,
                moleCount: moleMatches.length,
                moleLines: moleMatches.map(m => m.line),

                ghost: ghostMatches.length > 0,
                ghostCount: ghostMatches.length,
                ghostLines: ghostMatches.map(m => m.line),

                trap: trapMatches.length > 0 && !fullSource.includes('finally'),
                trapCount: trapMatches.length,
                trapLines: trapMatches.map(m => m.line),

                spaghetti: spaghettiMatches.length > 5,
                spaghettiCount: spaghettiMatches.length,
                spaghettiLines: spaghettiMatches.map(m => m.line),

                minefield: minefieldMatches.length > 0,
                minefieldCount: minefieldMatches.length,
                minefieldLines: minefieldMatches.map(m => m.line)
            };
        }

        function analyzeApiPatterns(html) {
            // ì£¼ì„ ì œê±°ëœ ì½”ë“œì—ì„œë§Œ íŒ¨í„´ íƒì§€ (ì¤‘ì•™ í•¨ìˆ˜ ì‚¬ìš©)
            const codeOnly = removeCommentsFromCode(html);

            const findMatches = (regex, source) => {
                const matches = [];
                let match;
                const re = new RegExp(regex, regex.flags.includes('g') ? regex.flags : regex.flags + 'g');
                while ((match = re.exec(source)) !== null) {
                    matches.push({ line: findLineNumber(html, html.indexOf(match[0], Math.max(0, match.index - 100))) });
                }
                return matches;
            };

            const qsaMatches = findMatches(/querySelectorAll\s*\(\s*['"]\*['"]\s*\)/g, codeOnly);
            const dmMatches = findMatches(/DataManager\.getProjects\(\)/g, codeOnly);
            const styleMatches = findMatches(/getComputedStyle/g, codeOnly);

            return {
                qsaStar: qsaMatches.length > 0,
                qsaStarCount: qsaMatches.length,
                qsaLines: qsaMatches.map(m => m.line),

                dmGetProjects: dmMatches.length > 0,
                dmCount: dmMatches.length,
                dmLines: dmMatches.map(m => m.line),

                getComputedStyle: styleMatches.length > 0,
                styleCount: styleMatches.length,
                styleLines: styleMatches.map(m => m.line)
            };
        }

        function analyzeHtmlStructure(html) {
            // ìŠ¤íƒ ê¸°ë°˜ íŒŒì‹±ìœ¼ë¡œ ë‹«íˆì§€ ì•Šì€ íƒœê·¸ ìœ„ì¹˜ ì¶”ì 
            const checkTags = ['div', 'span', 'p', 'section', 'article', 'header', 'footer', 'nav', 'main'];
            const stack = [];
            const errors = [];

            // íƒœê·¸ ë§¤ì¹­ ì •ê·œì‹: <tag...> ë˜ëŠ” </tag>
            const tagRegex = /<\/?([a-z0-9]+)[^>]*>/gi;
            let match;

            while ((match = tagRegex.exec(html)) !== null) {
                const tagFull = match[0];
                const tagName = match[1].toLowerCase();
                const isClose = tagFull.startsWith('</');
                const isSelfClosing = tagFull.endsWith('/>') || ['br', 'hr', 'img', 'input', 'meta', 'link'].includes(tagName);

                if (!checkTags.includes(tagName)) continue;
                if (isSelfClosing) continue;

                if (!isClose) {
                    // Open tag -> push to stack
                    stack.push({ tag: tagName, index: match.index, line: findLineNumber(html, match.index) });
                } else {
                    // Close tag -> pop matching from stack
                    let found = false;
                    // ìŠ¤íƒì„ ë’¤ì—ì„œë¶€í„° ê²€ìƒ‰í•˜ì—¬ ë§¤ì¹­ë˜ëŠ” ê°€ì¥ ê°€ê¹Œìš´ íƒœê·¸ ì°¾ê¸°
                    for (let i = stack.length - 1; i >= 0; i--) {
                        if (stack[i].tag === tagName) {
                            stack.splice(i, 1); // ë§¤ì¹­ëœ íƒœê·¸ ì œê±° (ì¤‘ê°„ì— ìˆëŠ” ê±´ ê±´ë„ˆë›°ì—ˆë‹¤ëŠ” ì˜ë¯¸ -> ì—ëŸ¬)
                            found = true;
                            // ë§¤ì¹­ëœ íƒœê·¸ë³´ë‹¤ ë’¤ì— ìˆë˜(ì•ˆ ë‹«íŒ) íƒœê·¸ë“¤ì€ ì—ëŸ¬ ì²˜ë¦¬ í•„ìš”í•  ìˆ˜ ìˆìŒ (ì—„ê²© ëª¨ë“œë¼ë©´)
                            // ì—¬ê¸°ì„œëŠ” ëŠìŠ¨í•˜ê²Œ ì²˜ë¦¬: ê±´ë„ˆë›´ íƒœê·¸ë“¤ì€ ì¼ë‹¨ ìŠ¤íƒì— ë‘  (ë‚˜ì¤‘ì— ì”ì—¬ë¬¼ë¡œ ì²˜ë¦¬)
                            break;
                        }
                    }
                    if (!found) {
                        // ë‹«ëŠ” íƒœê·¸ì— ë§¤ì¹­ë˜ëŠ” ì—¬ëŠ” íƒœê·¸ê°€ ì—†ìŒ -> ë‹«ëŠ” íƒœê·¸ê°€ ë¶ˆí•„ìš”í•˜ê²Œ ì¡´ì¬
                        errors.push({ type: 'orphan_close', tag: tagName, index: match.index, line: findLineNumber(html, match.index) });
                    }
                }
            }

            // ë£¨í”„ ì¢…ë£Œ í›„ ìŠ¤íƒì— ë‚¨ì€ íƒœê·¸ë“¤ì€ ë‹«íˆì§€ ì•Šì€ íƒœê·¸
            stack.forEach(item => {
                errors.push({ type: 'unclosed', tag: item.tag, index: item.index, line: item.line });
            });

            return {
                utf8: /charset\s*=\s*["']?UTF-8/i.test(html),
                hasCharset: /<meta[^>]*charset/i.test(html),
                unclosedTags: errors.length > 0,
                unclosedCount: errors.length,
                errors: errors, // ìƒì„¸ ì—ëŸ¬ ì •ë³´
                validStructure: html.includes('<html') && html.includes('<head') && html.includes('<body')
            };
        }

        // ========== ì‹œìŠ¤í…œ ìš´ì˜ ë¶„ì„ í—¬í¼ í•¨ìˆ˜ë“¤ ==========

        function analyzeDataPipeline(html) {
            return {
                hasProjectData: html.includes('projectData') || html.includes('window.projectData'),
                hasAppStore: html.includes('AppStore') || html.includes('window.AppStore'),
                hasDataManager: html.includes('DataManager') || html.includes('window.DataManager'),
                dataSync: html.includes('syncData') || html.includes('saveData') || html.includes('loadData') ||
                    html.includes('projectData') // ê¸°ë³¸ì ìœ¼ë¡œ ë°ì´í„° ë³€ìˆ˜ê°€ ìˆìœ¼ë©´ ë™ê¸°í™” ê°€ëŠ¥
            };
        }

        function analyzeExcelFeatures(html) {
            return {
                hasFileInput: html.includes('type="file"') || html.includes("type='file'") ||
                    html.includes('input type=file') || html.includes('<input') && html.includes('file'),
                hasUploadHandler: html.includes('handleFile') || html.includes('onchange=') ||
                    html.includes('FileReader') || html.includes('readAsArrayBuffer') ||
                    html.includes('processExcel') || html.includes('uploadExcel'),
                hasDownloadFunc: html.includes('downloadExcel') || html.includes('exportToExcel') ||
                    html.includes('XLSX.write') || html.includes('saveAs') ||
                    html.includes('generateExcel') || html.includes('toExcel'),
                hasXLSX: html.includes('XLSX') || html.includes('SheetJS') || html.includes('xlsx')
            };
        }

        function checkLocalStorage() {
            try {
                const testKey = '__diagTest__';
                localStorage.setItem(testKey, '1');
                localStorage.removeItem(testKey);
                return true;
            } catch (e) {
                return false;
            }
        }

        function analyzeEnvironment() {
            return {
                isLocal: location.protocol === 'file:',
                isSecure: location.protocol === 'https:',
                isHttp: location.protocol === 'http:',
                hostname: location.hostname || 'local',
                userAgent: navigator.userAgent
            };
        }

        function analyzeGanttFeatures(html) {
            return {
                hasContainer: html.includes('gantt-container') || html.includes('ganttContainer') ||
                    html.includes('gantt-chart') || html.includes('ganttChart') ||
                    html.includes('id="gantt"') || html.includes("id='gantt'"),
                hasTimeline: html.includes('timeline') || html.includes('Timeline') ||
                    html.includes('gantt-header') || html.includes('year-row') ||
                    html.includes('month-row') || html.includes('day-row'),
                hasTodayMarker: html.includes('today-marker') || html.includes('todayMarker') ||
                    html.includes('Today') || html.includes('ì˜¤ëŠ˜') ||
                    html.includes('integrity-today') || html.includes('gantt-today'),
                hasGroupHeaders: html.includes('group-header') || html.includes('groupHeader') ||
                    html.includes('project-group') || html.includes('task-group') ||
                    html.includes('row-group') || html.includes('renderGroup')
            };
        }

        function analyzeFilterFeatures(html) {
            return {
                hasSettlement: html.includes('ì •ì‚°') || html.includes('settlement') ||
                    html.includes('Settlement') || html.includes('ê²°ì œ'),
                hasOverview: html.includes('ì´ê´„') || html.includes('overview') ||
                    html.includes('Overview') || html.includes('ì „ì²´'),
                hasSchedule: html.includes('ì¼ì •') || html.includes('schedule') ||
                    html.includes('Schedule') || html.includes('ê¸°ê°„'),
                hasSearch: html.includes('search') || html.includes('Search') ||
                    html.includes('ê²€ìƒ‰') || html.includes('filter') ||
                    html.includes('Filter') || html.includes('í•„í„°')
            };
        }

        function analyzeUIFeatures(html) {
            return {
                hasDataPanel: html.includes('ë°ì´í„° ê´€ë¦¬') || html.includes('data-panel') ||
                    html.includes('dataPanel') || html.includes('DataManager') ||
                    html.includes('data-management') || html.includes('ë°ì´í„°ê´€ë¦¬'),
                hasHistoryPanel: html.includes('ë³€ê²½ ì´ë ¥') || html.includes('history-panel') ||
                    html.includes('historyPanel') || html.includes('revisionHistory') ||
                    html.includes('revision-history') || html.includes('ì´ë ¥'),
                hasQuickLinks: html.includes('ë°”ë¡œê°€ê¸°') || html.includes('quick-link') ||
                    html.includes('quickLink') || html.includes('shortcut') ||
                    html.includes('navigation') || html.includes('nav-'),
                hasSettings: html.includes('ì„¤ì •') || html.includes('settings') ||
                    html.includes('Settings') || html.includes('ë„êµ¬') ||
                    html.includes('config') || html.includes('preference')
            };
        }

        // ========== ì ì¬ì  ì½˜ì†” ì˜¤ë¥˜ ì§„ë‹¨ í•¨ìˆ˜ë“¤ (ì‹ ê·œ) ==========

        /**
         * ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì°¸ì¡° ê²€ì¦
         * onclick, onchange ë“±ì—ì„œ ì°¸ì¡°í•˜ëŠ” í•¨ìˆ˜ê°€ ì‹¤ì œë¡œ ì •ì˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
         */
        function analyzeEventHandlerReferences(html) {
            const errors = [];
            const warnings = [];

            // 1. ì¸ë¼ì¸ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì¶”ì¶œ (onclick, onchange, oninput, onsubmit, etc.)
            const eventAttrRegex = /on(click|change|input|submit|keyup|keydown|focus|blur|load|mouseover|mouseout)\s*=\s*["']([^"']+)["']/gi;
            let match;

            while ((match = eventAttrRegex.exec(html)) !== null) {
                const eventType = match[1];
                const handlerCode = match[2];
                const line = findLineNumber(html, match.index);

                // í•¨ìˆ˜ í˜¸ì¶œ ì¶”ì¶œ (ì˜ˆ: showSection('demo'), runDiagnostic())
                const funcCallRegex = /([a-zA-Z_$][a-zA-Z0-9_$]*)\s*\(/g;
                let funcMatch;

                while ((funcMatch = funcCallRegex.exec(handlerCode)) !== null) {
                    const funcName = funcMatch[1];

                    // ë‚´ì¥ í•¨ìˆ˜ ë° ê°ì²´ ë©”ì„œë“œ ì œì™¸
                    const builtins = ['alert', 'confirm', 'prompt', 'console', 'document', 'window',
                        'setTimeout', 'setInterval', 'clearTimeout', 'clearInterval',
                        'parseInt', 'parseFloat', 'String', 'Number', 'Boolean', 'Array',
                        'Object', 'Math', 'Date', 'JSON', 'return', 'if', 'else', 'for', 'while'];

                    if (builtins.includes(funcName)) continue;

                    // HTML ë‚´ì—ì„œ í•¨ìˆ˜ ì •ì˜ í™•ì¸
                    const funcDefRegex = new RegExp(`(function\\s+${funcName}\\s*\\(|const\\s+${funcName}\\s*=|let\\s+${funcName}\\s*=|var\\s+${funcName}\\s*=|${funcName}\\s*:\\s*function)`, 'g');

                    if (!funcDefRegex.test(html)) {
                        // ì „ì—­ window ê°ì²´ì—ì„œë„ í™•ì¸
                        try {
                            if (typeof window[funcName] !== 'function') {
                                errors.push({
                                    type: 'undefined_function',
                                    eventType: eventType,
                                    funcName: funcName,
                                    handler: handlerCode,
                                    line: line
                                });
                            }
                        } catch (e) {
                            // window ì ‘ê·¼ ì˜¤ë¥˜ ì‹œ ê²½ê³ ë¡œ ì²˜ë¦¬
                            warnings.push({
                                type: 'check_required',
                                funcName: funcName,
                                line: line
                            });
                        }
                    }
                }
            }

            return {
                hasErrors: errors.length > 0,
                errorCount: errors.length,
                errors: errors,
                warnings: warnings,
                warningCount: warnings.length
            };
        }

        /**
         * í´ë¦­ ì‹œë®¬ë ˆì´ì…˜ í…ŒìŠ¤íŠ¸
         * ëª¨ë“  ë²„íŠ¼ ë° í´ë¦­ ê°€ëŠ¥í•œ ìš”ì†Œì— í”„ë¡œê·¸ë˜ë§¤í‹± í´ë¦­ì„ ì‹¤í–‰í•˜ì—¬ ì˜¤ë¥˜ ê°ì§€
         * 
         * âš ï¸ ì£¼ì˜: ì‹¤ì œë¡œ dispatchEventë¥¼ í˜¸ì¶œí•˜ë¯€ë¡œ ë¶€ì‘ìš©ì´ ìˆëŠ” ë²„íŠ¼
         * (CSV ë‹¤ìš´ë¡œë“œ, íŒŒì¼ ë‚´ë³´ë‚´ê¸°, ëª¨ë‹¬ ì—´ê¸° ë“±)ì€ ë°˜ë“œì‹œ ì œì™¸í•´ì•¼ í•©ë‹ˆë‹¤.
         * âš ï¸ ì™¸ë¶€ HTML ë¶„ì„ ì‹œì—ëŠ” ì‹¤í–‰ ë¶ˆê°€ (í˜„ì¬ í˜ì´ì§€ì—ì„œë§Œ ë™ì‘)
         * 
         * ğŸ”§ FIX(2026-01-22): CSV ìë™ ë‹¤ìš´ë¡œë“œ ë° ëª¨ë‹¬ ìë™ ì˜¤í”ˆ ë¬¸ì œ í•´ê²°
         * - onclick ì†ì„±ì— export, download, CSV, modal, save í‚¤ì›Œë“œê°€ í¬í•¨ëœ ë²„íŠ¼ ì œì™¸
         * - ë¶€ì‘ìš© ë°©ì§€ë¥¼ ìœ„í•´ disabled í´ë˜ìŠ¤ë„ í™•ì¸
         */
        async function runClickSimulationTest() {
            const results = {
                testedCount: 0,
                errorsFound: [],
                skipped: [],
                excludedByKeyword: []  // í‚¤ì›Œë“œë¡œ ì œì™¸ëœ ë²„íŠ¼ ì¶”ì 
            };

            // í…ŒìŠ¤íŠ¸ ì „ ì½˜ì†” ì˜¤ë¥˜ ìƒíƒœ ì €ì¥
            const errorsBefore = diagState.consoleErrors.length;

            // í´ë¦­ ê°€ëŠ¥í•œ ìš”ì†Œ ì„ íƒ (ë²„íŠ¼, ë„¤ë¹„ê²Œì´ì…˜ ë“±)
            const clickableElements = document.querySelectorAll(
                'button:not([disabled]), .nav-btn, [onclick], [role="button"]'
            );

            // í˜„ì¬ ì§„ë‹¨ ë„êµ¬ UIëŠ” ì œì™¸
            const excludeSelectors = ['#__bp_root', '#demoResults', '.modal-overlay', '[class*="diag"]'];

            // âš ï¸ ë¶€ì‘ìš©ì´ ìˆëŠ” ë²„íŠ¼ ì œì™¸ë¥¼ ìœ„í•œ í‚¤ì›Œë“œ ëª©ë¡
            // ì´ í‚¤ì›Œë“œë“¤ì´ onclick ì†ì„±ì´ë‚˜ ë²„íŠ¼ í…ìŠ¤íŠ¸ì— í¬í•¨ë˜ë©´ í´ë¦­ ì‹œë®¬ë ˆì´ì…˜ì—ì„œ ì œì™¸
            const dangerousKeywords = [
                'export', 'download', 'csv', 'save', 'saveAs',  // íŒŒì¼ ë‹¤ìš´ë¡œë“œ ê´€ë ¨
                'modal', 'showCode', 'closeCode', 'openModal',  // ëª¨ë‹¬ ê´€ë ¨
                'upload', 'submit', 'delete', 'remove',         // ë°ì´í„° ë³€ê²½ ê´€ë ¨
                'copy', 'clipboard',                            // í´ë¦½ë³´ë“œ ê´€ë ¨
                'navigate', 'redirect', 'href',                 // í˜ì´ì§€ ì´ë™ ê´€ë ¨
                'runFull', 'runLatent', 'runClick'              // ì§„ë‹¨ í•¨ìˆ˜ ì¬ê·€ í˜¸ì¶œ ë°©ì§€
            ];

            for (const el of clickableElements) {
                // ì§„ë‹¨ ë„êµ¬ ìì²´ UI ì œì™¸
                if (excludeSelectors.some(sel => el.closest(sel))) {
                    results.skipped.push(el);
                    continue;
                }

                // ì‹œê°ì ìœ¼ë¡œ ë³´ì´ì§€ ì•ŠëŠ” ìš”ì†Œ ì œì™¸
                const style = window.getComputedStyle(el);
                if (style.display === 'none' || style.visibility === 'hidden' || style.opacity === '0') {
                    results.skipped.push(el);
                    continue;
                }

                // âš ï¸ ë¶€ì‘ìš©ì´ ìˆëŠ” ë²„íŠ¼ ì œì™¸ (í‚¤ì›Œë“œ ê¸°ë°˜)
                const onclickAttr = (el.getAttribute('onclick') || '').toLowerCase();
                const buttonText = (el.textContent || '').toLowerCase();
                const buttonId = (el.id || '').toLowerCase();
                // [FIX] SVG ìš”ì†Œì˜ classNameì€ SVGAnimatedString ê°ì²´ì´ë¯€ë¡œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬
                const rawClassName = el.className;
                const buttonClass = (typeof rawClassName === 'string' ? rawClassName :
                    (rawClassName && rawClassName.baseVal ? rawClassName.baseVal :
                    (el.classList ? Array.from(el.classList).join(' ') : ''))).toLowerCase();

                const hasDangerousKeyword = dangerousKeywords.some(keyword =>
                    onclickAttr.includes(keyword.toLowerCase()) ||
                    buttonText.includes(keyword.toLowerCase()) ||
                    buttonId.includes(keyword.toLowerCase()) ||
                    buttonClass.includes(keyword.toLowerCase())
                );

                if (hasDangerousKeyword) {
                    results.excludedByKeyword.push({
                        element: el.tagName + (el.id ? '#' + el.id : ''),
                        reason: 'dangerous_keyword'
                    });
                    results.skipped.push(el);
                    continue;
                }

                // .view-code-btn í´ë˜ìŠ¤ ë²„íŠ¼ ì œì™¸ (ì½”ë“œ ë³´ê¸° ë²„íŠ¼)
                if (el.classList.contains('view-code-btn')) {
                    results.skipped.push(el);
                    continue;
                }

                results.testedCount++;

                // [FIX] SVG ìš”ì†Œ className ì•ˆì „ ì²˜ë¦¬ í—¬í¼
                const getElClassName = (elem) => {
                    const cn = elem.className;
                    if (!cn) return '';
                    if (typeof cn === 'string') return cn.split(' ')[0];
                    if (cn.baseVal) return cn.baseVal.split(' ')[0];
                    if (elem.classList && elem.classList.length > 0) return elem.classList[0];
                    return '';
                };

                try {
                    // ì˜¤ë¥˜ ìº¡ì²˜ ì„ì‹œ í”Œë˜ê·¸
                    const tempErrorHandler = (e) => {
                        const elClass = getElClassName(el);
                        results.errorsFound.push({
                            element: el.tagName + (el.id ? '#' + el.id : '') + (elClass ? '.' + elClass : ''),
                            error: e.message || e.toString(),
                            onclick: el.getAttribute('onclick') || 'N/A'
                        });
                    };

                    window.addEventListener('error', tempErrorHandler, true);

                    // í´ë¦­ ì´ë²¤íŠ¸ ë°œìƒ (ì‹¤ì œ ë™ì‘ì€ ë°©ì§€)
                    const event = new MouseEvent('click', {
                        bubbles: true,
                        cancelable: true,
                        view: window
                    });

                    // dispatchEventë¡œ í´ë¦­ ì‹œë®¬ë ˆì´ì…˜
                    el.dispatchEvent(event);

                    // ì§§ì€ ëŒ€ê¸°ë¡œ ë¹„ë™ê¸° ì˜¤ë¥˜ ìº¡ì²˜
                    await new Promise(resolve => setTimeout(resolve, 10));

                    window.removeEventListener('error', tempErrorHandler, true);

                } catch (err) {
                    const elClass = getElClassName(el);
                    results.errorsFound.push({
                        element: el.tagName + (el.id ? '#' + el.id : '') + (elClass ? '.' + elClass : ''),
                        error: err.message || err.toString(),
                        onclick: el.getAttribute('onclick') || 'N/A'
                    });
                }
            }

            // í…ŒìŠ¤íŠ¸ í›„ ìƒˆë¡œ ë°œìƒí•œ ì½˜ì†” ì˜¤ë¥˜ í™•ì¸
            const newConsoleErrors = diagState.consoleErrors.length - errorsBefore;
            if (newConsoleErrors > 0) {
                results.newConsoleErrors = newConsoleErrors;
            }

            return results;
        }

        /**
         * undefined ë³€ìˆ˜ ì°¸ì¡° íŒ¨í„´ íƒì§€
         * ì •ì  ë¶„ì„ìœ¼ë¡œ ì •ì˜ë˜ì§€ ì•Šì€ ë³€ìˆ˜ ì°¸ì¡° ê°€ëŠ¥ì„± íƒì§€
         * [FIX] ì£¼ì„ ì œê±° í›„ ì‹¤ì œ ì½”ë“œë§Œ ë¶„ì„
         */
        function analyzeUndefinedReferences(html) {
            const issues = [];

            // ìŠ¤í¬ë¦½íŠ¸ ë¸”ë¡ ì¶”ì¶œ
            const scripts = html.match(/<script[^>]*>([\s\S]*?)<\/script>/gi) || [];
            let rawScriptContent = scripts.map(s => s.replace(/<\/?script[^>]*>/gi, '')).join('\n');

            // [FIX] ì£¼ì„ ì œê±°í•˜ì—¬ ì˜¤íƒ ë°©ì§€
            let scriptContent = rawScriptContent;
            if (typeof removeCommentsFromCode === 'function') {
                scriptContent = removeCommentsFromCode(rawScriptContent);
            }

            // 1. ì„ ì–¸ ì—†ì´ ì‚¬ìš©ë˜ëŠ” ë³€ìˆ˜ íŒ¨í„´ (ê°„ë‹¨í•œ íœ´ë¦¬ìŠ¤í‹±)
            // ì˜ˆ: í•¨ìˆ˜ ë‚´ì—ì„œ this.xxx í˜¸ì¶œ ì‹œ xxxê°€ ì •ì˜ë˜ì§€ ì•Šì€ ê²½ìš°

            // 2. ì¡´ì¬í•˜ì§€ ì•ŠëŠ” DOM ìš”ì†Œ ì°¸ì¡° íŒ¨í„´
            const getByIdRegex = /getElementById\s*\(\s*['"]([^'"]+)['"]\s*\)/g;
            let getByIdMatch;
            while ((getByIdMatch = getByIdRegex.exec(scriptContent)) !== null) {
                const elementId = getByIdMatch[1];
                // HTMLì—ì„œ í•´ë‹¹ ID ì¡´ì¬ ì—¬ë¶€ í™•ì¸
                const idExistsRegex = new RegExp(`id\\s*=\\s*["']${elementId}["']`, 'i');
                if (!idExistsRegex.test(html)) {
                    issues.push({
                        type: 'missing_element_id',
                        id: elementId,
                        line: findLineNumber(html, html.indexOf(getByIdMatch[0]))
                    });
                }
            }

            // 3. typo ê°€ëŠ¥ì„±ì´ ìˆëŠ” íŒ¨í„´ (docment, widnow ë“±)
            // [FIX] ì£¼ì„ì´ ì œê±°ëœ scriptContentì—ì„œë§Œ ê²€ì‚¬í•˜ì—¬ ì˜¤íƒ ë°©ì§€
            const commonTypos = [
                { typo: 'docment', correct: 'document' },
                { typo: 'widnow', correct: 'window' },
                { typo: 'cosole', correct: 'console' },
                { typo: 'fucntion', correct: 'function' },
                { typo: 'retrun', correct: 'return' },
                { typo: 'vaule', correct: 'value' },
                { typo: 'lenght', correct: 'length' },
                { typo: 'inlcudes', correct: 'includes' },
                { typo: 'quey', correct: 'query' }
            ];

            commonTypos.forEach(({ typo, correct }) => {
                const typoRegex = new RegExp(`\\b${typo}\\b`, 'gi');
                // [FIX] ì£¼ì„ ì œê±°ëœ ì½”ë“œì—ì„œë§Œ ê²€ì‚¬
                if (typoRegex.test(scriptContent)) {
                    typoRegex.lastIndex = 0; // ì •ê·œì‹ ì¬ì‚¬ìš©ì„ ìœ„í•´ ì´ˆê¸°í™”
                    const match = typoRegex.exec(scriptContent);
                    issues.push({
                        type: 'typo',
                        found: typo,
                        suggestion: correct,
                        line: match ? findLineNumber(rawScriptContent, rawScriptContent.indexOf(typo)) : 0
                    });
                }
            });

            // 4. ì •ì˜ ì „ ì‚¬ìš© íŒ¨í„´ (í•¨ìˆ˜ í˜¸ì¶œì´ ì •ì˜ë³´ë‹¤ ì•ì— ìˆëŠ” ê²½ìš°, í˜¸ì´ìŠ¤íŒ… ê³ ë ¤)
            // ì´ ë¶„ì„ì€ ë³µì¡í•˜ë¯€ë¡œ ê°„ë‹¨í•œ íŒ¨í„´ë§Œ í™•ì¸

            // 5. ì„ ì–¸ë˜ì§€ ì•Šì€ ì „ì—­ ë³€ìˆ˜ ì‚¬ìš© (var/let/const ì—†ì´ í• ë‹¹)
            const undeclaredAssignRegex = /^\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\s*=\s*[^=]/gm;
            let undeclaredMatch;
            while ((undeclaredMatch = undeclaredAssignRegex.exec(scriptContent)) !== null) {
                const varName = undeclaredMatch[1];
                // ì´ë¯¸ ì„ ì–¸ëœ ë³€ìˆ˜ì¸ì§€ í™•ì¸
                const declaredRegex = new RegExp(`(var|let|const)\\s+${varName}\\b`, 'g');
                const windowPropRegex = new RegExp(`window\\.${varName}\\b`, 'g');
                const paramRegex = new RegExp(`function[^(]*\\([^)]*${varName}[^)]*\\)`, 'g');

                if (!declaredRegex.test(scriptContent) && !windowPropRegex.test(scriptContent) && !paramRegex.test(scriptContent)) {
                    // ë‚´ì¥ ì „ì—­ ë³€ìˆ˜ ì œì™¸
                    const builtins = ['window', 'document', 'console', 'navigator', 'location', 'history',
                        'performance', 'localStorage', 'sessionStorage', 'alert', 'confirm'];
                    if (!builtins.includes(varName)) {
                        issues.push({
                            type: 'undeclared_global',
                            varName: varName,
                            line: findLineNumber(scriptContent, undeclaredMatch.index)
                        });
                    }
                }
            }

            return {
                hasIssues: issues.length > 0,
                issueCount: issues.length,
                issues: issues
            };
        }

        /**
         * ì „ì—­ ì˜ˆì™¸ í•¸ë“¤ëŸ¬ ìƒíƒœ í™•ì¸
         * [FIX] ì‹¤ì œ í• ë‹¹ íŒ¨í„´ë§Œ íƒì§€ (ì£¼ì„/ë¬¸ìì—´ ì œì™¸)
         */
        function checkGlobalErrorHandlers(html) {
            // ì£¼ì„ ì œê±° í›„ ì‹¤ì œ ì½”ë“œì—ì„œë§Œ ê²€ì‚¬ (ì¤‘ì•™ í•¨ìˆ˜ ì‚¬ìš©)
            const codeOnly = removeCommentsFromCode(html);

            // ì‹¤ì œ í• ë‹¹ íŒ¨í„´ íƒì§€ (window.onerror = function ë“±)
            const onerrorAssignPattern = /window\.onerror\s*=\s*function|onerror\s*=\s*function|window\.onerror\s*=\s*\(/;
            const rejectionAssignPattern = /window\.onunhandledrejection\s*=\s*function|onunhandledrejection\s*=\s*function|window\.onunhandledrejection\s*=\s*\(/;
            const addEventPattern = /addEventListener\s*\(\s*['"](?:error|unhandledrejection)['"]/;

            return {
                hasWindowOnerror: onerrorAssignPattern.test(codeOnly) || (addEventPattern.test(codeOnly) && codeOnly.includes("'error'")),
                hasUnhandledRejection: rejectionAssignPattern.test(codeOnly) || (addEventPattern.test(codeOnly) && codeOnly.includes("'unhandledrejection'")),
                hasTryCatch: codeOnly.includes('try {') || codeOnly.includes('try{'),
                hasErrorBoundary: codeOnly.includes('ErrorBoundary') || codeOnly.includes('error-boundary'),

                // ê¶Œì¥ ì‚¬í•­
                recommendations: []
            };
        }

        /**
         * ì ì¬ì  ì½˜ì†” ì˜¤ë¥˜ ì¢…í•© ì§„ë‹¨ ì‹¤í–‰
         */
        async function runLatentErrorDiagnostic(targetHtml) {
            const results = {
                handlerCheck: null,
                clickSimulation: null,
                undefinedRefs: null,
                globalHandlers: null,
                totalIssues: 0
            };

            logToDemo('', 'info');
            logToDemo('â”â”â” ğŸ”® ì ì¬ì  ì½˜ì†” ì˜¤ë¥˜ ì§„ë‹¨ (5ê°œ) â”â”â”', 'header');

            // 1. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì°¸ì¡° ê²€ì¦
            results.handlerCheck = analyzeEventHandlerReferences(targetHtml);
            const handlerOk = !results.handlerCheck.hasErrors;
            updateChecklist('checkEventHandlerRef', handlerOk,
                handlerOk ? 'âœ… ì •ìƒ' : `âš ï¸ ${results.handlerCheck.errorCount}ê±´`);
            logToDemo(`ğŸ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì°¸ì¡°: ${handlerOk ? 'âœ… ëª¨ë‘ ì •ìƒ' : `âš ï¸ ${results.handlerCheck.errorCount}ê±´ ë¬¸ì œ ê°ì§€`}`,
                handlerOk ? 'success' : 'warning');

            if (!handlerOk) {
                results.handlerCheck.errors.slice(0, 5).forEach(err => {
                    logToDemo(`  â€¢ Line ${err.line}: ${err.funcName}() í•¨ìˆ˜ ë¯¸ì •ì˜ (${err.eventType} ì´ë²¤íŠ¸)`,
                        'warning', { label: 'ğŸ” ì½”ë“œ ë³´ê¸°', line: err.line });
                });
                if (results.handlerCheck.errors.length > 5) {
                    logToDemo(`  â€¢ ... ì™¸ ${results.handlerCheck.errors.length - 5}ê±´`, 'info');
                }
                results.totalIssues += results.handlerCheck.errorCount;
            }

            await sleep(30);

            // 2. í´ë¦­ ì‹œë®¬ë ˆì´ì…˜ í…ŒìŠ¤íŠ¸ (í˜„ì¬ í˜ì´ì§€ì—ì„œë§Œ)
            const isCurrentPage = !diagState.uploadedHtml;
            if (isCurrentPage) {
                results.clickSimulation = await runClickSimulationTest();
                const clickOk = results.clickSimulation.errorsFound.length === 0;
                updateChecklist('checkClickSimulation', clickOk,
                    clickOk ? `âœ… ${results.clickSimulation.testedCount}ê°œ í†µê³¼` :
                        `âš ï¸ ${results.clickSimulation.errorsFound.length}ê±´ ì˜¤ë¥˜`);
                logToDemo(`ğŸ–±ï¸ í´ë¦­ ì‹œë®¬ë ˆì´ì…˜: ${clickOk ?
                    `âœ… ${results.clickSimulation.testedCount}ê°œ ìš”ì†Œ í…ŒìŠ¤íŠ¸ í†µê³¼` :
                    `âš ï¸ ${results.clickSimulation.errorsFound.length}ê±´ ì˜¤ë¥˜ ë°œê²¬`}`,
                    clickOk ? 'success' : 'warning');

                if (!clickOk) {
                    results.clickSimulation.errorsFound.slice(0, 5).forEach(err => {
                        logToDemo(`  â€¢ ${err.element}: ${err.error.substring(0, 60)}...`, 'warning');
                    });
                    results.totalIssues += results.clickSimulation.errorsFound.length;
                }
            } else {
                updateChecklist('checkClickSimulation', true, 'â­ï¸ ì™¸ë¶€ íŒŒì¼');
                logToDemo('ğŸ–±ï¸ í´ë¦­ ì‹œë®¬ë ˆì´ì…˜: â­ï¸ ì™¸ë¶€ íŒŒì¼ ë¶„ì„ ì‹œ ê±´ë„ˆëœ€ (í˜„ì¬ í˜ì´ì§€ì—ì„œë§Œ ê°€ëŠ¥)', 'info');
            }

            await sleep(30);

            // 3. undefined ë³€ìˆ˜ ì°¸ì¡° íƒì§€
            results.undefinedRefs = analyzeUndefinedReferences(targetHtml);
            const undefOk = !results.undefinedRefs.hasIssues;
            updateChecklist('checkUndefinedRef', undefOk,
                undefOk ? 'âœ… ì—†ìŒ' : `âš ï¸ ${results.undefinedRefs.issueCount}ê±´`);
            logToDemo(`âš¡ undefined ì°¸ì¡°: ${undefOk ? 'âœ… ë¬¸ì œ ì—†ìŒ' : `âš ï¸ ${results.undefinedRefs.issueCount}ê±´ ë°œê²¬`}`,
                undefOk ? 'success' : 'warning');

            if (!undefOk) {
                results.undefinedRefs.issues.slice(0, 5).forEach(issue => {
                    if (issue.type === 'missing_element_id') {
                        logToDemo(`  â€¢ getElementById('${issue.id}'): í•´ë‹¹ ID ë¯¸ë°œê²¬`, 'warning',
                            { label: 'ğŸ” ì½”ë“œ ë³´ê¸°', line: issue.line });
                    } else if (issue.type === 'typo') {
                        logToDemo(`  â€¢ '${issue.found}' â†’ '${issue.suggestion}'ë¡œ ìˆ˜ì • í•„ìš”`, 'warning');
                    } else if (issue.type === 'undeclared_global') {
                        logToDemo(`  â€¢ '${issue.varName}' ì„ ì–¸ ì—†ì´ ì‚¬ìš©ë¨`, 'warning');
                    }
                });
                if (results.undefinedRefs.issues.length > 5) {
                    logToDemo(`  â€¢ ... ì™¸ ${results.undefinedRefs.issues.length - 5}ê±´`, 'info');
                }
                results.totalIssues += results.undefinedRefs.issueCount;
            }

            await sleep(30);

            // 4. ì „ì—­ ì˜ˆì™¸ í•¸ë“¤ëŸ¬ ìƒíƒœ
            results.globalHandlers = checkGlobalErrorHandlers(targetHtml);
            const hasHandlers = results.globalHandlers.hasWindowOnerror || results.globalHandlers.hasUnhandledRejection;
            updateChecklist('checkGlobalErrorHandler', hasHandlers,
                hasHandlers ? 'âœ… ì„¤ì •ë¨' : 'âš ï¸ ë¯¸ì„¤ì •');
            logToDemo(`ğŸ›¡ï¸ ì „ì—­ ì˜ˆì™¸ í•¸ë“¤ëŸ¬: ${hasHandlers ? 'âœ… ì„¤ì •ë¨' : 'âš ï¸ ë¯¸ì„¤ì • (ê¶Œì¥: window.onerror ì¶”ê°€)'}`,
                hasHandlers ? 'success' : 'warning');

            if (!hasHandlers) {
                logToDemo('  â€¢ ê¶Œì¥: window.onerror ë° onunhandledrejection í•¸ë“¤ëŸ¬ ì¶”ê°€', 'info');
                results.totalIssues += 1;
            }

            await sleep(30);

            // 5. ì ì¬ì  ì˜¤ë¥˜ ìš”ì•½
            const summaryOk = results.totalIssues === 0;
            updateChecklist('checkLatentErrorSummary', summaryOk,
                summaryOk ? 'âœ… ì•ˆì „' : `âš ï¸ ${results.totalIssues}ê±´ ì£¼ì˜`);
            logToDemo(`ğŸ“‹ ì ì¬ì  ì˜¤ë¥˜ ìš”ì•½: ${summaryOk ?
                'âœ… ì ì¬ì  ì½˜ì†” ì˜¤ë¥˜ ìœ„í—˜ ì—†ìŒ' :
                `âš ï¸ ì´ ${results.totalIssues}ê±´ì˜ ì ì¬ì  ë¬¸ì œ ë°œê²¬`}`,
                summaryOk ? 'success' : 'warning');

            return results;
        }

        // ========== [v1.7] ìœ íœ´ ë³µê·€ ì•ˆì •ì„± ë¶„ì„ í•¨ìˆ˜ë“¤ ==========

        /**
         * ìœ íœ´ ë³µê·€ ì•ˆì •ì„± ë¶„ì„
         * v1.7 ì„ ì œì  ì •ë¦¬ ëª¨ë“ˆì˜ ì¡´ì¬ ë° ì˜¬ë°”ë¥¸ êµ¬í˜„ ì—¬ë¶€ í™•ì¸
         */
        function analyzeIdleRecoveryFeatures(html) {
            // ì£¼ì„ ì œê±° í›„ ì‹¤ì œ ì½”ë“œë§Œ ë¶„ì„
            const codeOnly = removeCommentsFromCode(html);

            return {
                // 1. __preEmptiveCleanup í•¨ìˆ˜ ì¡´ì¬ í™•ì¸
                hasPreEmptiveCleanup: codeOnly.includes('__preEmptiveCleanup') &&
                    (codeOnly.includes('window.__preEmptiveCleanup') || codeOnly.includes('function __preEmptiveCleanup')),

                // 2. VisibilityCleanupController ì¡´ì¬ í™•ì¸
                hasVisibilityController: codeOnly.includes('VisibilityCleanupController') &&
                    (codeOnly.includes('window.VisibilityCleanupController') || codeOnly.includes('function VisibilityCleanupController')),

                // 3. TimerManager visibilitychange ì—°ë™ í™•ì¸
                hasTimerManagerVisibility: (codeOnly.includes('TimerManager') || codeOnly.includes('TM.')) &&
                    codeOnly.includes('visibilitychange') &&
                    (codeOnly.includes('pauseAll') || codeOnly.includes('resumeAll')),

                // 4. ObserverPool ì¡´ì¬ ë° ì •ë¦¬ ë©”ì„œë“œ í™•ì¸
                hasObserverPool: codeOnly.includes('ObserverPool') &&
                    (codeOnly.includes('cleanupStale') || codeOnly.includes('unregisterByPrefix')),

                // 5. ìœ íœ´ ì§„ì… ì‹œ ì„ ì œì  ì •ë¦¬ íŒ¨í„´ í™•ì¸
                hasPreEmptivePattern: codeOnly.includes('document.hidden') &&
                    codeOnly.includes('__preEmptiveCleanup') &&
                    codeOnly.includes('Pre-emptive'),

                // 6. ë³µê·€ ì‹œ ì¦‰ì‹œ ì¬ê°œ íŒ¨í„´ í™•ì¸ (ì§€ì—° ì—†ìŒ)
                hasInstantResume: codeOnly.includes('Instant resume') ||
                    (codeOnly.includes('visibilitychange') && codeOnly.includes('resumeAll') &&
                     !codeOnly.includes('setTimeout') && !codeOnly.includes('_resumeWithDelay')),

                // 7. ì£¼ê¸°ì  Stale ì •ë¦¬ í™•ì¸ (1ë¶„/10ê°œ íŒ¨í„´)
                hasPeriodicCleanup: codeOnly.includes('setInterval') &&
                    (codeOnly.includes('cleanupStale') || codeOnly.includes('60000') || codeOnly.includes('60 * 1000')),

                // 8. EventHub WeakMap ê¸°ë°˜ í™•ì¸
                hasEventHubWeakMap: codeOnly.includes('EventHub') &&
                    codeOnly.includes('WeakMap'),

                // 9. requestIdleCallback ì‚¬ìš© í™•ì¸
                hasIdleCallback: codeOnly.includes('requestIdleCallback'),

                // 10. FilterRenderManager ì¡´ì¬ í™•ì¸
                hasFilterRenderManager: codeOnly.includes('FilterRenderManager')
            };
        }

        /**
         * [v1.7] ìœ íœ´ ë³µê·€ ì•ˆì •ì„± ì¢…í•© ì§„ë‹¨ ì‹¤í–‰
         */
        async function runIdleRecoveryDiagnostic(targetHtml) {
            const results = {
                features: null,
                runtimeCheck: null,
                totalIssues: 0
            };

            logToDemo('', 'info');
            logToDemo('â”â”â” ğŸ”„ ìœ íœ´ ë³µê·€ ì•ˆì •ì„± (5ê°œ) [v1.7] â”â”â”', 'header');
            logToDemo('â€» 30ì´ˆ+ ìœ íœ´ í›„ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ë¥¼ ì§„ë‹¨í•©ë‹ˆë‹¤.', 'info');

            // ì •ì  ë¶„ì„
            results.features = analyzeIdleRecoveryFeatures(targetHtml);

            // 1. ì„ ì œì  ì •ë¦¬ í•¨ìˆ˜ (__preEmptiveCleanup)
            const hasPreEmptive = results.features.hasPreEmptiveCleanup;
            // ëŸ°íƒ€ì„ ì²´í¬ë„ ì¶”ê°€ (í˜„ì¬ í˜ì´ì§€ì—ì„œ ì‹¤í–‰ ì‹œ)
            const runtimePreEmptive = typeof window.__preEmptiveCleanup === 'function';
            const preEmptiveOk = hasPreEmptive || runtimePreEmptive;

            updateChecklist('checkPreEmptiveCleanup', preEmptiveOk,
                preEmptiveOk ? 'âœ… ì¡´ì¬' : 'âŒ ë¯¸ì¡´ì¬');
            logToDemo(`ğŸ§¹ ì„ ì œì  ì •ë¦¬ í•¨ìˆ˜: ${preEmptiveOk ?
                'âœ… __preEmptiveCleanup ì¡´ì¬' :
                'âŒ __preEmptiveCleanup ë¯¸ì¡´ì¬ (v1.7 í•„ìˆ˜)'}`,
                preEmptiveOk ? 'success' : 'error');

            if (!preEmptiveOk) {
                logToDemo('  â€¢ í•„ìš”: ìœ íœ´ ì§„ì… ì‹œ ëª¨ë“  ì •ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” í•¨ìˆ˜', 'warning');
                logToDemo('  â€¢ ì°¸ì¡°: ê°€ì´ë“œë¼ì¸ ì„¹ì…˜ 5 [v1.7] ì„ ì œì  ì •ë¦¬ ëª¨ë“ˆ', 'info');
                results.totalIssues++;
            }

            await sleep(20);

            // 2. VisibilityCleanupController
            const hasVisController = results.features.hasVisibilityController;
            const runtimeVisController = typeof window.VisibilityCleanupController !== 'undefined';
            const visControllerOk = hasVisController || runtimeVisController;

            updateChecklist('checkVisibilityController', visControllerOk,
                visControllerOk ? 'âœ… ì¡´ì¬' : 'âŒ ë¯¸ì¡´ì¬');
            logToDemo(`ğŸ‘ï¸ VisibilityCleanupController: ${visControllerOk ?
                'âœ… ì„¤ì¹˜ë¨' :
                'âŒ ë¯¸ì„¤ì¹˜ (v1.6+ í•„ìˆ˜)'}`,
                visControllerOk ? 'success' : 'error');

            if (!visControllerOk) {
                logToDemo('  â€¢ í•„ìš”: ìœ íœ´ ì‹œê°„ ì¶”ì  ë° ì •ë¦¬ ë ˆë²¨ ì œì–´', 'warning');
                results.totalIssues++;
            }

            await sleep(20);

            // 3. TimerManager visibilitychange ì—°ë™
            const hasTmVisibility = results.features.hasTimerManagerVisibility;
            const runtimeTm = typeof window.TimerManager !== 'undefined' ||
                (typeof window.TM !== 'undefined' && typeof window.TM.pauseAll === 'function');
            const tmVisibilityOk = hasTmVisibility || runtimeTm;

            updateChecklist('checkTimerManagerVisibility', tmVisibilityOk,
                tmVisibilityOk ? 'âœ… ì—°ë™ë¨' : 'âš ï¸ ë¯¸ì—°ë™');
            logToDemo(`â±ï¸ TimerManager ì—°ë™: ${tmVisibilityOk ?
                'âœ… Page Visibility ì—°ë™ë¨' :
                'âš ï¸ ë¯¸ì—°ë™ (íƒ­ ë¹„í™œì„±í™” ì‹œ íƒ€ì´ë¨¸ ê³„ì† ì‹¤í–‰)'}`,
                tmVisibilityOk ? 'success' : 'warning');

            if (!tmVisibilityOk) {
                logToDemo('  â€¢ í•„ìš”: visibilitychange ì´ë²¤íŠ¸ì—ì„œ pauseAll/resumeAll í˜¸ì¶œ', 'warning');
                results.totalIssues++;
            }

            await sleep(20);

            // 4. ObserverPool í†µê³„ (ëŸ°íƒ€ì„ ì²´í¬)
            let observerCount = 0;
            let observerOk = true;
            let observerMsg = 'âœ… ì •ìƒ';

            // ëŸ°íƒ€ì„ ì²´í¬ ì‹œë„
            if (typeof window.ObserverPool !== 'undefined') {
                try {
                    if (typeof window.ObserverPool.getAllStats === 'function') {
                        const stats = window.ObserverPool.getAllStats();
                        observerCount = stats.total || 0;
                        observerOk = observerCount < 10;
                        observerMsg = observerOk ?
                            `âœ… ${observerCount}ê°œ (< 10)` :
                            `âš ï¸ ${observerCount}ê°œ (â‰¥ 10)`;
                    } else if (typeof window.ObserverPool.getPerElementStats === 'function') {
                        const stats = window.ObserverPool.getPerElementStats();
                        observerCount = stats.count || 0;
                        observerOk = observerCount < 10;
                        observerMsg = observerOk ?
                            `âœ… ${observerCount}ê°œ (< 10)` :
                            `âš ï¸ ${observerCount}ê°œ (â‰¥ 10)`;
                    }
                } catch (e) {
                    observerMsg = 'âš ï¸ í†µê³„ ì¡°íšŒ ì‹¤íŒ¨';
                }
            } else if (results.features.hasObserverPool) {
                observerMsg = 'ì •ë³´: ì •ì  ë¶„ì„ë§Œ (ObserverPool ì¡´ì¬ í™•ì¸ë¨)';
            } else {
                observerMsg = 'âš ï¸ ObserverPool ë¯¸ì¡´ì¬';
                observerOk = false;
            }

            updateChecklist('checkObserverPoolStats', observerOk, observerMsg);
            logToDemo(`ğŸ“Š ObserverPool í†µê³„: ${observerMsg}`,
                observerOk ? 'success' : 'warning');

            if (!observerOk) {
                logToDemo('  â€¢ ê¶Œì¥: ObserverPool.cleanupStale() ì£¼ê¸°ì  ì‹¤í–‰', 'warning');
                logToDemo('  â€¢ ê¸°ì¤€: Observer ì´ ê°œìˆ˜ < 10ê°œ', 'info');
                results.totalIssues++;
            }

            await sleep(20);

            // 5. ìœ íœ´ ë³µê·€ ì¦‰ì‹œ ì‚¬ìš© ì¤€ë¹„ ìƒíƒœ (ì¢…í•©)
            const hasPreEmptivePattern = results.features.hasPreEmptivePattern;
            const hasInstantResume = results.features.hasInstantResume || results.features.hasPreEmptiveCleanup;

            const idleReadinessScore = [
                preEmptiveOk,
                visControllerOk,
                tmVisibilityOk,
                hasPreEmptivePattern || hasInstantResume,
                results.features.hasPeriodicCleanup || results.features.hasIdleCallback
            ].filter(Boolean).length;

            const idleReadinessOk = idleReadinessScore >= 4;

            updateChecklist('checkIdleReadiness', idleReadinessOk,
                idleReadinessOk ? `âœ… ì¤€ë¹„ (${idleReadinessScore}/5)` : `âš ï¸ ë¯¸í¡ (${idleReadinessScore}/5)`);
            logToDemo(`âš¡ ìœ íœ´ ë³µê·€ ì¦‰ì‹œ ì‚¬ìš©: ${idleReadinessOk ?
                `âœ… ì¤€ë¹„ ì™„ë£Œ (${idleReadinessScore}/5 í•­ëª© í†µê³¼)` :
                `âš ï¸ ë¯¸í¡ (${idleReadinessScore}/5 í•­ëª©ë§Œ í†µê³¼)`}`,
                idleReadinessOk ? 'success' : 'warning');

            if (!idleReadinessOk) {
                logToDemo('  â€¢ v1.7 ì„ ì œì  ì •ë¦¬ íŒ¨í„´ ì ìš© ê¶Œì¥', 'warning');
                logToDemo('  â€¢ ì›ë¦¬: ìœ íœ´ ì§„ì… ì‹œ ì •ë¦¬ ì™„ë£Œ â†’ ë³µê·€ ì‹œ ì§€ì—° 0ms', 'info');
                results.totalIssues++;

                // ì„¸ë¶€ ìƒíƒœ í‘œì‹œ
                if (!hasPreEmptivePattern) {
                    logToDemo('  â€¢ ëˆ„ë½: ì„ ì œì  ì •ë¦¬ íŒ¨í„´ (ìœ íœ´ ì§„ì… ì‹œ __preEmptiveCleanup í˜¸ì¶œ)', 'warning');
                }
                if (!results.features.hasPeriodicCleanup) {
                    logToDemo('  â€¢ ëˆ„ë½: ì£¼ê¸°ì  Stale ì •ë¦¬ (1ë¶„/10ê°œ)', 'warning');
                }
            }

            return results;
        }

        /**
         * [v1.8] TimerManager ì—°ë™ í™•ëŒ€ ì¢…í•© ì§„ë‹¨ ì‹¤í–‰
         */
        async function runTimerManagerV18Diagnostic(targetHtml) {
            const results = {
                features: null,
                totalIssues: 0
            };

            logToDemo('', 'info');
            logToDemo('â”â”â” â±ï¸ TimerManager ì—°ë™ í™•ëŒ€ (6ê°œ) [v1.8] â”â”â”', 'header');
            logToDemo('â€» ìœ íœ´ ë³µê·€ ë²„ë²…ê±°ë¦¼ í•´ê²°ì„ ìœ„í•œ íƒ€ì´ë¨¸ ì—°ë™ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.', 'info');

            // ì •ì  ë¶„ì„
            const codeOnly = removeCommentsFromCode(targetHtml);

            // 1. SettlementMonitor v3.0 ì ìš© í™•ì¸
            // [FIX] v4.23 - íŒ¨í„´ ë¬¸ìì—´ ë¶„ë¦¬ë¡œ ìê¸° ì°¸ì¡° ë°©ì§€
            const hasSettlementV3 = codeOnly.includes('SettlementMonitor v3' + '.0') ||
                (codeOnly.includes('settlement-monitor') && codeOnly.includes('createPausableInterval'));
            const hasOldSettlement = codeOnly.includes('SettlementMonitor v2' + '.0') ||
                (codeOnly.includes('checkAndRepairCells') && codeOnly.includes('setInterval(checkAndRepairCells, 1' + '00)'));

            let settlementOk = hasSettlementV3 && !hasOldSettlement;
            let settlementMsg = settlementOk ? 'âœ… v3.0 ì ìš©ë¨' :
                (hasOldSettlement ? 'âŒ v2.0 (100ms setInterval)' : 'âš ï¸ ë¯¸í™•ì¸');

            // ëŸ°íƒ€ì„ ì²´í¬
            if (typeof window.TimerManager !== 'undefined' && window.TimerManager.pausableIntervals) {
                const hasSettlementTimer = window.TimerManager.pausableIntervals.has('settlement-monitor');
                if (hasSettlementTimer) {
                    settlementOk = true;
                    settlementMsg = 'âœ… v3.0 (ëŸ°íƒ€ì„ í™•ì¸)';
                }
            }

            updateChecklist('checkSettlementMonitorV3', settlementOk, settlementMsg);
            logToDemo(`ğŸ”§ SettlementMonitor ë²„ì „: ${settlementMsg}`,
                settlementOk ? 'success' : 'error');

            if (!settlementOk) {
                logToDemo('  â€¢ ë¬¸ì œ: 100ms setInterval â†’ 500ms TimerManager ë³€ê²½ í•„ìš”', 'warning');
                logToDemo('  â€¢ íš¨ê³¼: ìœ íœ´ ì‹œ CPU ì‚¬ìš©ëŸ‰ 5ë°° ê°ì†Œ', 'info');
                results.totalIssues++;
            }

            await sleep(20);

            // 2-5. ê°œë³„ íƒ€ì´ë¨¸ ë“±ë¡ í™•ì¸
            const requiredTimers = [
                { name: 'settlement-monitor', id: 'checkPausableSettlement', label: 'â° settlement-monitor' },
                { name: 'workdate-btn-observer', id: 'checkPausableWorkdate', label: 'ğŸ“… workdate-btn-observer' },
                { name: 'pending-work-checker', id: 'checkPausablePending', label: 'ğŸ“‹ pending-work-checker' },
                { name: 'gantt-today-marker', id: 'checkPausableGantt', label: 'ğŸ“ gantt-today-marker' }
            ];

            let timerPassCount = 0;

            for (const timer of requiredTimers) {
                // ì •ì  ë¶„ì„
                const hasInCode = codeOnly.includes(`'${timer.name}'`) || codeOnly.includes(`"${timer.name}"`);

                // ëŸ°íƒ€ì„ ì²´í¬
                let hasRuntime = false;
                if (typeof window.TimerManager !== 'undefined' && window.TimerManager.pausableIntervals) {
                    hasRuntime = window.TimerManager.pausableIntervals.has(timer.name);
                }

                const timerOk = hasInCode || hasRuntime;
                const timerMsg = hasRuntime ? 'âœ… ë“±ë¡ë¨ (ëŸ°íƒ€ì„)' :
                    (hasInCode ? 'âœ… ì½”ë“œ ì¡´ì¬' : 'âŒ ë¯¸ë“±ë¡');

                if (timerOk) timerPassCount++;

                updateChecklist(timer.id, timerOk, timerMsg);
                logToDemo(`${timer.label}: ${timerMsg}`,
                    timerOk ? 'success' : 'error');

                if (!timerOk) {
                    logToDemo(`  â€¢ í•„ìš”: TimerManager.createPausableInterval('${timer.name}', ...)`, 'warning');
                    results.totalIssues++;
                }

                await sleep(15);
            }

            // 6. v1.8 ì¢…í•© ì¤€ë¹„ ìƒíƒœ
            const totalChecks = 5; // SettlementMonitor + 4 timers
            const passedChecks = (settlementOk ? 1 : 0) + timerPassCount;
            const v18ReadinessOk = passedChecks >= 4;

            updateChecklist('checkV18Readiness', v18ReadinessOk,
                v18ReadinessOk ? `âœ… ì¤€ë¹„ (${passedChecks}/${totalChecks})` : `âš ï¸ ë¯¸í¡ (${passedChecks}/${totalChecks})`);
            logToDemo(`âœ… v1.8 ì¢…í•© ì¤€ë¹„: ${v18ReadinessOk ?
                `âœ… ì¤€ë¹„ ì™„ë£Œ (${passedChecks}/${totalChecks} í•­ëª© í†µê³¼)` :
                `âš ï¸ ë¯¸í¡ (${passedChecks}/${totalChecks} í•­ëª©ë§Œ í†µê³¼)`}`,
                v18ReadinessOk ? 'success' : 'warning');

            if (!v18ReadinessOk) {
                logToDemo('  â€¢ v1.8 ì ìš© í•„ìš”: ìœ íœ´ ë³µê·€ ë²„ë²…ê±°ë¦¼ í•´ê²°', 'warning');
                logToDemo('  â€¢ ì›ë¦¬: ëª¨ë“  íƒ€ì´ë¨¸ë¥¼ TimerManagerë¡œ ê´€ë¦¬ â†’ ìœ íœ´ ì‹œ ìë™ ì •ì§€/ì¬ê°œ', 'info');
                results.totalIssues++;
            }

            // ì¶”ê°€: ìŠ¤í¬ë¡¤ debounce í™•ì¸
            // [FIX] v4.23 - íŒ¨í„´ ë¬¸ìì—´ ë¶„ë¦¬ë¡œ ìê¸° ì°¸ì¡° ë°©ì§€
            const hasScrollDebounce = codeOnly.includes('scrollDebounce') ||
                (codeOnly.includes('onScrollEvent') && codeOnly.includes('setTimeout'));
            const hasOldScrollPattern = codeOnly.includes('setTimeout(checkAndRepairCells, 3' + '0)') ||
                codeOnly.includes('setTimeout(checkAndRepairCells, 8' + '0)');

            logToDemo('', 'info');
            logToDemo('â”â”â” ğŸ“œ ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ìµœì í™” â”â”â”', 'header');

            if (hasScrollDebounce && !hasOldScrollPattern) {
                logToDemo('âœ… ìŠ¤í¬ë¡¤ debounce ì ìš©ë¨ (3íšŒâ†’1íšŒ)', 'success');
            } else if (hasOldScrollPattern) {
                logToDemo('âŒ ìŠ¤í¬ë¡¤ 3íšŒ ì¤‘ë³µ í˜¸ì¶œ íŒ¨í„´ ë°œê²¬', 'error');
                logToDemo('  â€¢ ë¬¸ì œ: setTimeout(checkAndRepairCells, 3' + '0/8' + '0) íŒ¨í„´', 'warning');
                logToDemo('  â€¢ í•´ê²°: debounce 150ms ë‹¨ì¼ í˜¸ì¶œë¡œ ë³€ê²½', 'info');
                results.totalIssues++;
            } else {
                logToDemo('âš ï¸ ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ íŒ¨í„´ í™•ì¸ ë¶ˆê°€', 'warning');
            }

            return results;
        }

        // ========== [v4.24] ë¹ ë¥¸ ì„±ëŠ¥ ì§„ë‹¨ í•¨ìˆ˜ ==========

        /**
         * [v4.24] ë¹ ë¥¸ ì„±ëŠ¥ ì§„ë‹¨ - ëŸ°íƒ€ì„ ìƒíƒœ ì¢…í•© ì ê²€
         * ê°€ì´ë“œë¼ì¸ ì„¹ì…˜ 7.2 ê¸°ë°˜
         */
        async function runQuickPerfDiagnostic() {
            const results = { passed: 0, failed: 0, warnings: 0 };

            logToDemo('â”â”â” âš¡ ë¹ ë¥¸ ì„±ëŠ¥ ì§„ë‹¨ [v4.24] â”â”â”', 'header');
            logToDemo('â€» ëŸ°íƒ€ì„ ìƒíƒœë¥¼ ì¢…í•© ì ê²€í•˜ì—¬ ì„±ëŠ¥ ì €í•˜ ì›ì¸ì„ íŒŒì•…í•©ë‹ˆë‹¤.', 'info');
            logToDemo('', 'info');

            // 1. DOM ë…¸ë“œ ê°œìˆ˜
            const domCount = document.querySelectorAll('*').length;
            const domOk = domCount < 5000;
            updateChecklist('checkDomNodeCount', domOk,
                domOk ? `âœ… ${domCount.toLocaleString()}ê°œ` : `âŒ ${domCount.toLocaleString()}ê°œ (ê²½ê³ : 5000+)`);
            logToDemo(`ğŸ“Š DOM ë…¸ë“œ: ${domCount.toLocaleString()}ê°œ ${domOk ? 'âœ…' : 'âŒ (5000+ ê²½ê³ )'}`,
                domOk ? 'success' : 'error');
            if (domOk) results.passed++; else results.failed++;

            await sleep(10);

            // 2. projectData ê°œìˆ˜
            const pdCount = window.projectData?.length || 0;
            const pdOk = pdCount > 0;
            updateChecklist('checkProjectDataCount', pdOk,
                pdOk ? `âœ… ${pdCount}ê°œ` : `âš ï¸ ${pdCount}ê°œ`);
            logToDemo(`ğŸ“¦ projectData: ${pdCount}ê°œ ${pdOk ? 'âœ…' : 'âš ï¸'}`,
                pdOk ? 'success' : 'warning');
            if (pdOk) results.passed++; else results.warnings++;

            await sleep(10);

            // 3. ì§€ì—° ë Œë”ë§ ìƒíƒœ
            const lazyCount = document.querySelectorAll('[data-rendered="false"]').length;
            const lazyOk = lazyCount > 0 || pdCount === 0;
            updateChecklist('checkLazyRenderState', lazyOk,
                lazyOk ? `âœ… ${lazyCount}ê°œ ëŒ€ê¸°` : `âš ï¸ ëª¨ë‘ ë Œë”ë¨`);
            logToDemo(`ğŸ”„ ì§€ì—° ë Œë”ë§: ${lazyCount}ê°œ ëŒ€ê¸° ì¤‘ ${lazyOk ? 'âœ…' : 'âš ï¸'}`,
                lazyOk ? 'success' : 'warning');
            if (lazyOk) results.passed++; else results.warnings++;

            await sleep(10);

            // 4. pausableIntervals ê°œìˆ˜
            const pausableCount = window.TimerManager?.pausableIntervals?.size || 0;
            const pausableExists = !!window.TimerManager?.pausableIntervals;
            updateChecklist('checkPausableIntervalsCount', pausableExists,
                pausableExists ? `âœ… ${pausableCount}ê°œ ë“±ë¡` : `âŒ Map ë¯¸ì¡´ì¬`);
            logToDemo(`â±ï¸ pausableIntervals: ${pausableExists ? pausableCount + 'ê°œ' : 'âŒ ë¯¸ì¡´ì¬'}`,
                pausableExists ? 'success' : 'error');
            if (pausableExists) results.passed++; else results.failed++;

            await sleep(10);

            // 5. Observer ì´ ê°œìˆ˜
            const observerTotal = window.ObserverPool?.getAllStats?.()?.total || 0;
            const observerOk = observerTotal <= 10;
            updateChecklist('checkObserverTotalCount', observerOk,
                observerOk ? `âœ… ${observerTotal}ê°œ` : `âš ï¸ ${observerTotal}ê°œ (10+ ê²½ê³ )`);
            logToDemo(`ğŸ‘ï¸ Observer ì´ê³„: ${observerTotal}ê°œ ${observerOk ? 'âœ…' : 'âš ï¸ (10+ ëˆ„ì )'}`,
                observerOk ? 'success' : 'warning');
            if (observerOk) results.passed++; else results.warnings++;

            await sleep(10);

            // 6. createPausableInterval ì¡´ì¬
            const hasCreatePausable = !!window.TimerManager?.createPausableInterval;
            updateChecklist('checkCreatePausableExists', hasCreatePausable,
                hasCreatePausable ? `âœ… ì¡´ì¬` : `âŒ ë¯¸ì¡´ì¬`);
            logToDemo(`ğŸ”§ createPausableInterval: ${hasCreatePausable ? 'âœ… ì¡´ì¬' : 'âŒ ë¯¸ì¡´ì¬'}`,
                hasCreatePausable ? 'success' : 'error');
            if (hasCreatePausable) results.passed++; else results.failed++;

            await sleep(10);

            // 7. __preEmptiveCleanup ì¡´ì¬
            const hasPreEmptive = typeof window.__preEmptiveCleanup === 'function';
            updateChecklist('checkPreEmptiveExists', hasPreEmptive,
                hasPreEmptive ? `âœ… ì¡´ì¬` : `âš ï¸ ë¯¸ì¡´ì¬`);
            logToDemo(`ğŸ§¹ __preEmptiveCleanup: ${hasPreEmptive ? 'âœ… ì¡´ì¬' : 'âš ï¸ ë¯¸ì¡´ì¬'}`,
                hasPreEmptive ? 'success' : 'warning');
            if (hasPreEmptive) results.passed++; else results.warnings++;

            await sleep(10);

            // 8. FilterRenderManager ì¡´ì¬
            const hasFilterRender = !!window.FilterRenderManager;
            updateChecklist('checkFilterRenderExists', hasFilterRender,
                hasFilterRender ? `âœ… ì¡´ì¬` : `âš ï¸ ë¯¸ì¡´ì¬`);
            logToDemo(`ğŸ›ï¸ FilterRenderManager: ${hasFilterRender ? 'âœ… ì¡´ì¬' : 'âš ï¸ ë¯¸ì¡´ì¬'}`,
                hasFilterRender ? 'success' : 'warning');
            if (hasFilterRender) results.passed++; else results.warnings++;

            await sleep(10);

            // 9. DIAG_STORE.__measuring
            const diagMeasuring = window.DIAG_STORE?.__measuring;
            const diagOk = diagMeasuring !== true;
            updateChecklist('checkDiagMeasuring', diagOk,
                diagOk ? `âœ… false` : `âŒ true (ì§„ë‹¨ ì¤‘)`);
            logToDemo(`ğŸ“ DIAG_STORE.__measuring: ${diagMeasuring} ${diagOk ? 'âœ…' : 'âŒ (ë¯¸í•´ì œ)'}`,
                diagOk ? 'success' : 'error');
            if (diagOk) results.passed++; else results.failed++;

            await sleep(10);

            // 10. ì¢…í•© ìƒíƒœ
            const totalChecks = 9;
            const perfOk = results.failed === 0 && results.warnings <= 2;
            updateChecklist('checkQuickPerfSummary', perfOk,
                perfOk ? `âœ… ì–‘í˜¸ (${results.passed}/${totalChecks})` : `âš ï¸ ì ê²€ í•„ìš” (ì‹¤íŒ¨:${results.failed}, ê²½ê³ :${results.warnings})`);

            logToDemo('', 'info');
            logToDemo('â”â”â” âš¡ ì„±ëŠ¥ ì§„ë‹¨ ê²°ê³¼ â”â”â”', 'header');
            logToDemo(`í†µê³¼: ${results.passed}ê°œ | ì‹¤íŒ¨: ${results.failed}ê°œ | ê²½ê³ : ${results.warnings}ê°œ`,
                perfOk ? 'success' : 'warning');

            if (results.failed > 0) {
                logToDemo('', 'info');
                logToDemo('ğŸ”§ ê¶Œì¥ ì¡°ì¹˜:', 'warning');
                if (!pausableExists || !hasCreatePausable) {
                    logToDemo('  â€¢ TimerManager í™•ì¥ ë¯¸ì ìš© â†’ IntegrityEnhancementModule ë¡œë“œ í™•ì¸', 'info');
                }
                if (!diagOk) {
                    logToDemo('  â€¢ ì§„ë‹¨ í”Œë˜ê·¸ ë¯¸í•´ì œ â†’ DIAG_STORE.__measuring = false ì‹¤í–‰', 'info');
                }
                if (!domOk) {
                    logToDemo('  â€¢ DOM ë…¸ë“œ ê³¼ë‹¤ â†’ ì§€ì—° ë Œë”ë§ ì‘ë™ í™•ì¸', 'info');
                }
            }

            return results;
        }

        /**
         * [v4.24] ë¹ ë¥¸ ì„±ëŠ¥ ì§„ë‹¨ ê°œë³„ ì‹¤í–‰ ë²„íŠ¼ í•¸ë“¤ëŸ¬
         */
        async function runQuickPerfCheck() {
            updateDemoStatus('ë¹ ë¥¸ ì„±ëŠ¥ ì§„ë‹¨ ì¤‘...');
            logToDemo('â”â”â” âš¡ ë¹ ë¥¸ ì„±ëŠ¥ ì§„ë‹¨ ì‹œì‘ [v4.24] â”â”â”', 'header');
            logToDemo('â€» ê°€ì´ë“œë¼ì¸ ì„¹ì…˜ 7.2 ê¸°ë°˜ ëŸ°íƒ€ì„ ìƒíƒœ ì ê²€', 'info');
            logToDemo('', 'info');

            await runQuickPerfDiagnostic();

            logToDemo('', 'info');
            logToDemo('âœ… ë¹ ë¥¸ ì„±ëŠ¥ ì§„ë‹¨ ì™„ë£Œ', 'success');
            updateDemoStatus('ë¹ ë¥¸ ì„±ëŠ¥ ì§„ë‹¨ ì™„ë£Œ');
        }

        // ========== [v1.8] ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì§„ë‹¨ í•¨ìˆ˜ë“¤ ==========

        // ë©”ëª¨ë¦¬ ìŠ¤ëƒ…ìƒ· ì €ì¥ì†Œ (ìœ íœ´ ì „í›„ ë¹„êµìš©)
        const memorySnapshots = {
            baseline: null,
            afterIdle: null,
            timestamps: []
        };

        /**
         * ë©”ëª¨ë¦¬ ìŠ¤ëƒ…ìƒ· ìº¡ì²˜
         */
        function captureMemorySnapshot(label) {
            if (performance.memory) {
                const snapshot = {
                    label: label,
                    timestamp: Date.now(),
                    usedJSHeapSize: performance.memory.usedJSHeapSize,
                    totalJSHeapSize: performance.memory.totalJSHeapSize,
                    jsHeapSizeLimit: performance.memory.jsHeapSizeLimit,
                    domNodes: document.querySelectorAll('*').length
                };
                memorySnapshots.timestamps.push(snapshot);
                return snapshot;
            }
            return null;
        }

        /**
         * ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ íŒ¨í„´ ì •ì  ë¶„ì„
         */
        function analyzeMemoryLeakPatterns(html) {
            const codeOnly = removeCommentsFromCode(html);

            // addEventListener ìˆ˜
            const addListenerMatches = codeOnly.match(/addEventListener\s*\(/g) || [];
            const removeListenerMatches = codeOnly.match(/removeEventListener\s*\(/g) || [];

            // setInterval/setTimeout ìˆ˜
            const setIntervalMatches = codeOnly.match(/setInterval\s*\(/g) || [];
            const clearIntervalMatches = codeOnly.match(/clearInterval\s*\(/g) || [];
            const setTimeoutMatches = codeOnly.match(/setTimeout\s*\(/g) || [];
            const clearTimeoutMatches = codeOnly.match(/clearTimeout\s*\(/g) || [];

            // WeakMap/WeakRef ì‚¬ìš©
            const hasWeakMap = codeOnly.includes('WeakMap');
            const hasWeakRef = codeOnly.includes('WeakRef');
            const hasWeakSet = codeOnly.includes('WeakSet');

            // ì „ì—­ ë³€ìˆ˜ í• ë‹¹ íŒ¨í„´
            const globalAssignMatches = codeOnly.match(/window\.\w+\s*=/g) || [];

            // ìºì‹œ ë¬´íš¨í™” íŒ¨í„´
            const hasCacheInvalidation = codeOnly.includes('cache') &&
                (codeOnly.includes('clear') || codeOnly.includes('invalidate') || codeOnly.includes('reset'));

            // Observer ì •ë¦¬ íŒ¨í„´
            const hasObserverCleanup = codeOnly.includes('disconnect') || codeOnly.includes('unobserve');

            return {
                addListenerCount: addListenerMatches.length,
                removeListenerCount: removeListenerMatches.length,
                listenerImbalance: addListenerMatches.length - removeListenerMatches.length,

                setIntervalCount: setIntervalMatches.length,
                clearIntervalCount: clearIntervalMatches.length,
                intervalImbalance: setIntervalMatches.length - clearIntervalMatches.length,

                setTimeoutCount: setTimeoutMatches.length,
                clearTimeoutCount: clearTimeoutMatches.length,

                hasWeakMap,
                hasWeakRef,
                hasWeakSet,
                weakRefScore: (hasWeakMap ? 1 : 0) + (hasWeakRef ? 1 : 0) + (hasWeakSet ? 1 : 0),

                globalAssignCount: globalAssignMatches.length,
                hasCacheInvalidation,
                hasObserverCleanup
            };
        }

        /**
         * ëŸ°íƒ€ì„ ë©”ëª¨ë¦¬ ìƒíƒœ ë¶„ì„
         */
        function analyzeRuntimeMemory() {
            const result = {
                heapUsedMB: 0,
                heapTotalMB: 0,
                heapLimitMB: 0,
                heapUsagePercent: 0,
                domNodeCount: 0,
                estimatedDetached: 0,
                available: false
            };

            if (performance.memory) {
                result.available = true;
                result.heapUsedMB = performance.memory.usedJSHeapSize / 1024 / 1024;
                result.heapTotalMB = performance.memory.totalJSHeapSize / 1024 / 1024;
                result.heapLimitMB = performance.memory.jsHeapSizeLimit / 1024 / 1024;
                result.heapUsagePercent = (result.heapUsedMB / result.heapLimitMB) * 100;
            }

            result.domNodeCount = document.querySelectorAll('*').length;

            // Detached DOM ì¶”ì • (body ì™¸ë¶€ì˜ ìŠ¤í¬ë¦½íŠ¸ë¡œ ìƒì„±ëœ ìš”ì†Œ)
            // ì‹¤ì œë¡œëŠ” DevTools ì—†ì´ ì •í™•íˆ ê°ì§€ ë¶ˆê°€, íœ´ë¦¬ìŠ¤í‹± ì‚¬ìš©
            try {
                const allElements = document.querySelectorAll('*');
                let detachedEstimate = 0;
                allElements.forEach(el => {
                    if (!document.body.contains(el) && el !== document.documentElement && el !== document.head) {
                        detachedEstimate++;
                    }
                });
                result.estimatedDetached = detachedEstimate;
            } catch (e) {
                result.estimatedDetached = -1;
            }

            return result;
        }

        /**
         * íƒ€ì´ë¨¸ ëˆ„ìˆ˜ ë¶„ì„ (ëŸ°íƒ€ì„)
         */
        function analyzeTimerLeaks() {
            const result = {
                timerManagerExists: false,
                activeIntervals: 0,
                activeTimeouts: 0,
                pausableIntervals: 0,
                timerPoolExists: false
            };

            // TimerManager í™•ì¸
            if (typeof window.TimerManager !== 'undefined' || typeof window.TM !== 'undefined') {
                result.timerManagerExists = true;
                const TM = window.TimerManager || window.TM;

                if (TM.intervals) result.activeIntervals = TM.intervals.size || 0;
                if (TM.timers) result.activeTimeouts = TM.timers.size || 0;
                if (TM.pausableIntervals) result.pausableIntervals = TM.pausableIntervals.size || 0;
            }

            // TimerPool í™•ì¸
            if (typeof window.TimerPool !== 'undefined') {
                result.timerPoolExists = true;
            }

            return result;
        }

        /**
         * [v1.8] ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì¢…í•© ì§„ë‹¨ ì‹¤í–‰
         */
        async function runMemoryLeakDiagnostic(targetHtml) {
            const results = {
                patterns: null,
                runtime: null,
                timers: null,
                totalIssues: 0,
                riskLevel: 'low'
            };

            logToDemo('', 'info');
            logToDemo('â”â”â” ğŸ§  ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì§„ë‹¨ (7ê°œ) [v1.8] â”â”â”', 'header');
            logToDemo('â€» ìœ íœ´ ë³µê·€ ì‹œ ë²„ë²…ê±°ë¦¼ì˜ ì›ì¸ì´ ë˜ëŠ” ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ì§„ë‹¨í•©ë‹ˆë‹¤.', 'info');

            // ì •ì  ë¶„ì„
            results.patterns = analyzeMemoryLeakPatterns(targetHtml);
            // ëŸ°íƒ€ì„ ë¶„ì„
            results.runtime = analyzeRuntimeMemory();
            // íƒ€ì´ë¨¸ ë¶„ì„
            results.timers = analyzeTimerLeaks();

            // 1. í˜„ì¬ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ (Heap)
            let heapOk = true;
            let heapMsg = 'N/A (Chrome ì „ìš©)';

            if (results.runtime.available) {
                const heapMB = results.runtime.heapUsedMB;
                heapOk = heapMB < 150; // 150MB ê¸°ì¤€
                heapMsg = heapOk ?
                    `âœ… ${heapMB.toFixed(1)}MB (< 150MB)` :
                    `âš ï¸ ${heapMB.toFixed(1)}MB (â‰¥ 150MB)`;
            }

            updateChecklist('checkMemoryHeap', heapOk, heapMsg);
            logToDemo(`ğŸ“Š ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: ${heapMsg}`, heapOk ? 'success' : 'warning');

            if (!heapOk) {
                logToDemo(`  â€¢ Heap ì‚¬ìš©ë¥ : ${results.runtime.heapUsagePercent.toFixed(1)}%`, 'warning');
                results.totalIssues++;
            }

            await sleep(20);

            // 2. ë©”ëª¨ë¦¬ ì¦ê°€ìœ¨ (ìŠ¤ëƒ…ìƒ· ë¹„êµ)
            const currentSnapshot = captureMemorySnapshot('current');
            let growthOk = true;
            let growthMsg = 'ì¸¡ì • ëŒ€ê¸°';

            if (memorySnapshots.timestamps.length >= 2) {
                const prev = memorySnapshots.timestamps[memorySnapshots.timestamps.length - 2];
                const curr = currentSnapshot;
                if (prev && curr) {
                    const growthMB = (curr.usedJSHeapSize - prev.usedJSHeapSize) / 1024 / 1024;
                    const timeDiffSec = (curr.timestamp - prev.timestamp) / 1000;
                    const growthRate = growthMB / Math.max(timeDiffSec, 1) * 60; // MB/ë¶„

                    growthOk = growthRate < 5; // 5MB/ë¶„ ì´í•˜
                    growthMsg = growthOk ?
                        `âœ… ${growthRate.toFixed(2)}MB/ë¶„ (ì •ìƒ)` :
                        `âš ï¸ ${growthRate.toFixed(2)}MB/ë¶„ (ëˆ„ìˆ˜ ì˜ì‹¬)`;
                }
            } else {
                growthMsg = 'âœ… ê¸°ì¤€ì  ì„¤ì •ë¨ (ì¬ì§„ë‹¨ ì‹œ ë¹„êµ)';
            }

            updateChecklist('checkMemoryGrowth', growthOk, growthMsg);
            logToDemo(`ğŸ“ˆ ë©”ëª¨ë¦¬ ì¦ê°€ìœ¨: ${growthMsg}`, growthOk ? 'success' : 'warning');

            if (!growthOk) {
                logToDemo('  â€¢ ê¶Œì¥: ìœ íœ´ ì „í›„ ë©”ëª¨ë¦¬ ë¹„êµ í•„ìš”', 'info');
                results.totalIssues++;
            }

            await sleep(20);

            // 3. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ëˆ„ì  í˜„í™©
            const listenerImbalance = results.patterns.listenerImbalance;
            const listenerOk = listenerImbalance < 50; // 50ê°œ ë¯¸ë§Œ ë¶ˆê· í˜• í—ˆìš©
            const listenerMsg = listenerOk ?
                `âœ… +${results.patterns.addListenerCount}/-${results.patterns.removeListenerCount}` :
                `âš ï¸ ë¶ˆê· í˜• ${listenerImbalance}ê°œ`;

            updateChecklist('checkListenerCount', listenerOk, listenerMsg);
            logToDemo(`ğŸ¯ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ: addEventListener ${results.patterns.addListenerCount}íšŒ / removeEventListener ${results.patterns.removeListenerCount}íšŒ`,
                listenerOk ? 'success' : 'warning');

            if (!listenerOk) {
                logToDemo(`  â€¢ ë¶ˆê· í˜•: ${listenerImbalance}ê°œ ë¦¬ìŠ¤ë„ˆ ë¯¸í•´ì œ ê°€ëŠ¥ì„±`, 'warning');
                logToDemo('  â€¢ ê¶Œì¥: EventHub.onWithCleanup íŒ¨í„´ ì‚¬ìš©', 'info');
                results.totalIssues++;
            }

            await sleep(20);

            // 4. íƒ€ì´ë¨¸ ë¯¸í•´ì œ (setInterval)
            const intervalImbalance = results.patterns.intervalImbalance;
            const timerOk = intervalImbalance <= 5 && results.timers.activeIntervals < 20;
            let timerMsg = 'âœ… ì •ìƒ';

            if (results.timers.timerManagerExists) {
                timerMsg = timerOk ?
                    `âœ… í™œì„± ${results.timers.activeIntervals}ê°œ, Pausable ${results.timers.pausableIntervals}ê°œ` :
                    `âš ï¸ í™œì„± ${results.timers.activeIntervals}ê°œ (ê³¼ë‹¤)`;
            } else {
                timerMsg = intervalImbalance <= 5 ?
                    `âœ… setInterval ${results.patterns.setIntervalCount}íšŒ / clearInterval ${results.patterns.clearIntervalCount}íšŒ` :
                    `âš ï¸ ë¶ˆê· í˜• ${intervalImbalance}ê°œ`;
            }

            updateChecklist('checkTimerLeak', timerOk, timerMsg);
            logToDemo(`â° íƒ€ì´ë¨¸ ìƒíƒœ: ${timerMsg}`, timerOk ? 'success' : 'warning');

            if (!timerOk) {
                logToDemo('  â€¢ ìœ íœ´ ë³µê·€ ì‹œ íƒ€ì´ë¨¸ ë™ì‹œ ì‹¤í–‰ â†’ ë²„ë²…ê±°ë¦¼ ì›ì¸', 'warning');
                logToDemo('  â€¢ ê¶Œì¥: TimerManager.pauseAll() / resumeAll() ì‚¬ìš©', 'info');
                results.totalIssues++;
            }

            await sleep(20);

            // 5. WeakMap/WeakRef ì‚¬ìš© ì—¬ë¶€
            const weakScore = results.patterns.weakRefScore;
            const weakOk = weakScore >= 1; // ìµœì†Œ 1ê°œ ì´ìƒ ì‚¬ìš©
            const weakMsg = weakOk ?
                `âœ… WeakMap: ${results.patterns.hasWeakMap ? 'â—‹' : 'Ã—'}, WeakRef: ${results.patterns.hasWeakRef ? 'â—‹' : 'Ã—'}, WeakSet: ${results.patterns.hasWeakSet ? 'â—‹' : 'Ã—'}` :
                'âš ï¸ ë¯¸ì‚¬ìš© (GC ìµœì í™” ë¶ˆê°€)';

            updateChecklist('checkWeakRefUsage', weakOk, weakOk ? `âœ… ${weakScore}ê°œ ì‚¬ìš©` : 'âš ï¸ ë¯¸ì‚¬ìš©');
            logToDemo(`ğŸ”— ì•½í•œ ì°¸ì¡°: ${weakMsg}`, weakOk ? 'success' : 'warning');

            if (!weakOk) {
                logToDemo('  â€¢ ê¶Œì¥: DOM ìš”ì†Œ ìºì‹œì— WeakMap ì‚¬ìš©', 'info');
                results.totalIssues++;
            }

            await sleep(20);

            // 6. Detached DOM ë…¸ë“œ ì¶”ì •
            const detachedCount = results.runtime.estimatedDetached;
            const detachedOk = detachedCount < 10;
            const detachedMsg = detachedOk ?
                `âœ… ${detachedCount}ê°œ (ì •ìƒ)` :
                `âš ï¸ ${detachedCount}ê°œ (ëˆ„ìˆ˜ ì˜ì‹¬)`;

            updateChecklist('checkDetachedDOM', detachedOk, detachedMsg);
            logToDemo(`ğŸ—‘ï¸ Detached DOM: ${detachedMsg}`, detachedOk ? 'success' : 'warning');

            if (!detachedOk) {
                logToDemo('  â€¢ DOM ì œê±° ì‹œ JS ì°¸ì¡°ë„ í•´ì œ í•„ìš”', 'warning');
                results.totalIssues++;
            }

            await sleep(20);

            // 7. ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ìœ„í—˜ë„ (ì¢…í•©)
            const riskScore = results.totalIssues;
            let riskOk = riskScore <= 1;
            let riskMsg = 'âœ… ë‚®ìŒ';
            let riskLevel = 'low';

            if (riskScore >= 4) {
                riskLevel = 'high';
                riskMsg = `âŒ ë†’ìŒ (${riskScore}ê°œ ë¬¸ì œ)`;
                riskOk = false;
            } else if (riskScore >= 2) {
                riskLevel = 'medium';
                riskMsg = `âš ï¸ ì¤‘ê°„ (${riskScore}ê°œ ë¬¸ì œ)`;
                riskOk = false;
            }

            results.riskLevel = riskLevel;

            updateChecklist('checkMemoryLeakRisk', riskOk, riskMsg);
            logToDemo(`ğŸ“‹ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ìœ„í—˜ë„: ${riskMsg}`, riskOk ? 'success' : (riskLevel === 'high' ? 'error' : 'warning'));

            if (!riskOk) {
                logToDemo('', 'info');
                logToDemo('ğŸ“Œ ìœ íœ´ ë³µê·€ ì‹œ ë²„ë²…ê±°ë¦¼ í•´ê²° ë°©ì•ˆ:', 'header');
                logToDemo('  1. ìœ íœ´ ì§„ì… ì‹œ __preEmptiveCleanup()ìœ¼ë¡œ ì„ ì œ ì •ë¦¬', 'info');
                logToDemo('  2. TimerManager.pauseAll() â†’ ë³µê·€ ì‹œ resumeAll()', 'info');
                logToDemo('  3. ObserverPool.cleanupStale() ì£¼ê¸°ì  ì‹¤í–‰', 'info');
                logToDemo('  4. EventHub.onWithCleanupìœ¼ë¡œ ë¦¬ìŠ¤ë„ˆ ìë™ í•´ì œ', 'info');
            }

            return results;
        }

        /**
         * [v1.8] ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê°œë³„ ì§„ë‹¨ ë²„íŠ¼ í•¸ë“¤ëŸ¬
         */
        async function runMemoryLeakCheck() {
            updateDemoStatus('ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì§„ë‹¨ ì¤‘...');
            const html = diagState.uploadedHtml || document.documentElement.outerHTML;

            logToDemo('â”â”â” ğŸ§  ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì§„ë‹¨ [v1.8] â”â”â”', 'header');
            logToDemo('â€» ìœ íœ´ ë³µê·€ ì‹œ ë²„ë²…ê±°ë¦¼ì˜ ì›ì¸ì„ ë¶„ì„í•©ë‹ˆë‹¤.', 'info');
            logToDemo('â€» 2íšŒ ì´ìƒ ì‹¤í–‰ ì‹œ ë©”ëª¨ë¦¬ ì¦ê°€ìœ¨ ë¹„êµê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.', 'info');

            await runMemoryLeakDiagnostic(html);

            logToDemo('âœ… ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì§„ë‹¨ ì™„ë£Œ', 'success');
            updateDemoStatus('ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì§„ë‹¨ ì™„ë£Œ');
        }

        async function measureEventLoop() {
            return new Promise(resolve => {
                const start = performance.now();
                setTimeout(() => resolve(performance.now() - start), 0);
            });
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function clearDemoResults() {
            const resultsDiv = document.getElementById('demoResults');
            if (resultsDiv) {
                resultsDiv.innerHTML = `
                    <div style="color: #64748b;">// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</div>
                    <div style="color: #64748b;">// ğŸ”¬ ì§„ë‹¨ ë° í”„ë¡œíŒŒì¼ëŸ¬ v2.0 - ì½˜ì†” ì¶œë ¥</div>
                    <div style="color: #64748b;">// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</div>
                    <div style="color: #64748b;">// 'ì „ì²´ ì§„ë‹¨ ì‹¤í–‰' ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ëª¨ë“  ì§„ë‹¨ì„ ì‹œì‘í•˜ì„¸ìš”.</div>
                `;
            }

            // ìƒíƒœ ì´ˆê¸°í™”
            diagState.passCount = 0;
            diagState.failCount = 0;
            diagState.errors = 0;
            diagState.warnings = 0;
            diagState.domNodes = 0;
            diagState.memoryMB = 0;
            diagState.diagTime = 0;

            // ë©”íŠ¸ë¦­ ì¹´ë“œ ì´ˆê¸°í™”
            ['diagMetricDom', 'diagMetricMemory', 'diagMetricTime'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.textContent = '-';
            });
            ['diagMetricErrors', 'diagMetricWarnings'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.textContent = '0';
            });
            const statusEl = document.getElementById('diagMetricStatus');
            if (statusEl) statusEl.textContent = 'âœ…';

            // ì²´í¬ë¦¬ìŠ¤íŠ¸ ì´ˆê¸°í™” (60ê°œ)
            const allChecks = [
                // ê¸°ë³¸ ì„±ëŠ¥ (5)
                'checkDom', 'checkMemory', 'checkDCL', 'checkFCP', 'checkEventLoop',
                // ì•…ì„± íŒ¨í„´ (5)
                'checkMole', 'checkGhost', 'checkTrap', 'checkSpaghetti', 'checkMinefield',
                // API í˜¸ì¶œ (3)
                'checkQsa', 'checkDm', 'checkStyle',
                // ì½˜ì†”/ì˜¤ë¥˜ (3)
                'checkConsoleError', 'checkConsoleWarn', 'checkException',
                // HTML/ì¸ì½”ë”© (4)
                'checkEncoding', 'checkCharset', 'checkTags', 'checkHtmlStructure',
                // ë°ì´í„° íŒŒì´í”„ë¼ì¸ (4)
                'checkProjectData', 'checkAppStore', 'checkDataManager', 'checkDataSync',
                // Excel (4)
                'checkFileInput', 'checkUploadHandler', 'checkDownloadFunc', 'checkLocalStorage',
                // í™˜ê²½ (3)
                'checkEnvironment', 'checkCloudStatus', 'checkHttps',
                // ê°„íŠ¸ (4)
                'checkGanttContainer', 'checkTimeline', 'checkTodayMarker', 'checkGroupHeaders',
                // í•„í„° (4)
                'checkFilterSettlement', 'checkFilterOverview', 'checkFilterSchedule', 'checkSearchFunc',
                // UI ë©”ë‰´ (4)
                'checkDataPanel', 'checkHistoryPanel', 'checkQuickLinks', 'checkSettingsMenu',
                // ì ì¬ì  ì˜¤ë¥˜ ì§„ë‹¨ (5)
                'checkEventHandlerRef', 'checkClickSimulation', 'checkUndefinedRef', 'checkGlobalErrorHandler', 'checkLatentErrorSummary',
                // ìœ íœ´ ë³µê·€ ì•ˆì •ì„± (5) [v1.7]
                'checkPreEmptiveCleanup', 'checkVisibilityController', 'checkTimerManagerVisibility', 'checkObserverPoolStats', 'checkIdleReadiness',
                // ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì§„ë‹¨ (7) [v1.8]
                'checkMemoryHeap', 'checkMemoryGrowth', 'checkListenerCount', 'checkTimerLeak', 'checkWeakRefUsage', 'checkDetachedDOM', 'checkMemoryLeakRisk',
                // TimerManager ì—°ë™ í™•ëŒ€ (6) [v1.8]
                'checkSettlementMonitorV3', 'checkPausableSettlement', 'checkPausableWorkdate', 'checkPausablePending', 'checkPausableGantt', 'checkV18Readiness'
            ];
            allChecks.forEach(id => {
                const el = document.getElementById(id);
                if (el) {
                    el.textContent = 'ëŒ€ê¸° ì¤‘';
                    el.style.color = '#667eea';
                    el.style.fontWeight = 'normal';
                }
            });

            // ìš”ì•½ ì´ˆê¸°í™”
            ['diagPassCount', 'diagFailCount'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.textContent = '-';
            });
            const summary = document.getElementById('diagSummary');
            if (summary) summary.textContent = 'ì§„ë‹¨ì„ ì‹¤í–‰í•˜ë©´ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.';

            updateDemoStatus('ì§„ë‹¨ ì¤€ë¹„ ì™„ë£Œ');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸš€ ì¢…í•© ì§„ë‹¨ ë° í”„ë¡œíŒŒì¼ëŸ¬ v2.0 - ë¼ì´ë¸Œ ë°ëª¨ (43ê°œ ì§„ë‹¨ í•­ëª©) ì¤€ë¹„ ì™„ë£Œ');
        });
    </script>
    <!-- ì½”ë“œ ë·°ì–´ ëª¨ë‹¬ -->
    <div id="codeSnippetModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <span>ğŸ” ì½”ë“œ ë¬¸ì œ í™•ì¸</span>
                    <span id="codeModalLineInfo"
                        style="font-weight: normal; font-size: 13px; color: #94a3b8; margin-left: 10px;"></span>
                </div>
                <button class="modal-close" onclick="closeCodeModal()">Ã—</button>
            </div>
            <div id="codeViewerContent" class="code-viewer">
                <!-- ì½”ë“œê°€ ì—¬ê¸°ì— ë¡œë“œë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>

    <script>
        // ëª¨ë‹¬ ì œì–´ í•¨ìˆ˜
        function closeCodeModal() {
            document.getElementById('codeSnippetModal').style.display = 'none';
        }

        // Escape í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeCodeModal();
        });

        // ì™¸ë¶€ í´ë¦­ ì‹œ ëª¨ë‹¬ ë‹«ê¸°
        document.getElementById('codeSnippetModal').addEventListener('click', (e) => {
            if (e.target.id === 'codeSnippetModal') closeCodeModal();
        });
    </script>
</body>

</html>